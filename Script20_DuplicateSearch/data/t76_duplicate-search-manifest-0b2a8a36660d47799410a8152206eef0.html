/*
   Copyright 2010-2016 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license/mit

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
   Copyright 2010-2014 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license/mit

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net

 jquery.layout 1.4.4
 $Date: 2014-11-29 08:00:00 (Sat, 29 November 2014) $
 $Rev: 1.0404 $

 Copyright (c) 2014 Kevin Dalman (http://jquery-dev.com)
 Based on work by Fabrizio Balliano (http://www.fabrizioballiano.net)

 Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.

 SEE: http://layout.jquery-dev.com/LICENSE.txt

 Changelog: http://layout.jquery-dev.com/changelog.cfm

 Docs: http://layout.jquery-dev.com/documentation.html
 Tips: http://layout.jquery-dev.com/tips.html
 Help: http://groups.google.com/group/jquery-ui-layout
 jquery.layout.buttons 1.0
 $Date: 2011-07-16 08:00:00 (Sat, 16 July 2011) $

 Copyright (c) 2011
   Kevin Dalman (http://allpro.net)

 Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.

 @dependancies: UI Layout 1.3.0.rc30.1 or higher

 @support: http://groups.google.com/group/jquery-ui-layout

 Docs: [ to come ]
 Tips: [ to come ]
	jquery.layout.slideOffscreen-1.1.js
*/
taskAction.commonMethod.init(function(){},pvui.common.showPVLoader,pvui.common.hidePVLoader,pvi.util.showFloatingNotification.successMessage,pvi.util.showFloatingNotification.errorMessage,pvi.util.showWarning);followUpQuery.commonMethod.init(function(){},pvui.common.showPVLoader,pvui.common.hidePVLoader,pvi.util.showFloatingNotification.successMessage,pvi.util.showFloatingNotification.errorMessage,pvi.util.showWarning);
(function(a){"function"===typeof define&&define.amd?define(["jquery"],function(e){return a(e,window,document)}):"object"===typeof exports?module.exports=function(e,k){e||(e=window);k||(k="undefined"!==typeof window?require("jquery"):require("jquery")(e));return a(k,e,e.document)}:a(jQuery,window,document)})(function(a,e,k,g){function n(d){var y,lb,f={};a.each(d,function(a){(y=a.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(y[1]+" ")&&(lb=a.replace(y[0],y[2].toLowerCase()),
f[lb]=a,"o"===y[1]&&n(d[a]))});d._hungarianMap=f}function q(d,y,lb){d._hungarianMap||n(d);var f;a.each(y,function(h){f=d._hungarianMap[h];f===g||!lb&&y[f]!==g||("o"===f.charAt(0)?(y[f]||(y[f]={}),a.extend(!0,y[f],y[h]),q(d[f],y[f],lb)):y[f]=y[h])})}function c(d){var a=p.defaults.oLanguage,f=d.sZeroRecords;!d.sEmptyTable&&f&&"No data available in table"===a.sEmptyTable&&ia(d,d,"sZeroRecords","sEmptyTable");!d.sLoadingRecords&&f&&"Loading..."===a.sLoadingRecords&&ia(d,d,"sZeroRecords","sLoadingRecords");
d.sInfoThousands&&(d.sThousands=d.sInfoThousands);(d=d.sDecimal)&&u(d)}function b(d){Na(d,"ordering","bSort");Na(d,"orderMulti","bSortMulti");Na(d,"orderClasses","bSortClasses");Na(d,"orderCellsTop","bSortCellsTop");Na(d,"order","aaSorting");Na(d,"orderFixed","aaSortingFixed");Na(d,"paging","bPaginate");Na(d,"pagingType","sPaginationType");Na(d,"pageLength","iDisplayLength");Na(d,"searching","bFilter");"boolean"===typeof d.sScrollX&&(d.sScrollX=d.sScrollX?"100%":"");"boolean"===typeof d.scrollX&&
(d.scrollX=d.scrollX?"100%":"");if(d=d.aoSearchCols)for(var a=0,f=d.length;a<f;a++)d[a]&&q(p.models.oSearch,d[a])}function m(d){Na(d,"orderable","bSortable");Na(d,"orderData","aDataSort");Na(d,"orderSequence","asSorting");Na(d,"orderDataType","sortDataType");var y=d.aDataSort;"number"===typeof y&&!a.isArray(y)&&(d.aDataSort=[y])}function r(d){if(!p.__browser){var y={};p.__browser=y;var f=a("<div/>").css({position:"fixed",top:0,left:-1*a(e).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(a("<div/>").css({position:"absolute",
top:1,left:1,width:100,overflow:"scroll"}).append(a("<div/>").css({width:"100%",height:10}))).appendTo("body"),h=f.children(),l=h.children();y.barWidth=h[0].offsetWidth-h[0].clientWidth;y.bScrollOversize=100===l[0].offsetWidth&&100!==h[0].clientWidth;y.bScrollbarLeft=1!==Math.round(l.offset().left);y.bBounding=f[0].getBoundingClientRect().width?!0:!1;f.remove()}a.extend(d.oBrowser,p.__browser);d.oScroll.iBarWidth=p.__browser.barWidth}function C(d,a,f,h,l,p){var b,c=!1;for(f!==g&&(b=f,c=!0);h!==l;)d.hasOwnProperty(h)&&
(b=c?a(b,d[h],h,d):d[h],c=!0,h+=p);return b}function w(d,y){var f=p.defaults.column,h=d.aoColumns.length,f=a.extend({},p.models.oColumn,f,{nTh:y?y:k.createElement("th"),sTitle:f.sTitle?f.sTitle:y?y.innerHTML:"",aDataSort:f.aDataSort?f.aDataSort:[h],mData:f.mData?f.mData:h,idx:h});d.aoColumns.push(f);f=d.aoPreSearchCols;f[h]=a.extend({},p.models.oSearch,f[h]);K(d,h,a(y).data())}function K(d,y,f){y=d.aoColumns[y];var h=d.oClasses,l=a(y.nTh);if(!y.sWidthOrig){y.sWidthOrig=l.attr("width")||null;var b=
(l.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);b&&(y.sWidthOrig=b[1])}f!==g&&null!==f&&(m(f),q(p.defaults.column,f),f.mDataProp!==g&&!f.mData&&(f.mData=f.mDataProp),f.sType&&(y._sManualType=f.sType),f.className&&!f.sClass&&(f.sClass=f.className),f.sClass&&l.addClass(f.sClass),a.extend(y,f),ia(y,f,"sWidth","sWidthOrig"),f.iDataSort!==g&&(y.aDataSort=[f.iDataSort]),ia(y,f,"aDataSort"));var c=y.mData,u=W(c),v=y.mRender?W(y.mRender):null;f=function(d){return"string"===typeof d&&-1!==d.indexOf("@")};
y._bAttrSrc=a.isPlainObject(c)&&(f(c.sort)||f(c.type)||f(c.filter));y._setter=null;y.fnGetData=function(d,a,y){var f=u(d,a,g,y);return v&&a?v(f,a,d,y):f};y.fnSetData=function(d,a,y){return ka(c)(d,a,y)};"number"!==typeof c&&(d._rowReadObject=!0);d.oFeatures.bSort||(y.bSortable=!1,l.addClass(h.sSortableNone));d=-1!==a.inArray("asc",y.asSorting);f=-1!==a.inArray("desc",y.asSorting);y.bSortable&&(d||f)?d&&!f?(y.sSortingClass=h.sSortableAsc,y.sSortingClassJUI=h.sSortJUIAscAllowed):!d&&f?(y.sSortingClass=
h.sSortableDesc,y.sSortingClassJUI=h.sSortJUIDescAllowed):(y.sSortingClass=h.sSortable,y.sSortingClassJUI=h.sSortJUI):(y.sSortingClass=h.sSortableNone,y.sSortingClassJUI="")}function F(d){if(!1!==d.oFeatures.bAutoWidth){var a=d.aoColumns;hb(d);for(var f=0,h=a.length;f<h;f++)a[f].nTh.style.width=a[f].sWidth}a=d.oScroll;""===a.sY&&""===a.sX||J(d);N(d,null,"column-sizing",[d])}function x(d,a){d=I(d,"bVisible");return"number"===typeof d[a]?d[a]:null}function G(d,y){d=I(d,"bVisible");d=a.inArray(y,d);
return-1!==d?d:null}function D(d){var y=0;a.each(d.aoColumns,function(d,f){f.bVisible&&"none"!==a(f.nTh).css("display")&&y++});return y}function I(d,y){var f=[];a.map(d.aoColumns,function(d,a){d[y]&&f.push(a)});return f}function A(d){var a=d.aoColumns,f=d.aoData,h=p.ext.type.detect,l,b,c,u,v,t,z,m,E;l=0;for(b=a.length;l<b;l++)if(z=a[l],E=[],!z.sType&&z._sManualType)z.sType=z._sManualType;else if(!z.sType){c=0;for(u=h.length;c<u;c++){v=0;for(t=f.length;v<t;v++){E[v]===g&&(E[v]=T(d,v,l,"type"));m=h[c](E[v],
d);if(!m&&c!==h.length-1)break;if("html"===m)break}if(m){z.sType=m;break}}z.sType||(z.sType="string")}}function B(d,y,f,h){var l,b,p,c,u,v,t=d.aoColumns;if(y)for(l=y.length-1;0<=l;l--){v=y[l];var z=v.targets!==g?v.targets:v.aTargets;a.isArray(z)||(z=[z]);b=0;for(p=z.length;b<p;b++)if("number"===typeof z[b]&&0<=z[b]){for(;t.length<=z[b];)w(d);h(z[b],v)}else if("number"===typeof z[b]&&0>z[b])h(t.length+z[b],v);else if("string"===typeof z[b])for(c=0,u=t.length;c<u;c++)("_all"==z[b]||a(t[c].nTh).hasClass(z[b]))&&
h(c,v)}if(f)for(l=0,d=f.length;l<d;l++)h(l,f[l])}function Q(d,y,f,h){var l=d.aoData.length,b=a.extend(!0,{},p.models.oRow,{src:f?"dom":"data",idx:l});b._aData=y;d.aoData.push(b);for(var c=d.aoColumns,v=0,u=c.length;v<u;v++)c[v].sType=null;d.aiDisplayMaster.push(l);y=d.rowIdFn(y);y!==g&&(d.aIds[y]=b);!f&&d.oFeatures.bDeferRender||oa(d,l,f,h);return l}function M(d,y){var f;y instanceof a||(y=a(y));return y.map(function(a,y){f=ja(d,y);return Q(d,f.data,y,f.cells)})}function T(d,a,f,h){var l=d.iDraw,
b=d.aoColumns[f],p=d.aoData[a]._aData,c=b.sDefaultContent,u=b.fnGetData(p,h,{settings:d,row:a,col:f});if(u===g)return d.iDrawError!=l&&null===c&&(v(d,0,"Requested unknown parameter "+("function"==typeof b.mData?"{function}":"'"+b.mData+"'")+" for row "+a+", column "+f,4),d.iDrawError=l),c;if((u===p||null===u)&&null!==c&&h!==g)u=c;else if("function"===typeof u)return u.call(p);return null===u&&"display"==h?"":u}function R(d,a,f,h){d.aoColumns[f].fnSetData(d.aoData[a]._aData,h,{settings:d,row:a,col:f})}
function Ia(d){return a.map(d.match(/(\\.|[^\.])+/g)||[""],function(d){return d.replace(/\\\./g,".")})}function W(d){if(a.isPlainObject(d)){var y={};a.each(d,function(d,a){a&&(y[d]=W(a))});return function(d,a,f,h){var l=y[a]||y._;return l!==g?l(d,a,f,h):d}}if(null===d)return function(d){return d};if("function"===typeof d)return function(a,y,f,h){return d(a,y,f,h)};if("string"===typeof d&&(-1!==d.indexOf(".")||-1!==d.indexOf("[")||-1!==d.indexOf("("))){var f=function(d,y,h){var l,b;if(""!==h){b=Ia(h);
for(var p=0,c=b.length;p<c;p++){h=b[p].match(mb);l=b[p].match(kb);if(h){b[p]=b[p].replace(mb,"");""!==b[p]&&(d=d[b[p]]);l=[];b.splice(0,p+1);b=b.join(".");if(a.isArray(d))for(p=0,c=d.length;p<c;p++)l.push(f(d[p],y,b));d=h[0].substring(1,h[0].length-1);d=""===d?l:l.join(d);break}else if(l){b[p]=b[p].replace(kb,"");d=d[b[p]]();continue}if(null===d||d[b[p]]===g)return g;d=d[b[p]]}}return d};return function(a,y){return f(a,y,d)}}return function(a){return a[d]}}function ka(d){if(a.isPlainObject(d))return ka(d._);
if(null===d)return function(){};if("function"===typeof d)return function(a,y,f){d(a,"set",y,f)};if("string"===typeof d&&(-1!==d.indexOf(".")||-1!==d.indexOf("[")||-1!==d.indexOf("("))){var y=function(d,f,h){h=Ia(h);var l;l=h[h.length-1];for(var b,p,c=0,u=h.length-1;c<u;c++){b=h[c].match(mb);p=h[c].match(kb);if(b){h[c]=h[c].replace(mb,"");d[h[c]]=[];l=h.slice();l.splice(0,c+1);b=l.join(".");if(a.isArray(f))for(p=0,u=f.length;p<u;p++)l={},y(l,f[p],b),d[h[c]].push(l);else d[h[c]]=f;return}p&&(h[c]=h[c].replace(kb,
""),d=d[h[c]](f));if(null===d[h[c]]||d[h[c]]===g)d[h[c]]={};d=d[h[c]]}if(l.match(kb))d[l.replace(kb,"")](f);else d[l.replace(mb,"")]=f};return function(a,f){return y(a,f,d)}}return function(a,y){a[d]=y}}function na(d){return Ua(d.aoData,"_aData")}function S(d){d.aoData.length=0;d.aiDisplayMaster.length=0;d.aiDisplay.length=0;d.aIds={}}function la(d,a,f){for(var h=-1,l=0,b=d.length;l<b;l++)d[l]==a?h=l:d[l]>a&&d[l]--; -1!=h&&f===g&&d.splice(h,1)}function pa(d,a,f,h){var l=d.aoData[a],b,p=function(f,
h){for(;f.childNodes.length;)f.removeChild(f.firstChild);f.innerHTML=T(d,a,h,"display")};if("dom"!==f&&(f&&"auto"!==f||"dom"!==l.src)){var c=l.anCells;if(c)if(h!==g)p(c[h],h);else for(f=0,b=c.length;f<b;f++)p(c[f],f)}else l._aData=ja(d,l,h,h===g?g:l._aData).data;l._aSortData=null;l._aFilterData=null;p=d.aoColumns;if(h!==g)p[h].sType=null;else{f=0;for(b=p.length;f<b;f++)p[f].sType=null;L(d,l)}}function ja(d,y,f,h){var l=[],b=y.firstChild,p,c,u=0,v,z=d.aoColumns,t=d._rowReadObject;h=h!==g?h:t?{}:[];
var m=function(d,a){if("string"===typeof d){var y=d.indexOf("@");-1!==y&&(y=d.substring(y+1),ka(d)(h,a.getAttribute(y)))}},E=function(d){if(f===g||f===u)c=z[u],v=a.trim(d.innerHTML),c&&c._bAttrSrc?(ka(c.mData._)(h,v),m(c.mData.sort,d),m(c.mData.type,d),m(c.mData.filter,d)):t?(c._setter||(c._setter=ka(c.mData)),c._setter(h,v)):h[u]=v;u++};if(b)for(;b;){p=b.nodeName.toUpperCase();if("TD"==p||"TH"==p)E(b),l.push(b);b=b.nextSibling}else for(l=y.anCells,b=0,p=l.length;b<p;b++)E(l[b]);(y=y.firstChild?y:
y.nTr)&&(y=y.getAttribute("id"))&&ka(d.rowId)(h,y);return{data:h,cells:l}}function oa(d,y,f,h){var l=d.aoData[y],b=l._aData,p=[],c,u,v,z,t;if(null===l.nTr){c=f||k.createElement("tr");l.nTr=c;l.anCells=p;c._DT_RowIndex=y;L(d,l);z=0;for(t=d.aoColumns.length;z<t;z++)v=d.aoColumns[z],u=f?h[z]:k.createElement(v.sCellType),u._DT_CellIndex={row:y,column:z},p.push(u),f&&!v.mRender&&v.mData===z||a.isPlainObject(v.mData)&&v.mData._===z+".display"||(u.innerHTML=T(d,y,z,"display")),v.sClass&&(u.className+=" "+
v.sClass),v.bVisible&&!f?c.appendChild(u):!v.bVisible&&f&&u.parentNode.removeChild(u),v.fnCreatedCell&&v.fnCreatedCell.call(d.oInstance,u,T(d,y,z),b,y,z);N(d,"aoRowCreatedCallback",null,[c,b,y])}l.nTr.setAttribute("role","row")}function L(d,y){var f=y.nTr,h=y._aData;f&&((d=d.rowIdFn(h))&&(f.id=d),h.DT_RowClass&&(d=h.DT_RowClass.split(" "),y.__rowc=y.__rowc?ob(y.__rowc.concat(d)):d,a(f).removeClass(y.__rowc.join(" ")).addClass(h.DT_RowClass)),h.DT_RowAttr&&a(f).attr(h.DT_RowAttr),h.DT_RowData&&a(f).data(h.DT_RowData))}
function da(d){var y,f,h,l,b,p=d.nTHead,c=d.nTFoot,u=0===a("th, td",p).length,v=d.oClasses,z=d.aoColumns;u&&(l=a("<tr/>").appendTo(p));y=0;for(f=z.length;y<f;y++)b=z[y],h=a(b.nTh).addClass(b.sClass),u&&h.appendTo(l),d.oFeatures.bSort&&(h.addClass(b.sSortingClass),!1!==b.bSortable&&(h.attr("tabindex",d.iTabIndex).attr("aria-controls",d.sTableId),Wa(d,b.nTh,y))),b.sTitle!=h[0].innerHTML&&h.html(b.sTitle),X(d,"header")(d,h,b,v);u&&qa(d.aoHeader,p);a(p).find(">tr").attr("role","row");a(p).find(">tr>th, >tr>td").addClass(v.sHeaderTH);
a(c).find(">tr>th, >tr>td").addClass(v.sFooterTH);if(null!==c)for(d=d.aoFooter[0],y=0,f=d.length;y<f;y++)b=z[y],b.nTf=d[y].cell,b.sClass&&a(b.nTf).addClass(b.sClass)}function V(d,y,f){var h,l,b,p=[],c=[],u=d.aoColumns.length,v;if(y){f===g&&(f=!1);h=0;for(l=y.length;h<l;h++){p[h]=y[h].slice();p[h].nTr=y[h].nTr;for(b=u-1;0<=b;b--)d.aoColumns[b].bVisible||f||p[h].splice(b,1);c.push([])}h=0;for(l=p.length;h<l;h++){if(d=p[h].nTr)for(;b=d.firstChild;)d.removeChild(b);b=0;for(y=p[h].length;b<y;b++)if(v=
u=1,c[h][b]===g){d.appendChild(p[h][b].cell);for(c[h][b]=1;p[h+u]!==g&&p[h][b].cell==p[h+u][b].cell;)c[h+u][b]=1,u++;for(;p[h][b+v]!==g&&p[h][b].cell==p[h][b+v].cell;){for(f=0;f<u;f++)c[h+f][b+v]=1;v++}a(p[h][b].cell).attr("rowspan",u).attr("colspan",v)}}}}function ra(d){var y=N(d,"aoPreDrawCallback","preDraw",[d]);if(-1!==a.inArray(!1,y))ua(d,!1);else{var y=[],f=0,l=d.asStripeClasses,b=l.length,p=d.oLanguage,c=d.iInitDisplayStart,u="ssp"==h(d),v=d.aiDisplay;d.bDrawing=!0;c!==g&&-1!==c&&(d._iDisplayStart=
u?c:c>=d.fnRecordsDisplay()?0:c,d.iInitDisplayStart=-1);var c=d._iDisplayStart,z=d.fnDisplayEnd();if(d.bDeferLoading)d.bDeferLoading=!1,d.iDraw++,ua(d,!1);else if(u){if(!d.bDestroying&&!aa(d))return}else d.iDraw++;if(0!==v.length)for(p=u?d.aoData.length:z,u=u?0:c;u<p;u++){var t=v[u],m=d.aoData[t];null===m.nTr&&oa(d,t);t=m.nTr;if(0!==b){var E=l[f%b];m._sRowStripe!=E&&(a(t).removeClass(m._sRowStripe).addClass(E),m._sRowStripe=E)}N(d,"aoRowCallback",null,[t,m._aData,f,u]);y.push(t);f++}else f=p.sZeroRecords,
1==d.iDraw&&"ajax"==h(d)?f=p.sLoadingRecords:p.sEmptyTable&&0===d.fnRecordsTotal()&&(f=p.sEmptyTable),y[0]=a("<tr/>",{"class":b?l[0]:""}).append(a("<td />",{valign:"top",colSpan:D(d),"class":d.oClasses.sRowEmpty}).html(f))[0];N(d,"aoHeaderCallback","header",[a(d.nTHead).children("tr")[0],na(d),c,z,v]);N(d,"aoFooterCallback","footer",[a(d.nTFoot).children("tr")[0],na(d),c,z,v]);l=a(d.nTBody);l.children().detach();l.append(a(y));N(d,"aoDrawCallback","draw",[d]);d.bSorted=!1;d.bFiltered=!1;d.bDrawing=
!1}}function ea(d,a){var f=d.oFeatures,h=f.bFilter;f.bSort&&Oa(d);h?Ja(d,d.oPreviousSearch):d.aiDisplay=d.aiDisplayMaster.slice();!0!==a&&(d._iDisplayStart=0);d._drawHold=a;ra(d);d._drawHold=!1}function ma(d){var y=d.oClasses,f=a(d.nTable),f=a("<div/>").insertBefore(f),h=d.oFeatures,l=a("<div/>",{id:d.sTableId+"_wrapper","class":y.sWrapper+(d.nTFoot?"":" "+y.sNoFooter)});d.nHolding=f[0];d.nTableWrapper=l[0];d.nTableReinsertBefore=d.nTable.nextSibling;for(var b=d.sDom.split(""),c,u,v,z,t,m,E=0;E<b.length;E++){c=
null;u=b[E];if("<"==u){v=a("<div/>")[0];z=b[E+1];if("'"==z||'"'==z){t="";for(m=2;b[E+m]!=z;)t+=b[E+m],m++;"H"==t?t=y.sJUIHeader:"F"==t&&(t=y.sJUIFooter);-1!=t.indexOf(".")?(z=t.split("."),v.id=z[0].substr(1,z[0].length-1),v.className=z[1]):"#"==t.charAt(0)?v.id=t.substr(1,t.length-1):v.className=t;E+=m}l.append(v);l=a(v)}else if(">"==u)l=l.parent();else if("l"==u&&h.bPaginate&&h.bLengthChange)c=Ya(d);else if("f"==u&&h.bFilter)c=Za(d);else if("r"==u&&h.bProcessing)c=Da(d);else if("t"==u)c=$a(d);else if("i"==
u&&h.bInfo)c=db(d);else if("p"==u&&h.bPaginate)c=ab(d);else if(0!==p.ext.feature.length)for(v=p.ext.feature,m=0,z=v.length;m<z;m++)if(u==v[m].cFeature){c=v[m].fnInit(d);break}c&&(v=d.aanFeatures,v[u]||(v[u]=[]),v[u].push(c),l.append(c))}f.replaceWith(l);d.nHolding=null}function qa(d,y){y=a(y).children("tr");var f,h,l,b,p,c,u,v,z,t;d.splice(0,d.length);l=0;for(c=y.length;l<c;l++)d.push([]);l=0;for(c=y.length;l<c;l++)for(f=y[l],h=f.firstChild;h;){if("TD"==h.nodeName.toUpperCase()||"TH"==h.nodeName.toUpperCase()){v=
1*h.getAttribute("colspan");z=1*h.getAttribute("rowspan");v=v&&0!==v&&1!==v?v:1;z=z&&0!==z&&1!==z?z:1;b=0;for(p=d[l];p[b];)b++;u=b;t=1===v?!0:!1;for(p=0;p<v;p++)for(b=0;b<z;b++)d[l+b][u+p]={cell:h,unique:t},d[l+b].nTr=f}h=h.nextSibling}}function va(d,a,f){var h=[];f||(f=d.aoHeader,a&&(f=[],qa(f,a)));a=0;for(var l=f.length;a<l;a++)for(var b=0,p=f[a].length;b<p;b++)!f[a][b].unique||h[b]&&d.bSortCellsTop||(h[b]=f[a][b].cell);return h}function ya(d,y,f){N(d,"aoServerParams","serverParams",[y]);if(y&&
a.isArray(y)){var h={},l=/(.*?)\[\]$/;a.each(y,function(d,a){(d=a.name.match(l))?(d=d[0],h[d]||(h[d]=[]),h[d].push(a.value)):h[a.name]=a.value});y=h}var b,p=d.ajax,c=d.oInstance,u=function(a){N(d,null,"xhr",[d,a,d.jqXHR]);f(a)};if(a.isPlainObject(p)&&p.data){b=p.data;var z=a.isFunction(b)?b(y,d):b;y=a.isFunction(b)&&z?z:a.extend(!0,y,z);delete p.data}z={data:y,success:function(a){var y=a.error||a.sError;y&&v(d,0,y);d.json=a;u(a)},dataType:"json",cache:!1,type:d.sServerMethod,error:function(y,f){var h=
N(d,null,"xhr",[d,null,d.jqXHR]);-1===a.inArray(!0,h)&&("parsererror"==f?v(d,0,"Invalid JSON response",1):4===y.readyState&&v(d,0,"Ajax error",7));ua(d,!1)}};d.oAjaxData=y;N(d,null,"preXhr",[d,y]);d.fnServerData?d.fnServerData.call(c,d.sAjaxSource,a.map(y,function(d,a){return{name:a,value:d}}),u,d):d.sAjaxSource||"string"===typeof p?d.jqXHR=a.ajax(a.extend(z,{url:p||d.sAjaxSource})):a.isFunction(p)?d.jqXHR=p.call(c,y,u,d):(d.jqXHR=a.ajax(a.extend(z,p)),p.data=b)}function aa(d){return d.bAjaxDataGet?
(d.iDraw++,ua(d,!0),ya(d,Va(d),function(a){bb(d,a)}),!1):!0}function Va(d){var y=d.aoColumns,f=y.length,h=d.oFeatures,l=d.oPreviousSearch,b=d.aoPreSearchCols,c,u=[],v,z,t,m=Pa(d);c=d._iDisplayStart;v=!1!==h.bPaginate?d._iDisplayLength:-1;var E=function(d,a){u.push({name:d,value:a})};E("sEcho",d.iDraw);E("iColumns",f);E("sColumns",Ua(y,"sName").join(","));E("iDisplayStart",c);E("iDisplayLength",v);var r={draw:d.iDraw,columns:[],order:[],start:c,length:v,search:{value:l.sSearch,regex:l.bRegex}};for(c=
0;c<f;c++)z=y[c],t=b[c],v="function"==typeof z.mData?"function":z.mData,r.columns.push({data:v,name:z.sName,searchable:z.bSearchable,orderable:z.bSortable,search:{value:t.sSearch,regex:t.bRegex}}),E("mDataProp_"+c,v),h.bFilter&&(E("sSearch_"+c,t.sSearch),E("bRegex_"+c,t.bRegex),E("bSearchable_"+c,z.bSearchable)),h.bSort&&E("bSortable_"+c,z.bSortable);h.bFilter&&(E("sSearch",l.sSearch),E("bRegex",l.bRegex));h.bSort&&(a.each(m,function(d,a){r.order.push({column:a.col,dir:a.dir});E("iSortCol_"+d,a.col);
E("sSortDir_"+d,a.dir)}),E("iSortingCols",m.length));y=p.ext.legacy.ajax;return null===y?d.sAjaxSource?u:r:y?u:r}function bb(d,a){var f=sa(d,a),h=a.sEcho!==g?a.sEcho:a.draw,l=a.iTotalRecords!==g?a.iTotalRecords:a.recordsTotal,b=a.iTotalDisplayRecords!==g?a.iTotalDisplayRecords:a.recordsFiltered;if(h){if(1*h<d.iDraw)return;d.iDraw=1*h}S(d);d._iRecordsTotal=parseInt(l,10);d._iRecordsDisplay=parseInt(b,10);h=0;for(l=f.length;h<l;h++)Q(d,f[h]);d.aiDisplay=d.aiDisplayMaster.slice();d.bAjaxDataGet=!1;ra(d);
d._bInitComplete||ta(d,a);d.bAjaxDataGet=!0;ua(d,!1)}function sa(d,y){d=a.isPlainObject(d.ajax)&&d.ajax.dataSrc!==g?d.ajax.dataSrc:d.sAjaxDataProp;return"data"===d?y.aaData||y[d]:""!==d?W(d)(y):y}function Za(d){var y=d.oClasses,f=d.sTableId,l=d.oLanguage,b=d.oPreviousSearch,p=d.aanFeatures,c='<input type="search" class="'+y.sFilterInput+'"/>',u=l.sSearch,u=u.match(/_INPUT_/)?u.replace("_INPUT_",c):u+c,y=a("<div/>",{id:p.f?null:f+"_filter","class":y.sFilter}).append(a("<label/>").append(u)),p=function(){var a=
this.value?this.value:"";a!=b.sSearch&&(Ja(d,{sSearch:a,bRegex:b.bRegex,bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive}),d._iDisplayStart=0,ra(d))},c=null!==d.searchDelay?d.searchDelay:"ssp"===h(d)?400:0,v=a("input",y).val(b.sSearch).attr("placeholder",l.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",c?tb(p,c):p).on("keypress.DT",function(d){if(13==d.keyCode)return!1}).attr("aria-controls",f);a(d.nTable).on("search.dt.DT",function(a,y){if(d===y)try{v[0]!==k.activeElement&&
v.val(b.sSearch)}catch(f){}});return y[0]}function Ja(d,a,f){var l=d.oPreviousSearch,b=d.aoPreSearchCols,p=function(d){l.sSearch=d.sSearch;l.bRegex=d.bRegex;l.bSmart=d.bSmart;l.bCaseInsensitive=d.bCaseInsensitive};A(d);if("ssp"!=h(d)){Qa(d,a.sSearch,f,a.bEscapeRegex!==g?!a.bEscapeRegex:a.bRegex,a.bSmart,a.bCaseInsensitive);p(a);for(a=0;a<b.length;a++)wa(d,b[a].sSearch,a,b[a].bEscapeRegex!==g?!b[a].bEscapeRegex:b[a].bRegex,b[a].bSmart,b[a].bCaseInsensitive);za(d)}else p(a);d.bFiltered=!0;N(d,null,
"search",[d])}function za(d){for(var f=p.ext.search,h=d.aiDisplay,l,b,c=0,u=f.length;c<u;c++){for(var v=[],z=0,t=h.length;z<t;z++)b=h[z],l=d.aoData[b],f[c](d,l._aFilterData,b,l._aData,z)&&v.push(b);h.length=0;a.merge(h,v)}}function wa(d,a,f,h,l,b){if(""!==a){var p=[],c=d.aiDisplay;h=Ea(a,h,l,b);for(l=0;l<c.length;l++)a=d.aoData[c[l]]._aFilterData[f],h.test(a)&&p.push(c[l]);d.aiDisplay=p}}function Qa(d,a,f,h,l,b){h=Ea(a,h,l,b);b=d.oPreviousSearch.sSearch;var c=d.aiDisplayMaster,u;l=[];0!==p.ext.search.length&&
(f=!0);u=eb(d);if(0>=a.length)d.aiDisplay=c.slice();else{if(u||f||b.length>a.length||0!==a.indexOf(b)||d.bSorted)d.aiDisplay=c.slice();a=d.aiDisplay;for(f=0;f<a.length;f++)h.test(d.aoData[a[f]]._sFilterRow)&&l.push(a[f]);d.aiDisplay=l}}function Ea(d,f,h,l){d=f?d:ub(d);h&&(d="^(?=.*?"+a.map(d.match(/"[^"]+"|[^ ]+/g)||[""],function(d){if('"'===d.charAt(0)){var a=d.match(/^"(.*)"$/);d=a?a[1]:d}return d.replace('"',"")}).join(")(?=.*?")+").*$");return RegExp(d,l?"i":"")}function eb(d){var a=d.aoColumns,
f,h,l,b,c,u,v,z,t=p.ext.type.search;f=!1;h=0;for(b=d.aoData.length;h<b;h++)if(z=d.aoData[h],!z._aFilterData){u=[];l=0;for(c=a.length;l<c;l++)f=a[l],f.bSearchable?(v=T(d,h,l,"filter"),t[f.sType]&&(v=t[f.sType](v)),null===v&&(v=""),"string"!==typeof v&&v.toString&&(v=v.toString())):v="",v.indexOf&&-1!==v.indexOf("&")&&(pb.innerHTML=v,v=Lb?pb.textContent:pb.innerText),v.replace&&(v=v.replace(/[\r\n]/g,"")),u.push(v);z._aFilterData=u;z._sFilterRow=u.join("  ");f=!0}return f}function Ra(d){return{search:d.sSearch,
smart:d.bSmart,regex:d.bRegex,caseInsensitive:d.bCaseInsensitive}}function Sa(d){return{sSearch:d.search,bSmart:d.smart,bRegex:d.regex,bCaseInsensitive:d.caseInsensitive}}function db(d){var f=d.sTableId,h=d.aanFeatures.i,l=a("<div/>",{"class":d.oClasses.sInfo,id:h?null:f+"_info"});h||(d.aoDrawCallback.push({fn:jb,sName:"information"}),l.attr("role","status").attr("aria-live","polite"),a(d.nTable).attr("aria-describedby",f+"_info"));return l[0]}function jb(d){var f=d.aanFeatures.i;if(0!==f.length){var h=
d.oLanguage,l=d._iDisplayStart+1,b=d.fnDisplayEnd(),p=d.fnRecordsTotal(),c=d.fnRecordsDisplay(),v=c?h.sInfo:h.sInfoEmpty;c!==p&&(v+=" "+h.sInfoFiltered);v+=h.sInfoPostFix;v=ib(d,v);h=h.fnInfoCallback;null!==h&&(v=h.call(d.oInstance,d,l,b,p,c,v));a(f).html(v)}}function ib(d,a){var f=d.fnFormatNumber,h=d._iDisplayStart+1,l=d._iDisplayLength,b=d.fnRecordsDisplay(),p=-1===l;return a.replace(/_START_/g,f.call(d,h)).replace(/_END_/g,f.call(d,d.fnDisplayEnd())).replace(/_MAX_/g,f.call(d,d.fnRecordsTotal())).replace(/_TOTAL_/g,
f.call(d,b)).replace(/_PAGE_/g,f.call(d,p?1:Math.ceil(h/l))).replace(/_PAGES_/g,f.call(d,p?1:Math.ceil(b/l)))}function La(d){var a,f,l=d.iInitDisplayStart,b=d.aoColumns,p;f=d.oFeatures;var c=d.bDeferLoading;if(d.bInitialised){ma(d);da(d);V(d,d.aoHeader);V(d,d.aoFooter);ua(d,!0);f.bAutoWidth&&hb(d);a=0;for(f=b.length;a<f;a++)p=b[a],p.sWidth&&(p.nTh.style.width=ba(p.sWidth));N(d,null,"preInit",[d]);ea(d);b=h(d);if("ssp"!=b||c)"ajax"==b?ya(d,[],function(f){var h=sa(d,f);for(a=0;a<h.length;a++)Q(d,h[a]);
d.iInitDisplayStart=l;ea(d);ua(d,!1);ta(d,f)},d):(ua(d,!1),ta(d))}else setTimeout(function(){La(d)},200)}function ta(d,a){d._bInitComplete=!0;(a||d.oInit.aaData)&&F(d);N(d,null,"plugin-init",[d,a]);N(d,"aoInitComplete","init",[d,a])}function Y(d,a){a=parseInt(a,10);d._iDisplayLength=a;H(d);N(d,null,"length",[d,a])}function Ya(d){for(var f=d.oClasses,h=d.sTableId,l=d.aLengthMenu,b=a.isArray(l[0]),p=b?l[0]:l,l=b?l[1]:l,b=a("<select/>",{name:h+"_length","aria-controls":h,"class":f.sLengthSelect}),c=
0,v=p.length;c<v;c++)b[0][c]=new Option("number"===typeof l[c]?d.fnFormatNumber(l[c]):l[c],p[c]);var u=a("<div><label/></div>").addClass(f.sLength);d.aanFeatures.l||(u[0].id=h+"_length");u.children().append(d.oLanguage.sLengthMenu.replace("_MENU_",b[0].outerHTML));a("select",u).val(d._iDisplayLength).on("change.DT",function(){Y(d,a(this).val());ra(d)});a(d.nTable).on("length.dt.DT",function(f,h,l){d===h&&a("select",u).val(l)});return u[0]}function ab(d){var f=d.sPaginationType,h=p.ext.pager[f],l=
"function"===typeof h,b=function(d){ra(d)},f=a("<div/>").addClass(d.oClasses.sPaging+f)[0],c=d.aanFeatures;l||h.fnInit(d,f,b);c.p||(f.id=d.sTableId+"_paginate",d.aoDrawCallback.push({fn:function(d){if(l){var a=d._iDisplayStart,f=d._iDisplayLength,y=d.fnRecordsDisplay(),p=-1===f,a=p?0:Math.ceil(a/f),f=p?1:Math.ceil(y/f),y=h(a,f),v,p=0;for(v=c.p.length;p<v;p++)X(d,"pageButton")(d,c.p[p],p,y,a,f)}else h.fnUpdate(d,b)},sName:"pagination"}));return f}function Ma(d,a,f){var h=d._iDisplayStart,l=d._iDisplayLength,
b=d.fnRecordsDisplay();0===b||-1===l?h=0:"number"===typeof a?(h=a*l,h>b&&(h=0)):"first"==a?h=0:"previous"==a?(h=0<=l?h-l:0,0>h&&(h=0)):"next"==a?h+l<b&&(h+=l):"last"==a?h=Math.floor((b-1)/l)*l:v(d,0,"Unknown paging action: "+a,5);a=d._iDisplayStart!==h;d._iDisplayStart=h;a&&(N(d,null,"page",[d]),f&&ra(d));return a}function Da(d){return a("<div/>",{id:d.aanFeatures.r?null:d.sTableId+"_processing","class":d.oClasses.sProcessing}).html(d.oLanguage.sProcessing).insertBefore(d.nTable)[0]}function ua(d,
f){d.oFeatures.bProcessing&&a(d.aanFeatures.r).css("display",f?"block":"none");N(d,null,"processing",[d,f])}function $a(d){var f=a(d.nTable);f.attr("role","grid");var h=d.oScroll;if(""===h.sX&&""===h.sY)return d.nTable;var l=h.sX,b=h.sY,p=d.oClasses,c=f.children("caption"),v=c.length?c[0]._captionSide:null,u=a(f[0].cloneNode(!1)),z=a(f[0].cloneNode(!1)),t=f.children("tfoot");t.length||(t=null);u=a("<div/>",{"class":p.sScrollWrapper}).append(a("<div/>",{"class":p.sScrollHead}).css({overflow:"hidden",
position:"relative",border:0,width:l?l?ba(l):null:"100%"}).append(a("<div/>",{"class":p.sScrollHeadInner}).css({"box-sizing":"content-box",width:h.sXInner||"100%"}).append(u.removeAttr("id").css("margin-left",0).append("top"===v?c:null).append(f.children("thead"))))).append(a("<div/>",{"class":p.sScrollBody}).css({position:"relative",overflow:"auto",width:l?ba(l):null}).append(f));t&&u.append(a("<div/>",{"class":p.sScrollFoot}).css({overflow:"hidden",border:0,width:l?l?ba(l):null:"100%"}).append(a("<div/>",
{"class":p.sScrollFootInner}).append(z.removeAttr("id").css("margin-left",0).append("bottom"===v?c:null).append(f.children("tfoot")))));var f=u.children(),E=f[0],p=f[1],m=t?f[2]:null;if(l)a(p).on("scroll.DT",function(){var d=this.scrollLeft;E.scrollLeft=d;t&&(m.scrollLeft=d)});a(p).css(b&&h.bCollapse?"max-height":"height",b);d.nScrollHead=E;d.nScrollBody=p;d.nScrollFoot=m;d.aoDrawCallback.push({fn:J,sName:"scrolling"});return u[0]}function J(d){var f=d.oScroll,h=f.sX,l=f.sXInner,b=f.sY,f=f.iBarWidth,
p=a(d.nScrollHead),c=p[0].style,u=p.children("div"),z=u[0].style,t=u.children("table"),u=d.nScrollBody,E=a(u),m=u.style,r=a(d.nScrollFoot).children("div"),P=r.children("table"),w=a(d.nTHead),C=a(d.nTable),N=C[0],U=N.style,e=d.nTFoot?a(d.nTFoot):null,ia=d.oBrowser,n=ia.bScrollOversize,Ga=Ua(d.aoColumns,"nTh"),k,O,H,K,X=[],fa=[],ga=[],q=[],Ha,ca=function(d){d=d.style;d.paddingTop="0";d.paddingBottom="0";d.borderTopWidth="0";d.borderBottomWidth="0";d.height=0};O=u.scrollHeight>u.clientHeight;d.scrollBarVis!==
O&&d.scrollBarVis!==g?(d.scrollBarVis=O,F(d)):(d.scrollBarVis=O,C.children("thead, tfoot").remove(),e&&(H=e.clone().prependTo(C),k=e.find("tr"),H=H.find("tr")),K=w.clone().prependTo(C),w=w.find("tr"),O=K.find("tr"),K.find("th, td").removeAttr("tabindex"),h||(m.width="100%",p[0].style.width="100%"),a.each(va(d,K),function(a,f){Ha=x(d,a);f.style.width=d.aoColumns[Ha].sWidth}),e&&Ka(function(d){d.style.width=""},H),p=C.outerWidth(),""===h?(U.width="100%",n&&(C.find("tbody").height()>u.offsetHeight||
"scroll"==E.css("overflow-y"))&&(U.width=ba(C.outerWidth()-f)),p=C.outerWidth()):""!==l&&(U.width=ba(l),p=C.outerWidth()),Ka(ca,O),Ka(function(d){ga.push(d.innerHTML);X.push(ba(a(d).css("width")))},O),Ka(function(d,f){-1!==a.inArray(d,Ga)&&(d.style.width=X[f])},w),a(O).height(0),e&&(Ka(ca,H),Ka(function(d){q.push(d.innerHTML);fa.push(ba(a(d).css("width")))},H),Ka(function(d,a){d.style.width=fa[a]},k),a(H).height(0)),Ka(function(d,a){d.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+
ga[a]+"</div>";d.style.width=X[a]},O),e&&Ka(function(d,a){d.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+q[a]+"</div>";d.style.width=fa[a]},H),C.outerWidth()<p?(k=u.scrollHeight>u.offsetHeight||"scroll"==E.css("overflow-y")?p+f:p,n&&(u.scrollHeight>u.offsetHeight||"scroll"==E.css("overflow-y"))&&(U.width=ba(k-f)),""!==h&&""===l||v(d,1,"Possible column misalignment",6)):k="100%",m.width=ba(k),c.width=ba(k),e&&(d.nScrollFoot.style.width=ba(k)),!b&&n&&(m.height=ba(N.offsetHeight+
f)),h=C.outerWidth(),t[0].style.width=ba(h),z.width=ba(h),l=C.height()>u.clientHeight||"scroll"==E.css("overflow-y"),b="padding"+(ia.bScrollbarLeft?"Left":"Right"),z[b]=l?f+"px":"0px",e&&(P[0].style.width=ba(h),r[0].style.width=ba(h),r[0].style[b]=l?f+"px":"0px"),C.children("colgroup").insertBefore(C.children("thead")),E.scroll(),!d.bSorted&&!d.bFiltered||d._drawHold||(u.scrollTop=0))}function Ka(d,a,f){for(var h=0,l=0,b=a.length,p,c;l<b;){p=a[l].firstChild;for(c=f?f[l].firstChild:null;p;)1===p.nodeType&&
(f?d(p,c,h):d(p,h),h++),p=p.nextSibling,c=f?c.nextSibling:null;l++}}function hb(d){var f=d.nTable,h=d.aoColumns,l=d.oScroll,b=l.sY,p=l.sX,c=l.sXInner,u=h.length,v=I(d,"bVisible"),z=a("th",d.nTHead),t=f.getAttribute("width"),E=f.parentNode,m=!1,r,g,w=d.oBrowser,l=w.bScrollOversize;(r=f.style.width)&&-1!==r.indexOf("%")&&(t=r);for(r=0;r<v.length;r++)g=h[v[r]],null!==g.sWidth&&(g.sWidth=fb(g.sWidthOrig,E),m=!0);if(l||!m&&!p&&!b&&u==D(d)&&u==z.length)for(r=0;r<u;r++)v=x(d,r),null!==v&&(h[v].sWidth=ba(z.eq(r).width()));
else{u=a(f).clone().css("visibility","hidden").removeAttr("id");u.find("tbody tr").remove();var P=a("<tr/>").appendTo(u.find("tbody"));u.find("thead, tfoot").remove();u.append(a(d.nTHead).clone()).append(a(d.nTFoot).clone());u.find("tfoot th, tfoot td").css("width","");z=va(d,u.find("thead")[0]);for(r=0;r<v.length;r++)g=h[v[r]],z[r].style.width=null!==g.sWidthOrig&&""!==g.sWidthOrig?ba(g.sWidthOrig):"",g.sWidthOrig&&p&&a(z[r]).append(a("<div/>").css({width:g.sWidthOrig,margin:0,padding:0,border:0,
height:1}));if(d.aoData.length)for(r=0;r<v.length;r++)m=v[r],g=h[m],a(ha(d,m)).clone(!1).append(g.sContentPadding).appendTo(P);a("[name]",u).removeAttr("name");g=a("<div/>").css(p||b?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(u).appendTo(E);p&&c?u.width(c):p?(u.css("width","auto"),u.removeAttr("width"),u.width()<E.clientWidth&&t&&u.width(E.clientWidth)):b?u.width(E.clientWidth):t&&u.width(t);for(r=b=0;r<v.length;r++)E=a(z[r]),c=E.outerWidth()-E.width(),E=w.bBounding?
Math.ceil(z[r].getBoundingClientRect().width):E.outerWidth(),b+=E,h[v[r]].sWidth=ba(E-c);f.style.width=ba(b);g.remove()}t&&(f.style.width=ba(t));!t&&!p||d._reszEvt||(f=function(){a(e).on("resize.DT-"+d.sInstance,tb(function(){F(d)}))},l?setTimeout(f,1E3):f(),d._reszEvt=!0)}function fb(d,f){if(!d)return 0;d=a("<div/>").css("width",ba(d)).appendTo(f||k.body);f=d[0].offsetWidth;d.remove();return f}function ha(d,f){var h=Z(d,f);if(0>h)return null;var l=d.aoData[h];return l.nTr?l.anCells[f]:a("<td/>").html(T(d,
h,f,"display"))[0]}function Z(d,a){for(var f,h=-1,l=-1,b=0,p=d.aoData.length;b<p;b++)f=T(d,b,a,"display")+"",f=f.replace(Mb,""),f=f.replace(/&nbsp;/g," "),f.length>h&&(h=f.length,l=b);return l}function ba(d){return null===d?"0px":"number"==typeof d?0>d?"0px":d+"px":d.match(/\d$/)?d+"px":d}function Pa(d){var f,h,l=[],b=d.aoColumns,c,u,v,z;f=d.aaSortingFixed;h=a.isPlainObject(f);var t=[];c=function(d){d.length&&!a.isArray(d[0])?t.push(d):a.merge(t,d)};a.isArray(f)&&c(f);h&&f.pre&&c(f.pre);c(d.aaSorting);
h&&f.post&&c(f.post);for(d=0;d<t.length;d++)for(z=t[d][0],c=b[z].aDataSort,f=0,h=c.length;f<h;f++)u=c[f],v=b[u].sType||"string",t[d]._idx===g&&(t[d]._idx=a.inArray(t[d][1],b[u].asSorting)),l.push({src:z,col:u,dir:t[d][1],index:t[d]._idx,type:v,formatter:p.ext.type.order[v+"-pre"]});return l}function Oa(d){var a,f,l=[],b=p.ext.type.order,c=d.aoData,u=0,v,z=d.aiDisplayMaster,t;A(d);t=Pa(d);a=0;for(f=t.length;a<f;a++)v=t[a],v.formatter&&u++,Ta(d,v.col);if("ssp"!=h(d)&&0!==t.length){a=0;for(f=z.length;a<
f;a++)l[z[a]]=a;u===t.length?z.sort(function(d,a){var f,h,b,p,y=t.length,u=c[d]._aSortData,v=c[a]._aSortData;for(b=0;b<y;b++)if(p=t[b],f=u[p.col],h=v[p.col],f=f<h?-1:f>h?1:0,0!==f)return"asc"===p.dir?f:-f;f=l[d];h=l[a];return f<h?-1:f>h?1:0}):z.sort(function(d,a){var f,h,p,y,u=t.length,v=c[d]._aSortData,z=c[a]._aSortData;for(p=0;p<u;p++)if(y=t[p],f=v[y.col],h=z[y.col],y=b[y.type+"-"+y.dir]||b["string-"+y.dir],f=y(f,h),0!==f)return f;f=l[d];h=l[a];return f<h?-1:f>h?1:0})}d.bSorted=!0}function Fa(d){var a,
f,h=d.aoColumns,l=Pa(d);d=d.oLanguage.oAria;for(var b=0,p=h.length;b<p;b++){f=h[b];var c=f.asSorting;a=f.sTitle.replace(/<.*?>/g,"");var u=f.nTh;u.removeAttribute("aria-sort");f.bSortable&&(0<l.length&&l[0].col==b?(u.setAttribute("aria-sort","asc"==l[0].dir?"ascending":"descending"),f=c[l[0].index+1]||c[0]):f=c[0],a+="asc"===f?d.sSortAscending:d.sSortDescending);u.setAttribute("aria-label",a)}}function Xa(d,f,h,l){var b=d.aaSorting,p=d.aoColumns[f].asSorting,c=function(d,f){var h=d._idx;h===g&&(h=
a.inArray(d[1],p));return h+1<p.length?h+1:f?null:0};"number"===typeof b[0]&&(b=d.aaSorting=[b]);h&&d.oFeatures.bSortMulti?(h=a.inArray(f,Ua(b,"0")),-1!==h?(f=c(b[h],!0),null===f&&1===b.length&&(f=0),null===f?b.splice(h,1):(b[h][1]=p[f],b[h]._idx=f)):(b.push([f,p[0],0]),b[b.length-1]._idx=0)):b.length&&b[0][0]==f?(f=c(b[0]),b.length=1,b[0][1]=p[f],b[0]._idx=f):(b.length=0,b.push([f,p[0]]),b[0]._idx=0);ea(d);"function"==typeof l&&l(d)}function Wa(d,a,f,l){var b=d.aoColumns[f];fa(a,{},function(a){!1!==
b.bSortable&&(d.oFeatures.bProcessing?(ua(d,!0),setTimeout(function(){Xa(d,f,a.shiftKey,l);"ssp"!==h(d)&&ua(d,!1)},0)):Xa(d,f,a.shiftKey,l))})}function Aa(d){var f=d.aLastSort,h=d.oClasses.sSortColumn,l=Pa(d),b=d.oFeatures,p,c;if(b.bSort&&b.bSortClasses){b=0;for(p=f.length;b<p;b++)c=f[b].src,a(Ua(d.aoData,"anCells",c)).removeClass(h+(2>b?b+1:3));b=0;for(p=l.length;b<p;b++)c=l[b].src,a(Ua(d.aoData,"anCells",c)).addClass(h+(2>b?b+1:3))}d.aLastSort=l}function Ta(d,a){var f=d.aoColumns[a],h=p.ext.order[f.sSortDataType],
l;h&&(l=h.call(d.oInstance,d,a,G(d,a)));for(var b,c=p.ext.type.order[f.sType+"-pre"],u=0,v=d.aoData.length;u<v;u++)if(f=d.aoData[u],f._aSortData||(f._aSortData=[]),!f._aSortData[a]||h)b=h?l[u]:T(d,u,a,"sort"),f._aSortData[a]=c?c(b):b}function Ba(d){if(d.oFeatures.bStateSave&&!d.bDestroying){var f={time:+new Date,start:d._iDisplayStart,length:d._iDisplayLength,order:a.extend(!0,[],d.aaSorting),search:Ra(d.oPreviousSearch),columns:a.map(d.aoColumns,function(a,f){return{visible:a.bVisible,search:Ra(d.aoPreSearchCols[f])}})};
N(d,"aoStateSaveParams","stateSaveParams",[d,f]);d.oSavedState=f;d.fnStateSaveCallback.call(d.oInstance,d,f)}}function f(d,f,h){var l,b,p=d.aoColumns;f=function(f){if(f&&f.time){var c=N(d,"aoStateLoadParams","stateLoadParams",[d,f]);if(-1===a.inArray(!1,c)&&(c=d.iStateDuration,!(0<c&&f.time<+new Date-1E3*c||f.columns&&p.length!==f.columns.length))){d.oLoadedState=a.extend(!0,{},f);f.start!==g&&(d._iDisplayStart=f.start,d.iInitDisplayStart=f.start);f.length!==g&&(d._iDisplayLength=f.length);f.order!==
g&&(d.aaSorting=[],a.each(f.order,function(a,f){d.aaSorting.push(f[0]>=p.length?[0,f[1]]:f)}));f.search!==g&&a.extend(d.oPreviousSearch,Sa(f.search));if(f.columns)for(l=0,b=f.columns.length;l<b;l++)c=f.columns[l],c.visible!==g&&(p[l].bVisible=c.visible),c.search!==g&&a.extend(d.aoPreSearchCols[l],Sa(c.search));N(d,"aoStateLoaded","stateLoaded",[d,f])}}h()};if(d.oFeatures.bStateSave){var c=d.fnStateLoadCallback.call(d.oInstance,d,f);c!==g&&f(c)}else h()}function t(d){var f=p.settings;d=a.inArray(d,
Ua(f,"nTable"));return-1!==d?f[d]:null}function v(d,a,f,h){f="DataTables warning: "+(d?"table id="+d.sTableId+" - ":"")+f;h&&(f+=". For more information about this error, please see http://datatables.net/tn/"+h);if(a)e.console&&console.log&&console.log(f);else if(a=p.ext,a=a.sErrMode||a.errMode,d&&N(d,null,"error",[d,h,f]),"alert"==a)alert(f);else{if("throw"==a)throw Error(f);"function"==typeof a&&a(d,h,f)}}function ia(d,f,h,l){a.isArray(h)?a.each(h,function(h,l){a.isArray(l)?ia(d,f,l[0],l[1]):ia(d,
f,l)}):(l===g&&(l=h),f[h]!==g&&(d[l]=f[h]))}function ca(d,f,h){var l,b;for(b in f)f.hasOwnProperty(b)&&(l=f[b],a.isPlainObject(l)?(a.isPlainObject(d[b])||(d[b]={}),a.extend(!0,d[b],l)):d[b]=h&&"data"!==b&&"aaData"!==b&&a.isArray(l)?l.slice():l);return d}function fa(d,f,h){a(d).on("click.DT",f,function(a){d.blur();h(a)}).on("keypress.DT",f,function(d){13===d.which&&(d.preventDefault(),h(d))}).on("selectstart.DT",function(){return!1})}function ga(d,a,f,h){f&&d[a].push({fn:f,sName:h})}function N(d,f,
h,l){var b=[];f&&(b=a.map(d[f].slice().reverse(),function(a){return a.fn.apply(d.oInstance,l)}));null!==h&&(f=a.Event(h+".dt"),a(d.nTable).trigger(f,l),b.push(f.result));return b}function H(d){var a=d._iDisplayStart,f=d.fnDisplayEnd(),h=d._iDisplayLength;a>=f&&(a=f-h);a-=a%h;if(-1===h||0>a)a=0;d._iDisplayStart=a}function X(d,f){d=d.renderer;var h=p.ext.renderer[f];return a.isPlainObject(d)&&d[f]?h[d[f]]||h._:"string"===typeof d?h[d]||h._:h._}function h(d){return d.oFeatures.bServerSide?"ssp":d.ajax||
d.sAjaxSource?"ajax":"dom"}function l(d,a){var f;f=Bb.numbers_length;var h=Math.floor(f/2);a<=f?f=Ga(0,a):d<=h?(f=Ga(0,f-2),f.push("ellipsis"),f.push(a-1)):(d>=a-1-h?f=Ga(a-(f-2),a):(f=Ga(d-h+2,d+h-1),f.push("ellipsis"),f.push(a-1)),f.splice(0,0,"ellipsis"),f.splice(0,0,0));f.DT_el="span";return f}function u(d){a.each({num:function(a){return qb(a,d)},"num-fmt":function(a){return qb(a,d,vb)},"html-num":function(a){return qb(a,d,rb)},"html-num-fmt":function(a){return qb(a,d,rb,vb)}},function(a,f){E.type.order[a+
d+"-pre"]=f;a.match(/^html\-/)&&(E.type.search[a+d]=E.type.search.html)})}function z(d){return function(){var a=[t(this[p.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return p.ext.internal[d].apply(this,a)}}var p=function(d){this.$=function(d,a){return this.api(!0).$(d,a)};this._=function(d,a){return this.api(!0).rows(d,a).data()};this.api=function(d){return d?new P(t(this[E.iApiIndex])):new P(this)};this.fnAddData=function(d,f){var h=this.api(!0);d=a.isArray(d)&&(a.isArray(d[0])||
a.isPlainObject(d[0]))?h.rows.add(d):h.row.add(d);(f===g||f)&&h.draw();return d.flatten().toArray()};this.fnAdjustColumnSizing=function(d){var a=this.api(!0).columns.adjust(),f=a.settings()[0],h=f.oScroll;d===g||d?a.draw(!1):(""!==h.sX||""!==h.sY)&&J(f)};this.fnClearTable=function(d){var a=this.api(!0).clear();(d===g||d)&&a.draw()};this.fnClose=function(d){this.api(!0).row(d).child.hide()};this.fnDeleteRow=function(d,a,f){var h=this.api(!0);d=h.rows(d);var l=d.settings()[0],b=l.aoData[d[0][0]];d.remove();
a&&a.call(this,l,b);(f===g||f)&&h.draw();return b};this.fnDestroy=function(d){this.api(!0).destroy(d)};this.fnDraw=function(d){this.api(!0).draw(d)};this.fnFilter=function(d,a,f,h,l,b){l=this.api(!0);null===a||a===g?l.search(d,f,h,b):l.column(a).search(d,f,h,b);l.draw()};this.fnGetData=function(d,a){var f=this.api(!0);if(d!==g){var h=d.nodeName?d.nodeName.toLowerCase():"";return a!==g||"td"==h||"th"==h?f.cell(d,a).data():f.row(d).data()||null}return f.data().toArray()};this.fnGetNodes=function(d){var a=
this.api(!0);return d!==g?a.row(d).node():a.rows().nodes().flatten().toArray()};this.fnGetPosition=function(d){var a=this.api(!0),f=d.nodeName.toUpperCase();return"TR"==f?a.row(d).index():"TD"==f||"TH"==f?(d=a.cell(d).index(),[d.row,d.columnVisible,d.column]):null};this.fnIsOpen=function(d){return this.api(!0).row(d).child.isShown()};this.fnOpen=function(d,a,f){return this.api(!0).row(d).child(a,f).show().child()[0]};this.fnPageChange=function(d,a){d=this.api(!0).page(d);(a===g||a)&&d.draw(!1)};this.fnSetColumnVis=
function(d,a,f){d=this.api(!0).column(d).visible(a);(f===g||f)&&d.columns.adjust().draw()};this.fnSettings=function(){return t(this[E.iApiIndex])};this.fnSort=function(d){this.api(!0).order(d).draw()};this.fnSortListener=function(d,a,f){this.api(!0).order.listener(d,a,f)};this.fnUpdate=function(d,a,f,h,l){var b=this.api(!0);f===g||null===f?b.row(a).data(d):b.cell(a,f).data(d);(l===g||l)&&b.columns.adjust();(h===g||h)&&b.draw();return 0};this.fnVersionCheck=E.fnVersionCheck;var l=this,u=d===g,C=this.length;
u&&(d={});this.oApi=this.internal=E.internal;for(var U in p.ext.internal)U&&(this[U]=z(U));this.each(function(){var z={},t=1<C?ca(z,d,!0):d,E=0,P,z=this.getAttribute("id"),U=!1,e=p.defaults,n=a(this);if("table"!=this.nodeName.toLowerCase())v(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{b(e);m(e.column);q(e,e,!0);q(e.column,e.column,!0);q(e,a.extend(t,n.data()));var k=p.settings,E=0;for(P=k.length;E<P;E++){var Ga=k[E];if(Ga.nTable==this||Ga.nTHead.parentNode==this||Ga.nTFoot&&
Ga.nTFoot.parentNode==this){var O=t.bRetrieve!==g?t.bRetrieve:e.bRetrieve;if(u||O)return Ga.oInstance;if(t.bDestroy!==g?t.bDestroy:e.bDestroy){Ga.oInstance.fnDestroy();break}else{v(Ga,0,"Cannot reinitialise DataTable",3);return}}if(Ga.sTableId==this.id){k.splice(E,1);break}}if(null===z||""===z)this.id=z="DataTables_Table_"+p.ext._unique++;var H=a.extend(!0,{},p.models.oSettings,{sDestroyWidth:n[0].style.width,sInstance:z,sTableId:z});H.nTable=this;H.oApi=l.internal;H.oInit=t;k.push(H);H.oInstance=
1===l.length?l:n.dataTable();b(t);t.oLanguage&&c(t.oLanguage);t.aLengthMenu&&!t.iDisplayLength&&(t.iDisplayLength=a.isArray(t.aLengthMenu[0])?t.aLengthMenu[0][0]:t.aLengthMenu[0]);t=ca(a.extend(!0,{},e),t);ia(H.oFeatures,t,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));ia(H,t,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource",
"sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]);ia(H.oScroll,t,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);ia(H.oLanguage,t,"fnInfoCallback");ga(H,"aoDrawCallback",t.fnDrawCallback,"user");ga(H,"aoServerParams",
t.fnServerParams,"user");ga(H,"aoStateSaveParams",t.fnStateSaveParams,"user");ga(H,"aoStateLoadParams",t.fnStateLoadParams,"user");ga(H,"aoStateLoaded",t.fnStateLoaded,"user");ga(H,"aoRowCallback",t.fnRowCallback,"user");ga(H,"aoRowCreatedCallback",t.fnCreatedRow,"user");ga(H,"aoHeaderCallback",t.fnHeaderCallback,"user");ga(H,"aoFooterCallback",t.fnFooterCallback,"user");ga(H,"aoInitComplete",t.fnInitComplete,"user");ga(H,"aoPreDrawCallback",t.fnPreDrawCallback,"user");H.rowIdFn=W(t.rowId);r(H);var X=
H.oClasses;a.extend(X,p.ext.classes,t.oClasses);n.addClass(X.sTable);H.iInitDisplayStart===g&&(H.iInitDisplayStart=t.iDisplayStart,H._iDisplayStart=t.iDisplayStart);null!==t.iDeferLoading&&(H.bDeferLoading=!0,z=a.isArray(t.iDeferLoading),H._iRecordsDisplay=z?t.iDeferLoading[0]:t.iDeferLoading,H._iRecordsTotal=z?t.iDeferLoading[1]:t.iDeferLoading);var fa=H.oLanguage;a.extend(!0,fa,t.oLanguage);fa.sUrl&&(a.ajax({dataType:"json",url:fa.sUrl,success:function(d){c(d);q(e.oLanguage,d);a.extend(!0,fa,d);
La(H)},error:function(){La(H)}}),U=!0);null===t.asStripeClasses&&(H.asStripeClasses=[X.sStripeOdd,X.sStripeEven]);var z=H.asStripeClasses,F=n.children("tbody").find("tr").eq(0);-1!==a.inArray(!0,a.map(z,function(d){return F.hasClass(d)}))&&(a("tbody tr",this).removeClass(z.join(" ")),H.asDestroyStripes=z.slice());z=[];k=this.getElementsByTagName("thead");0!==k.length&&(qa(H.aoHeader,k[0]),z=va(H));if(null===t.aoColumns)for(k=[],E=0,P=z.length;E<P;E++)k.push(null);else k=t.aoColumns;E=0;for(P=k.length;E<
P;E++)w(H,z?z[E]:null);B(H,t.aoColumnDefs,k,function(d,a){K(H,d,a)});if(F.length){var Ha=function(d,a){return null!==d.getAttribute("data-"+a)?a:null};a(F[0]).children("th, td").each(function(d,a){var f=H.aoColumns[d];if(f.mData===d){var h=Ha(a,"sort")||Ha(a,"order");a=Ha(a,"filter")||Ha(a,"search");if(null!==h||null!==a)f.mData={_:d+".display",sort:null!==h?d+".@data-"+h:g,type:null!==h?d+".@data-"+h:g,filter:null!==a?d+".@data-"+a:g},K(H,d)}})}var x=H.oFeatures,z=function(){if(t.aaSorting===g){var d=
H.aaSorting;E=0;for(P=d.length;E<P;E++)d[E][1]=H.aoColumns[E].asSorting[0]}Aa(H);x.bSort&&ga(H,"aoDrawCallback",function(){if(H.bSorted){var d=Pa(H),f={};a.each(d,function(d,a){f[a.src]=a.dir});N(H,null,"order",[H,d,f]);Fa(H)}});ga(H,"aoDrawCallback",function(){(H.bSorted||"ssp"===h(H)||x.bDeferRender)&&Aa(H)},"sc");var d=n.children("caption").each(function(){this._captionSide=a(this).css("caption-side")}),f=n.children("thead");0===f.length&&(f=a("<thead/>").appendTo(n));H.nTHead=f[0];f=n.children("tbody");
0===f.length&&(f=a("<tbody/>").appendTo(n));H.nTBody=f[0];f=n.children("tfoot");0===f.length&&0<d.length&&(""!==H.oScroll.sX||""!==H.oScroll.sY)&&(f=a("<tfoot/>").appendTo(n));0===f.length||0===f.children().length?n.addClass(X.sNoFooter):0<f.length&&(H.nTFoot=f[0],qa(H.aoFooter,H.nTFoot));if(t.aaData)for(E=0;E<t.aaData.length;E++)Q(H,t.aaData[E]);else(H.bDeferLoading||"dom"==h(H))&&M(H,a(H.nTBody).children("tr"));H.aiDisplay=H.aiDisplayMaster.slice();H.bInitialised=!0;!1===U&&La(H)};t.bStateSave?
(x.bStateSave=!0,ga(H,"aoDrawCallback",Ba,"state_save"),f(H,t,z)):z()}});l=null;return this},E,P,O,U,Ha={},Cb=/[\r\n]/g,rb=/<.*?>/g,gb=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,Nb=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\|\$|\^|\-)/g,vb=/[',$\u00a3\u20ac\u00a5%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,xa=function(d){return d&&!0!==d&&"-"!==d?!1:!0},Db=function(d){var a=parseInt(d,10);return!isNaN(a)&&isFinite(d)?a:null},cb=function(d,a){Ha[a]||(Ha[a]=RegExp(ub(a),
"g"));return"string"===typeof d&&"."!==a?d.replace(/\./g,"").replace(Ha[a],"."):d},wb=function(d,a,f){var h="string"===typeof d;if(xa(d))return!0;a&&h&&(d=cb(d,a));f&&h&&(d=d.replace(vb,""));return!isNaN(parseFloat(d))&&isFinite(d)},Eb=function(d,a,f){return xa(d)?!0:xa(d)||"string"===typeof d?wb(d.replace(rb,""),a,f)?!0:null:null},Ua=function(d,a,f){var h=[],l=0,b=d.length;if(f!==g)for(;l<b;l++)d[l]&&d[l][a]&&h.push(d[l][a][f]);else for(;l<b;l++)d[l]&&h.push(d[l][a]);return h},nb=function(d,a,f,
h){var l=[],b=0,p=a.length;if(h!==g)for(;b<p;b++)d[a[b]][f]&&l.push(d[a[b]][f][h]);else for(;b<p;b++)l.push(d[a[b]][f]);return l},Ga=function(d,a){var f=[],h;a===g?(a=0,h=d):(h=a,a=d);for(d=a;d<h;d++)f.push(d);return f},Fb=function(d){for(var a=[],f=0,h=d.length;f<h;f++)d[f]&&a.push(d[f]);return a},ob=function(d){var a;a:{if(!(2>d.length)){a=d.slice().sort();for(var f=a[0],h=1,l=a.length;h<l;h++){if(a[h]===f){a=!1;break a}f=a[h]}}a=!0}if(a)return d.slice();a=[];var l=d.length,b,p=0,h=0;a:for(;h<l;h++){f=
d[h];for(b=0;b<p;b++)if(a[b]===f)continue a;a.push(f);p++}return a};p.util={throttle:function(d,a){var f=a!==g?a:200,h,l;return function(){var a=this,b=+new Date,p=arguments;h&&b<h+f?(clearTimeout(l),l=setTimeout(function(){h=g;d.apply(a,p)},f)):(h=b,d.apply(a,p))}},escapeRegex:function(d){return d.replace(Nb,"\\$1")}};var Na=function(d,a,f){d[a]!==g&&(d[f]=d[a])},mb=/\[.*?\]$/,kb=/\(\)$/,ub=p.util.escapeRegex,pb=a("<div>")[0],Lb=pb.textContent!==g,Mb=/<.*?>/g,tb=p.util.throttle,Gb=[],Ca=Array.prototype,
Ob=function(d){var f,h,l=p.settings,b=a.map(l,function(d){return d.nTable});if(d){if(d.nTable&&d.oApi)return[d];if(d.nodeName&&"table"===d.nodeName.toLowerCase())return f=a.inArray(d,b),-1!==f?[l[f]]:null;if(d&&"function"===typeof d.settings)return d.settings().toArray();"string"===typeof d?h=a(d):d instanceof a&&(h=d)}else return[];if(h)return h.map(function(){f=a.inArray(this,b);return-1!==f?l[f]:null}).toArray()};P=function(d,f){if(!(this instanceof P))return new P(d,f);var h=[],l=function(d){(d=
Ob(d))&&(h=h.concat(d))};if(a.isArray(d))for(var b=0,p=d.length;b<p;b++)l(d[b]);else l(d);this.context=ob(h);f&&a.merge(this,f);this.selector={rows:null,cols:null,opts:null};P.extend(this,this,Gb)};p.Api=P;a.extend(P.prototype,{any:function(){return 0!==this.count()},concat:Ca.concat,context:[],count:function(){return this.flatten().length},each:function(d){for(var a=0,f=this.length;a<f;a++)d.call(this,this[a],a,this);return this},eq:function(d){var a=this.context;return a.length>d?new P(a[d],this[d]):
null},filter:function(d){var a=[];if(Ca.filter)a=Ca.filter.call(this,d,this);else for(var f=0,h=this.length;f<h;f++)d.call(this,this[f],f,this)&&a.push(this[f]);return new P(this.context,a)},flatten:function(){var d=[];return new P(this.context,d.concat.apply(d,this.toArray()))},join:Ca.join,indexOf:Ca.indexOf||function(d,a){a=a||0;for(var f=this.length;a<f;a++)if(this[a]===d)return a;return-1},iterator:function(d,a,f,h){var l=[],b,p,c,u,v,t=this.context,z,E,m=this.selector;"string"===typeof d&&(h=
f,f=a,a=d,d=!1);p=0;for(c=t.length;p<c;p++){var r=new P(t[p]);if("table"===a)b=f.call(r,t[p],p),b!==g&&l.push(b);else if("columns"===a||"rows"===a)b=f.call(r,t[p],this[p],p),b!==g&&l.push(b);else if("column"===a||"column-rows"===a||"row"===a||"cell"===a)for(E=this[p],"column-rows"===a&&(z=sb(t[p],m.opts)),u=0,v=E.length;u<v;u++)b=E[u],b="cell"===a?f.call(r,t[p],b.row,b.column,p,u):f.call(r,t[p],b,p,u,z),b!==g&&l.push(b)}return l.length||h?(d=new P(t,d?l.concat.apply([],l):l),a=d.selector,a.rows=m.rows,
a.cols=m.cols,a.opts=m.opts,d):this},lastIndexOf:Ca.lastIndexOf||function(d,a){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(d){var a=[];if(Ca.map)a=Ca.map.call(this,d,this);else for(var f=0,h=this.length;f<h;f++)a.push(d.call(this,this[f],f));return new P(this.context,a)},pluck:function(d){return this.map(function(a){return a[d]})},pop:Ca.pop,push:Ca.push,reduce:Ca.reduce||function(d,a){return C(this,d,a,0,this.length,1)},reduceRight:Ca.reduceRight||function(d,
a){return C(this,d,a,this.length-1,-1,-1)},reverse:Ca.reverse,selector:null,shift:Ca.shift,slice:function(){return new P(this.context,this)},sort:Ca.sort,splice:Ca.splice,toArray:function(){return Ca.slice.call(this)},to$:function(){return a(this)},toJQuery:function(){return a(this)},unique:function(){return new P(this.context,ob(this))},unshift:Ca.unshift});P.extend=function(d,f,h){if(h.length&&f&&(f instanceof P||f.__dt_wrapper)){var l,b,p,c=function(d,a,f){return function(){var h=a.apply(d,arguments);
P.extend(h,h,f.methodExt);return h}};l=0;for(b=h.length;l<b;l++)p=h[l],f[p.name]="function"===typeof p.val?c(d,p.val,p):a.isPlainObject(p.val)?{}:p.val,f[p.name].__dt_wrapper=!0,P.extend(d,f[p.name],p.propExt)}};P.register=O=function(d,f){if(a.isArray(d))for(var h=0,l=d.length;h<l;h++)P.register(d[h],f);else{d=d.split(".");for(var b=Gb,p,c,h=0,l=d.length;h<l;h++){p=(c=-1!==d[h].indexOf("()"))?d[h].replace("()",""):d[h];var u;a:{u=0;for(var v=b.length;u<v;u++)if(b[u].name===p){u=b[u];break a}u=null}u||
(u={name:p,val:{},methodExt:[],propExt:[]},b.push(u));h===l-1?u.val=f:b=c?u.methodExt:u.propExt}}};P.registerPlural=U=function(d,f,h){P.register(d,h);P.register(f,function(){var d=h.apply(this,arguments);return d===this?this:d instanceof P?d.length?a.isArray(d[0])?new P(d.context,d[0]):d[0]:g:d})};O("tables()",function(d){var f;if(d){f=P;var h=this.context;if("number"===typeof d)d=[h[d]];else{var l=a.map(h,function(d){return d.nTable});d=a(l).filter(d).map(function(){var d=a.inArray(this,l);return h[d]}).toArray()}f=
new f(d)}else f=this;return f});O("table()",function(d){d=this.tables(d);var a=d.context;return a.length?new P(a[0]):d});U("tables().nodes()","table().node()",function(){return this.iterator("table",function(d){return d.nTable},1)});U("tables().body()","table().body()",function(){return this.iterator("table",function(d){return d.nTBody},1)});U("tables().header()","table().header()",function(){return this.iterator("table",function(d){return d.nTHead},1)});U("tables().footer()","table().footer()",function(){return this.iterator("table",
function(d){return d.nTFoot},1)});U("tables().containers()","table().container()",function(){return this.iterator("table",function(d){return d.nTableWrapper},1)});O("draw()",function(d){return this.iterator("table",function(a){"page"===d?ra(a):("string"===typeof d&&(d="full-hold"===d?!1:!0),ea(a,!1===d))})});O("page()",function(d){return d===g?this.page.info().page:this.iterator("table",function(a){Ma(a,d)})});O("page.info()",function(){if(0===this.context.length)return g;var d=this.context[0],a=
d._iDisplayStart,f=d.oFeatures.bPaginate?d._iDisplayLength:-1,l=d.fnRecordsDisplay(),b=-1===f;return{page:b?0:Math.floor(a/f),pages:b?1:Math.ceil(l/f),start:a,end:d.fnDisplayEnd(),length:f,recordsTotal:d.fnRecordsTotal(),recordsDisplay:l,serverSide:"ssp"===h(d)}});O("page.len()",function(d){return d===g?0!==this.context.length?this.context[0]._iDisplayLength:g:this.iterator("table",function(a){Y(a,d)})});var Hb=function(d,a,f){if(f){var l=new P(d);l.one("draw",function(){f(l.ajax.json())})}if("ssp"==
h(d))ea(d,a);else{ua(d,!0);var b=d.jqXHR;b&&4!==b.readyState&&b.abort();ya(d,[],function(f){S(d);f=sa(d,f);for(var h=0,l=f.length;h<l;h++)Q(d,f[h]);ea(d,a);ua(d,!1)})}};O("ajax.json()",function(){var d=this.context;if(0<d.length)return d[0].json});O("ajax.params()",function(){var d=this.context;if(0<d.length)return d[0].oAjaxData});O("ajax.reload()",function(d,a){return this.iterator("table",function(f){Hb(f,!1===a,d)})});O("ajax.url()",function(d){var f=this.context;if(d===g){if(0===f.length)return g;
f=f[0];return f.ajax?a.isPlainObject(f.ajax)?f.ajax.url:f.ajax:f.sAjaxSource}return this.iterator("table",function(f){a.isPlainObject(f.ajax)?f.ajax.url=d:f.ajax=d})});O("ajax.url().load()",function(d,a){return this.iterator("table",function(f){Hb(f,!1===a,d)})});var xb=function(d,f,h,l,b){var p=[],c,u,v,t,z,m;v=typeof f;f&&"string"!==v&&"function"!==v&&f.length!==g||(f=[f]);v=0;for(t=f.length;v<t;v++)for(u=f[v]&&f[v].split&&!f[v].match(/[\[\(:]/)?f[v].split(","):[f[v]],z=0,m=u.length;z<m;z++)(c=
h("string"===typeof u[z]?a.trim(u[z]):u[z]))&&c.length&&(p=p.concat(c));d=E.selector[d];if(d.length)for(v=0,t=d.length;v<t;v++)p=d[v](l,b,p);return ob(p)},yb=function(d){d||(d={});d.filter&&d.search===g&&(d.search=d.filter);return a.extend({search:"none",order:"current",page:"all"},d)},zb=function(d){for(var a=0,f=d.length;a<f;a++)if(0<d[a].length)return d[0]=d[a],d[0].length=1,d.length=1,d.context=[d.context[a]],d;d.length=0;return d},sb=function(d,f){var l,b,p=[],c=d.aiDisplay;l=d.aiDisplayMaster;
var u=f.search;b=f.order;f=f.page;if("ssp"==h(d))return"removed"===u?[]:Ga(0,l.length);if("current"==f)for(l=d._iDisplayStart,b=d.fnDisplayEnd();l<b;l++)p.push(c[l]);else if("current"==b||"applied"==b)p="none"==u?l.slice():"applied"==u?c.slice():a.map(l,function(d){return-1===a.inArray(d,c)?d:null});else if("index"==b||"original"==b)for(l=0,b=d.aoData.length;l<b;l++)"none"==u?p.push(l):(f=a.inArray(l,c),(-1===f&&"removed"==u||0<=f&&"applied"==u)&&p.push(l));return p};O("rows()",function(d,f){d===
g?d="":a.isPlainObject(d)&&(f=d,d="");f=yb(f);var h=this.iterator("table",function(h){var l=f,b;return xb("row",d,function(d){var f=Db(d);if(null!==f&&!l)return[f];b||(b=sb(h,l));if(null!==f&&-1!==a.inArray(f,b))return[f];if(null===d||d===g||""===d)return b;if("function"===typeof d)return a.map(b,function(a){var f=h.aoData[a];return d(a,f._aData,f.nTr)?a:null});f=Fb(nb(h.aoData,b,"nTr"));if(d.nodeName){if(d._DT_RowIndex!==g)return[d._DT_RowIndex];if(d._DT_CellIndex)return[d._DT_CellIndex.row];f=a(d).closest("*[data-dt-row]");
return f.length?[f.data("dt-row")]:[]}if("string"===typeof d&&"#"===d.charAt(0)){var p=h.aIds[d.replace(/^#/,"")];if(p!==g)return[p.idx]}return a(f).filter(d).map(function(){return this._DT_RowIndex}).toArray()},h,l)},1);h.selector.rows=d;h.selector.opts=f;return h});O("rows().nodes()",function(){return this.iterator("row",function(d,a){return d.aoData[a].nTr||g},1)});O("rows().data()",function(){return this.iterator(!0,"rows",function(d,a){return nb(d.aoData,a,"_aData")},1)});U("rows().cache()",
"row().cache()",function(d){return this.iterator("row",function(a,f){a=a.aoData[f];return"search"===d?a._aFilterData:a._aSortData},1)});U("rows().invalidate()","row().invalidate()",function(d){return this.iterator("row",function(a,f){pa(a,f,d)})});U("rows().indexes()","row().index()",function(){return this.iterator("row",function(d,a){return a},1)});U("rows().ids()","row().id()",function(d){for(var a=[],f=this.context,h=0,l=f.length;h<l;h++)for(var b=0,p=this[h].length;b<p;b++){var c=f[h].rowIdFn(f[h].aoData[this[h][b]]._aData);
a.push((!0===d?"#":"")+c)}return new P(f,a)});U("rows().remove()","row().remove()",function(){var d=this;this.iterator("row",function(a,f,h){var l=a.aoData,b=l[f],p,c,u,v,t;l.splice(f,1);p=0;for(c=l.length;p<c;p++)if(u=l[p],t=u.anCells,null!==u.nTr&&(u.nTr._DT_RowIndex=p),null!==t)for(u=0,v=t.length;u<v;u++)t[u]._DT_CellIndex.row=p;la(a.aiDisplayMaster,f);la(a.aiDisplay,f);la(d[h],f,!1);0<a._iRecordsDisplay&&a._iRecordsDisplay--;H(a);f=a.rowIdFn(b._aData);f!==g&&delete a.aIds[f]});this.iterator("table",
function(d){for(var a=0,f=d.aoData.length;a<f;a++)d.aoData[a].idx=a});return this});O("rows.add()",function(d){var f=this.iterator("table",function(a){var f,h,l,b=[];h=0;for(l=d.length;h<l;h++)f=d[h],f.nodeName&&"TR"===f.nodeName.toUpperCase()?b.push(M(a,f)[0]):b.push(Q(a,f));return b},1),h=this.rows(-1);h.pop();a.merge(h,f);return h});O("row()",function(d,a){return zb(this.rows(d,a))});O("row().data()",function(d){var a=this.context;if(d===g)return a.length&&this.length?a[0].aoData[this[0]]._aData:
g;a[0].aoData[this[0]]._aData=d;pa(a[0],this[0],"data");return this});O("row().node()",function(){var d=this.context;return d.length&&this.length?d[0].aoData[this[0]].nTr||null:null});O("row.add()",function(d){d instanceof a&&d.length&&(d=d[0]);var f=this.iterator("table",function(a){return d.nodeName&&"TR"===d.nodeName.toUpperCase()?M(a,d)[0]:Q(a,d)});return this.row(f[0])});var Ab=function(d,a){var f=d.context;f.length&&(f=f[0].aoData[a!==g?a:d[0]])&&f._details&&(f._details.remove(),f._detailsShow=
g,f._details=g)},Ib=function(d,a){var f=d.context;if(f.length&&d.length&&(d=f[0].aoData[d[0]],d._details)){(d._detailsShow=a)?d._details.insertAfter(d.nTr):d._details.detach();var h=f[0],l=new P(h),b=h.aoData;l.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<Ua(b,"_details").length&&(l.on("draw.dt.DT_details",function(d,a){h===a&&l.rows({page:"current"}).eq(0).each(function(d){d=b[d];d._detailsShow&&d._details.insertAfter(d.nTr)})}),l.on("column-visibility.dt.DT_details",
function(d,a){if(h===a){a=D(a);for(var f=0,l=b.length;f<l;f++)d=b[f],d._details&&d._details.children("td[colspan]").attr("colspan",a)}}),l.on("destroy.dt.DT_details",function(d,a){if(h===a)for(d=0,a=b.length;d<a;d++)b[d]._details&&Ab(l,d)}))}};O("row().child()",function(d,f){var h=this.context;if(d===g)return h.length&&this.length?h[0].aoData[this[0]]._details:g;if(!0===d)this.child.show();else if(!1===d)Ab(this);else if(h.length&&this.length){var l=h[0],h=h[0].aoData[this[0]],b=[],p=function(d,f){if(a.isArray(d)||
d instanceof a)for(var h=0,c=d.length;h<c;h++)p(d[h],f);else d.nodeName&&"tr"===d.nodeName.toLowerCase()?b.push(d):(h=a("<tr><td/></tr>").addClass(f),a("td",h).addClass(f).html(d)[0].colSpan=D(l),b.push(h[0]))};p(d,f);h._details&&h._details.detach();h._details=a(b);h._detailsShow&&h._details.insertAfter(h.nTr)}return this});O(["row().child.show()","row().child().show()"],function(){Ib(this,!0);return this});O(["row().child.hide()","row().child().hide()"],function(){Ib(this,!1);return this});O(["row().child.remove()",
"row().child().remove()"],function(){Ab(this);return this});O("row().child.isShown()",function(){var d=this.context;return d.length&&this.length?d[0].aoData[this[0]]._detailsShow||!1:!1});var Pb=/^([^:]+):(name|visIdx|visible)$/,Jb=function(d,a,f,h,l){f=[];h=0;for(var b=l.length;h<b;h++)f.push(T(d,l[h],a));return f};O("columns()",function(d,f){d===g?d="":a.isPlainObject(d)&&(f=d,d="");f=yb(f);var h=this.iterator("table",function(h){var l=d,b=f,p=h.aoColumns,c=Ua(p,"sName"),u=Ua(p,"nTh");return xb("column",
l,function(d){var f=Db(d);if(""===d)return Ga(p.length);if(null!==f)return[0<=f?f:p.length+f];if("function"===typeof d){var l=sb(h,b);return a.map(p,function(a,f){return d(f,Jb(h,f,0,0,l),u[f])?f:null})}var v="string"===typeof d?d.match(Pb):"";if(v)switch(v[2]){case "visIdx":case "visible":f=parseInt(v[1],10);if(0>f){var t=a.map(p,function(d,a){return d.bVisible?a:null});return[t[t.length+f]]}return[x(h,f)];case "name":return a.map(c,function(d,a){return d===v[1]?a:null});default:return[]}if(d.nodeName&&
d._DT_CellIndex)return[d._DT_CellIndex.column];f=a(u).filter(d).map(function(){return a.inArray(this,u)}).toArray();if(f.length||!d.nodeName)return f;f=a(d).closest("*[data-dt-column]");return f.length?[f.data("dt-column")]:[]},h,b)},1);h.selector.cols=d;h.selector.opts=f;return h});U("columns().header()","column().header()",function(){return this.iterator("column",function(d,a){return d.aoColumns[a].nTh},1)});U("columns().footer()","column().footer()",function(){return this.iterator("column",function(d,
a){return d.aoColumns[a].nTf},1)});U("columns().data()","column().data()",function(){return this.iterator("column-rows",Jb,1)});U("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(d,a){return d.aoColumns[a].mData},1)});U("columns().cache()","column().cache()",function(d){return this.iterator("column-rows",function(a,f,h,l,b){return nb(a.aoData,b,"search"===d?"_aFilterData":"_aSortData",f)},1)});U("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",
function(d,a,f,h,l){return nb(d.aoData,l,"anCells",a)},1)});U("columns().visible()","column().visible()",function(d,f){var h=this.iterator("column",function(f,h){if(d===g)return f.aoColumns[h].bVisible;var l=f.aoColumns,b=l[h],p=f.aoData,c,u,v;if(d!==g&&b.bVisible!==d){if(d){var t=a.inArray(!0,Ua(l,"bVisible"),h+1);c=0;for(u=p.length;c<u;c++)v=p[c].nTr,l=p[c].anCells,v&&v.insertBefore(l[h],l[t]||null)}else a(Ua(f.aoData,"anCells",h)).detach();b.bVisible=d;V(f,f.aoHeader);V(f,f.aoFooter);Ba(f)}});
d!==g&&(this.iterator("column",function(a,h){N(a,null,"column-visibility",[a,h,d,f])}),(f===g||f)&&this.columns.adjust());return h});U("columns().indexes()","column().index()",function(d){return this.iterator("column",function(a,f){return"visible"===d?G(a,f):f},1)});O("columns.adjust()",function(){return this.iterator("table",function(d){F(d)},1)});O("column.index()",function(d,a){if(0!==this.context.length){var f=this.context[0];if("fromVisible"===d||"toData"===d)return x(f,a);if("fromData"===d||
"toVisible"===d)return G(f,a)}});O("column()",function(d,a){return zb(this.columns(d,a))});O("cells()",function(d,f,h){a.isPlainObject(d)&&(d.row===g?(h=d,d=null):(h=f,f=null));a.isPlainObject(f)&&(h=f,f=null);if(null===f||f===g)return this.iterator("table",function(f){var l=d,b=yb(h),p=f.aoData,c=sb(f,b),u=Fb(nb(p,c,"anCells")),v=a([].concat.apply([],u)),t,z=f.aoColumns.length,E,m,r,P,w,y;return xb("cell",l,function(d){var h="function"===typeof d;if(null===d||d===g||h){E=[];m=0;for(r=c.length;m<
r;m++)for(t=c[m],P=0;P<z;P++)w={row:t,column:P},h?(y=p[t],d(w,T(f,t,P),y.anCells?y.anCells[P]:null)&&E.push(w)):E.push(w);return E}if(a.isPlainObject(d))return[d];h=v.filter(d).map(function(d,a){return{row:a._DT_CellIndex.row,column:a._DT_CellIndex.column}}).toArray();if(h.length||!d.nodeName)return h;y=a(d).closest("*[data-dt-row]");return y.length?[{row:y.data("dt-row"),column:y.data("dt-column")}]:[]},f,b)});var l=this.columns(f,h),b=this.rows(d,h),p,c,u,v,t,z=this.iterator("table",function(d,
a){p=[];c=0;for(u=b[a].length;c<u;c++)for(v=0,t=l[a].length;v<t;v++)p.push({row:b[a][c],column:l[a][v]});return p},1);a.extend(z.selector,{cols:f,rows:d,opts:h});return z});U("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(d,a,f){return(d=d.aoData[a])&&d.anCells?d.anCells[f]:g},1)});O("cells().data()",function(){return this.iterator("cell",function(d,a,f){return T(d,a,f)},1)});U("cells().cache()","cell().cache()",function(d){d="search"===d?"_aFilterData":"_aSortData";
return this.iterator("cell",function(a,f,h){return a.aoData[f][d][h]},1)});U("cells().render()","cell().render()",function(d){return this.iterator("cell",function(a,f,h){return T(a,f,h,d)},1)});U("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(d,a,f){return{row:a,column:f,columnVisible:G(d,f)}},1)});U("cells().invalidate()","cell().invalidate()",function(d){return this.iterator("cell",function(a,f,h){pa(a,f,d,h)})});O("cell()",function(d,a,f){return zb(this.cells(d,
a,f))});O("cell().data()",function(d){var a=this.context,f=this[0];if(d===g)return a.length&&f.length?T(a[0],f[0].row,f[0].column):g;R(a[0],f[0].row,f[0].column,d);pa(a[0],f[0].row,"data",f[0].column);return this});O("order()",function(d,f){var h=this.context;if(d===g)return 0!==h.length?h[0].aaSorting:g;"number"===typeof d?d=[[d,f]]:d.length&&!a.isArray(d[0])&&(d=Array.prototype.slice.call(arguments));return this.iterator("table",function(a){a.aaSorting=d.slice()})});O("order.listener()",function(d,
a,f){return this.iterator("table",function(h){Wa(h,d,a,f)})});O("order.fixed()",function(d){if(!d){var f=this.context,f=f.length?f[0].aaSortingFixed:g;return a.isArray(f)?{pre:f}:f}return this.iterator("table",function(f){f.aaSortingFixed=a.extend(!0,{},d)})});O(["columns().order()","column().order()"],function(d){var f=this;return this.iterator("table",function(h,l){var b=[];a.each(f[l],function(a,f){b.push([f,d])});h.aaSorting=b})});O("search()",function(d,f,h,l){var b=this.context;return d===g?
0!==b.length?b[0].oPreviousSearch.sSearch:g:this.iterator("table",function(b){b.oFeatures.bFilter&&Ja(b,a.extend({},b.oPreviousSearch,{sSearch:d+"",bRegex:null===f?!1:f,bSmart:null===h?!0:h,bCaseInsensitive:null===l?!0:l}),1)})});U("columns().search()","column().search()",function(d,f,h,l){return this.iterator("column",function(b,p){var c=b.aoPreSearchCols;if(d===g)return c[p].sSearch;b.oFeatures.bFilter&&(a.extend(c[p],{sSearch:d+"",bRegex:null===f?!1:f,bSmart:null===h?!0:h,bCaseInsensitive:null===
l?!0:l}),Ja(b,b.oPreviousSearch,1))})});O("state()",function(){return this.context.length?this.context[0].oSavedState:null});O("state.clear()",function(){return this.iterator("table",function(d){d.fnStateSaveCallback.call(d.oInstance,d,{})})});O("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});O("state.save()",function(){return this.iterator("table",function(d){Ba(d)})});p.versionCheck=p.fnVersionCheck=function(d){var a=p.version.split(".");d=d.split(".");
for(var f,h,l=0,b=d.length;l<b;l++)if(f=parseInt(a[l],10)||0,h=parseInt(d[l],10)||0,f!==h)return f>h;return!0};p.isDataTable=p.fnIsDataTable=function(d){var f=a(d).get(0),h=!1;if(d instanceof p.Api)return!0;a.each(p.settings,function(d,l){d=l.nScrollHead?a("table",l.nScrollHead)[0]:null;var b=l.nScrollFoot?a("table",l.nScrollFoot)[0]:null;if(l.nTable===f||d===f||b===f)h=!0});return h};p.tables=p.fnTables=function(d){var f=!1;a.isPlainObject(d)&&(f=d.api,d=d.visible);var h=a.map(p.settings,function(f){if(!d||
d&&a(f.nTable).is(":visible"))return f.nTable});return f?new P(h):h};p.camelToHungarian=q;O("$()",function(d,f){f=this.rows(f).nodes();f=a(f);return a([].concat(f.filter(d).toArray(),f.find(d).toArray()))});a.each(["on","one","off"],function(d,f){O(f+"()",function(){var d=Array.prototype.slice.call(arguments);d[0]=a.map(d[0].split(/\s/),function(d){return d.match(/\.dt\b/)?d:d+".dt"}).join(" ");var h=a(this.tables().nodes());h[f].apply(h,d);return this})});O("clear()",function(){return this.iterator("table",
function(d){S(d)})});O("settings()",function(){return new P(this.context,this.context)});O("init()",function(){var d=this.context;return d.length?d[0].oInit:null});O("data()",function(){return this.iterator("table",function(d){return Ua(d.aoData,"_aData")}).flatten()});O("destroy()",function(d){d=d||!1;return this.iterator("table",function(f){var h=f.nTableWrapper.parentNode,l=f.oClasses,b=f.nTable,c=f.nTBody,u=f.nTHead,v=f.nTFoot,t=a(b),c=a(c),z=a(f.nTableWrapper),E=a.map(f.aoData,function(d){return d.nTr}),
m;f.bDestroying=!0;N(f,"aoDestroyCallback","destroy",[f]);d||(new P(f)).columns().visible(!0);z.off(".DT").find(":not(tbody *)").off(".DT");a(e).off(".DT-"+f.sInstance);b!=u.parentNode&&(t.children("thead").detach(),t.append(u));v&&b!=v.parentNode&&(t.children("tfoot").detach(),t.append(v));f.aaSorting=[];f.aaSortingFixed=[];Aa(f);a(E).removeClass(f.asStripeClasses.join(" "));a("th, td",u).removeClass(l.sSortable+" "+l.sSortableAsc+" "+l.sSortableDesc+" "+l.sSortableNone);c.children().detach();c.append(E);
u=d?"remove":"detach";t[u]();z[u]();!d&&h&&(h.insertBefore(b,f.nTableReinsertBefore),t.css("width",f.sDestroyWidth).removeClass(l.sTable),(m=f.asDestroyStripes.length)&&c.children().each(function(d){a(this).addClass(f.asDestroyStripes[d%m])}));h=a.inArray(f,p.settings);-1!==h&&p.settings.splice(h,1)})});a.each(["column","row","cell"],function(d,a){O(a+"s().every()",function(d){var f=this.selector.opts,h=this;return this.iterator(a,function(l,b,p,c,u){d.call(h[a](b,"cell"===a?p:f,"cell"===a?f:g),b,
p,c,u)})})});O("i18n()",function(d,f,h){var l=this.context[0];d=W(d)(l.oLanguage);d===g&&(d=f);h!==g&&a.isPlainObject(d)&&(d=d[h]!==g?d[h]:d._);return d.replace("%d",h)});p.version="1.10.16";p.settings=[];p.models={};p.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};p.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1};p.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,
bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};p.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,
bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(d){return d.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,
fnStateLoadCallback:function(d){try{return JSON.parse((-1===d.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+d.sInstance+"_"+location.pathname))}catch(a){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(d,a){try{(-1===d.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+d.sInstance+"_"+location.pathname,JSON.stringify(a))}catch(f){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,
oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",
sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:a.extend({},p.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"};n(p.defaults);p.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,
mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};n(p.defaults.column);p.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,
bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,
nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:g,oAjaxData:g,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,
_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==h(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==h(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var d=this._iDisplayLength,a=this._iDisplayStart,f=a+d,h=this.aiDisplay.length,l=this.oFeatures,b=l.bPaginate;return l.bServerSide?!1===b||-1===d?a+h:Math.min(a+d,this._iRecordsDisplay):
!b||f>h||-1===d?h:f},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null};p.ext=E={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:p.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:p.version};a.extend(E,{afnFiltering:E.search,
aTypes:E.type.detect,ofnSearch:E.type.search,oSort:E.type.order,afnSortData:E.order,aoFeatures:E.feature,oApi:E.internal,oStdClasses:E.classes,oPagination:E.pager});a.extend(p.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",
sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",
sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Bb=p.ext.pager;a.extend(Bb,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(d,a){return[l(d,a)]},simple_numbers:function(d,a){return["previous",l(d,a),"next"]},full_numbers:function(d,a){return["first","previous",l(d,a),"next","last"]},first_last_numbers:function(d,
a){return["first",l(d,a),"last"]},_numbers:l,numbers_length:7});a.extend(!0,p.ext.renderer,{pageButton:{_:function(d,f,h,l,b,p){var c=d.oClasses,u=d.oLanguage.oPaginate,v=d.oLanguage.oAria.paginate||{},t,z,E=0,m=function(f,l){var r,g,P,w,C=function(a){Ma(d,a.data.action,!0)};r=0;for(g=l.length;r<g;r++)if(w=l[r],a.isArray(w))P=a("<"+(w.DT_el||"div")+"/>").appendTo(f),m(P,w);else{t=null;z="";switch(w){case "ellipsis":f.append('<span class="ellipsis">&#x2026;</span>');break;case "first":t=u.sFirst;z=
w+(0<b?"":" "+c.sPageButtonDisabled);break;case "previous":t=u.sPrevious;z=w+(0<b?"":" "+c.sPageButtonDisabled);break;case "next":t=u.sNext;z=w+(b<p-1?"":" "+c.sPageButtonDisabled);break;case "last":t=u.sLast;z=w+(b<p-1?"":" "+c.sPageButtonDisabled);break;default:t=w+1,z=b===w?c.sPageButtonActive:""}null!==t&&(P=a("<a>",{"class":c.sPageButton+" "+z,"aria-controls":d.sTableId,"aria-label":v[w],"data-dt-idx":E,tabindex:d.iTabIndex,id:0===h&&"string"===typeof w?d.sTableId+"_"+w:null}).html(t).appendTo(f),
fa(P,{action:w},C),E++)}},r;try{r=a(f).find(k.activeElement).data("dt-idx")}catch(P){}m(a(f).empty(),l);r!==g&&a(f).find("[data-dt-idx="+r+"]").focus()}}});a.extend(p.ext.type.detect,[function(d,a){a=a.oLanguage.sDecimal;return wb(d,a)?"num"+a:null},function(d){if(d&&!(d instanceof Date)&&!gb.test(d))return null;var a=Date.parse(d);return null!==a&&!isNaN(a)||xa(d)?"date":null},function(d,a){a=a.oLanguage.sDecimal;return wb(d,a,!0)?"num-fmt"+a:null},function(d,a){a=a.oLanguage.sDecimal;return Eb(d,
a)?"html-num"+a:null},function(a,f){f=f.oLanguage.sDecimal;return Eb(a,f,!0)?"html-num-fmt"+f:null},function(a){return xa(a)||"string"===typeof a&&-1!==a.indexOf("<")?"html":null}]);a.extend(p.ext.type.search,{html:function(a){return xa(a)?a:"string"===typeof a?a.replace(Cb," ").replace(rb,""):""},string:function(a){return xa(a)?a:"string"===typeof a?a.replace(Cb," "):a}});var qb=function(a,f,h,l){if(0!==a&&(!a||"-"===a))return-Infinity;f&&(a=cb(a,f));a.replace&&(h&&(a=a.replace(h,"")),l&&(a=a.replace(l,
"")));return 1*a};a.extend(E.type.order,{"date-pre":function(a){return Date.parse(a)||-Infinity},"html-pre":function(a){return xa(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return xa(a)?"":"string"===typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,f){return a<f?-1:a>f?1:0},"string-desc":function(a,f){return a<f?1:a>f?-1:0}});u("");a.extend(!0,p.ext.renderer,{header:{_:function(f,h,l,b){a(f.nTable).on("order.dt.DT",function(a,p,
c,u){f===p&&(a=l.idx,h.removeClass(l.sSortingClass+" "+b.sSortAsc+" "+b.sSortDesc).addClass("asc"==u[a]?b.sSortAsc:"desc"==u[a]?b.sSortDesc:l.sSortingClass))})},jqueryui:function(f,h,l,b){a("<div/>").addClass(b.sSortJUIWrapper).append(h.contents()).append(a("<span/>").addClass(b.sSortIcon+" "+l.sSortingClassJUI)).appendTo(h);a(f.nTable).on("order.dt.DT",function(a,p,c,u){f===p&&(a=l.idx,h.removeClass(b.sSortAsc+" "+b.sSortDesc).addClass("asc"==u[a]?b.sSortAsc:"desc"==u[a]?b.sSortDesc:l.sSortingClass),
h.find("span."+b.sSortIcon).removeClass(b.sSortJUIAsc+" "+b.sSortJUIDesc+" "+b.sSortJUI+" "+b.sSortJUIAscAllowed+" "+b.sSortJUIDescAllowed).addClass("asc"==u[a]?b.sSortJUIAsc:"desc"==u[a]?b.sSortJUIDesc:l.sSortingClassJUI))})}}});var Kb=function(a){return"string"===typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):a};p.render={number:function(a,f,h,l,b){return{display:function(p){if("number"!==typeof p&&"string"!==typeof p)return p;var c=0>p?"-":"",u=parseFloat(p);if(isNaN(u))return Kb(p);
u=u.toFixed(h);p=Math.abs(u);u=parseInt(p,10);p=h?f+(p-u).toFixed(h).substring(2):"";return c+(l||"")+u.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+p+(b||"")}}},text:function(){return{display:Kb}}};a.extend(p.ext.internal,{_fnExternApiFunc:z,_fnBuildAjax:ya,_fnAjaxUpdate:aa,_fnAjaxParameters:Va,_fnAjaxUpdateDraw:bb,_fnAjaxDataSrc:sa,_fnAddColumn:w,_fnColumnOptions:K,_fnAdjustColumnSizing:F,_fnVisibleToColumnIndex:x,_fnColumnIndexToVisible:G,_fnVisbleColumns:D,_fnGetColumns:I,_fnColumnTypes:A,_fnApplyColumnDefs:B,
_fnHungarianMap:n,_fnCamelToHungarian:q,_fnLanguageCompat:c,_fnBrowserDetect:r,_fnAddData:Q,_fnAddTr:M,_fnNodeToDataIndex:function(a,f){return f._DT_RowIndex!==g?f._DT_RowIndex:null},_fnNodeToColumnIndex:function(f,h,l){return a.inArray(l,f.aoData[h].anCells)},_fnGetCellData:T,_fnSetCellData:R,_fnSplitObjNotation:Ia,_fnGetObjectDataFn:W,_fnSetObjectDataFn:ka,_fnGetDataMaster:na,_fnClearTable:S,_fnDeleteIndex:la,_fnInvalidate:pa,_fnGetRowElements:ja,_fnCreateTr:oa,_fnBuildHead:da,_fnDrawHead:V,_fnDraw:ra,
_fnReDraw:ea,_fnAddOptionsHtml:ma,_fnDetectHeader:qa,_fnGetUniqueThs:va,_fnFeatureHtmlFilter:Za,_fnFilterComplete:Ja,_fnFilterCustom:za,_fnFilterColumn:wa,_fnFilter:Qa,_fnFilterCreateSearch:Ea,_fnEscapeRegex:ub,_fnFilterData:eb,_fnFeatureHtmlInfo:db,_fnUpdateInfo:jb,_fnInfoMacros:ib,_fnInitialise:La,_fnInitComplete:ta,_fnLengthChange:Y,_fnFeatureHtmlLength:Ya,_fnFeatureHtmlPaginate:ab,_fnPageChange:Ma,_fnFeatureHtmlProcessing:Da,_fnProcessingDisplay:ua,_fnFeatureHtmlTable:$a,_fnScrollDraw:J,_fnApplyToChildren:Ka,
_fnCalculateColumnWidths:hb,_fnThrottle:tb,_fnConvertToWidth:fb,_fnGetWidestNode:ha,_fnGetMaxLenString:Z,_fnStringToCss:ba,_fnSortFlatten:Pa,_fnSort:Oa,_fnSortAria:Fa,_fnSortListener:Xa,_fnSortAttachListener:Wa,_fnSortingClasses:Aa,_fnSortData:Ta,_fnSaveState:Ba,_fnLoadState:f,_fnSettingsFromNode:t,_fnLog:v,_fnMap:ia,_fnBindAction:fa,_fnCallbackReg:ga,_fnCallbackFire:N,_fnLengthOverflow:H,_fnRenderer:X,_fnDataSource:h,_fnRowAttributes:L,_fnCalculateEnd:function(){}});a.fn.dataTable=p;p.$=a;a.fn.dataTableSettings=
p.settings;a.fn.dataTableExt=p.ext;a.fn.DataTable=function(f){return a(this).dataTable(f).api()};a.each(p,function(f,h){a.fn.DataTable[f]=h});return a.fn.dataTable});
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(e){return a(e,window,document)}):"object"===typeof exports?module.exports=function(e,k){e||(e=window);k&&k.fn.dataTable||(k=require("datatables.net")(e,k).$);return a(k,e,e.document)}:a(jQuery,window,document)})(function(a,e,k,g){var n=a.fn.dataTable,q,c=function(b,m){var r=this;if(this instanceof c){if(m===g||!0===m)m={};var C=a.fn.dataTable.camelToHungarian;C&&(C(c.defaults,c.defaults,!0),C(c.defaults,
m));b=(new a.fn.dataTable.Api(b)).settings()[0];this.s={dt:b,iTableColumns:b.aoColumns.length,aiOuterWidths:[],aiInnerWidths:[],rtl:"rtl"===a(b.nTable).css("direction")};this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}};if(b._oFixedColumns)throw"FixedColumns already initialised on this table";
b._oFixedColumns=this;b._bInitComplete?this._fnConstruct(m):b.oApi._fnCallbackReg(b,"aoInitComplete",function(){r._fnConstruct(m)},"FixedColumns")}else alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.")};a.extend(c.prototype,{fnUpdate:function(){this._fnDraw(!0)},fnRedrawLayout:function(){this._fnColCalc();this._fnGridLayout();this.fnUpdate()},fnRecalculateHeight:function(a){delete a._DTTC_iHeight;a.style.height="auto"},fnSetRowHeight:function(a,c){a.style.height=
c+"px"},fnGetPosition:function(b){var c=this.s.dt.oInstance;if(a(b).parents(".DTFC_Cloned").length){if("tr"===b.nodeName.toLowerCase())return b=a(b).index(),c.fnGetPosition(a("tr",this.s.dt.nTBody)[b]);var r=a(b).index();b=a(b.parentNode).index();return[c.fnGetPosition(a("tr",this.s.dt.nTBody)[b]),r,c.oApi._fnVisibleToColumnIndex(this.s.dt,r)]}return c.fnGetPosition(b)},_fnConstruct:function(b){var m=this;if("function"!=typeof this.s.dt.oInstance.fnVersionCheck||!0!==this.s.dt.oInstance.fnVersionCheck("1.8.0"))alert("FixedColumns "+
c.VERSION+" required DataTables 1.8.0 or later. Please upgrade your DataTables installation");else if(""===this.s.dt.oScroll.sX)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"FixedColumns is not needed (no x-scrolling in DataTables enabled), so no action will be taken. Use 'FixedHeader' for column fixing when scrolling is not enabled");else{this.s=a.extend(!0,this.s,c.defaults,b);b=this.s.dt.oClasses;this.dom.grid.dt=a(this.s.dt.nTable).parents("div."+b.sScrollWrapper)[0];this.dom.scroller=a("div."+
b.sScrollBody,this.dom.grid.dt)[0];this._fnColCalc();this._fnGridSetup();var r,C=!1;a(this.s.dt.nTableWrapper).on("mousedown.DTFC",function(){C=!0;a(k).one("mouseup",function(){C=!1})});a(this.dom.scroller).on("mouseover.DTFC touchstart.DTFC",function(){C||(r="main")}).on("scroll.DTFC",function(a){!r&&a.originalEvent&&(r="main");"main"===r&&(0<m.s.iLeftColumns&&(m.dom.grid.left.liner.scrollTop=m.dom.scroller.scrollTop),0<m.s.iRightColumns&&(m.dom.grid.right.liner.scrollTop=m.dom.scroller.scrollTop))});
var w="onwheel"in k.createElement("div")?"wheel.DTFC":"mousewheel.DTFC";if(0<m.s.iLeftColumns)a(m.dom.grid.left.liner).on("mouseover.DTFC touchstart.DTFC",function(){C||(r="left")}).on("scroll.DTFC",function(a){!r&&a.originalEvent&&(r="left");"left"===r&&(m.dom.scroller.scrollTop=m.dom.grid.left.liner.scrollTop,0<m.s.iRightColumns&&(m.dom.grid.right.liner.scrollTop=m.dom.grid.left.liner.scrollTop))}).on(w,function(a){m.dom.scroller.scrollLeft-="wheel"===a.type?-a.originalEvent.deltaX:a.originalEvent.wheelDeltaX});
if(0<m.s.iRightColumns)a(m.dom.grid.right.liner).on("mouseover.DTFC touchstart.DTFC",function(){C||(r="right")}).on("scroll.DTFC",function(a){!r&&a.originalEvent&&(r="right");"right"===r&&(m.dom.scroller.scrollTop=m.dom.grid.right.liner.scrollTop,0<m.s.iLeftColumns&&(m.dom.grid.left.liner.scrollTop=m.dom.grid.right.liner.scrollTop))}).on(w,function(a){m.dom.scroller.scrollLeft-="wheel"===a.type?-a.originalEvent.deltaX:a.originalEvent.wheelDeltaX});a(e).on("resize.DTFC",function(){m._fnGridLayout.call(m)});
var n=!0,F=a(this.s.dt.nTable);F.on("draw.dt.DTFC",function(){m._fnColCalc();m._fnDraw.call(m,n);n=!1}).on("column-sizing.dt.DTFC",function(){m._fnColCalc();m._fnGridLayout(m)}).on("column-visibility.dt.DTFC",function(a,b,c,r,w){if(w===g||w)m._fnColCalc(),m._fnGridLayout(m),m._fnDraw(!0)}).on("select.dt.DTFC deselect.dt.DTFC",function(a,b,c,r){"dt"===a.namespace&&m._fnDraw(!1)}).on("destroy.dt.DTFC",function(){F.off(".DTFC");a(m.dom.scroller).off(".DTFC");a(e).off(".DTFC");a(m.s.dt.nTableWrapper).off(".DTFC");
a(m.dom.grid.left.liner).off(".DTFC "+w);a(m.dom.grid.left.wrapper).remove();a(m.dom.grid.right.liner).off(".DTFC "+w);a(m.dom.grid.right.wrapper).remove()});this._fnGridLayout();this.s.dt.oInstance.fnDraw(!1)}},_fnColCalc:function(){var b=this,c=0,r=0;this.s.aiInnerWidths=[];this.s.aiOuterWidths=[];a.each(this.s.dt.aoColumns,function(g,w){w=a(w.nTh);var e;if(w.filter(":visible").length){var n=w.outerWidth();0===b.s.aiOuterWidths.length&&(e=a(b.s.dt.nTable).css("border-left-width"),n+="string"===
typeof e?1:parseInt(e,10));b.s.aiOuterWidths.length===b.s.dt.aoColumns.length-1&&(e=a(b.s.dt.nTable).css("border-right-width"),n+="string"===typeof e?1:parseInt(e,10));b.s.aiOuterWidths.push(n);b.s.aiInnerWidths.push(w.width());g<b.s.iLeftColumns&&(c+=n);b.s.iTableColumns-b.s.iRightColumns<=g&&(r+=n)}else b.s.aiInnerWidths.push(0),b.s.aiOuterWidths.push(0)});this.s.iLeftWidth=c;this.s.iRightWidth=r},_fnGridSetup:function(){var b=this._fnDTOverflow(),c;this.dom.body=this.s.dt.nTable;this.dom.header=
this.s.dt.nTHead.parentNode;this.dom.header.parentNode.parentNode.style.position="relative";var r=a('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;"><div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_LeftBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll; overflow-x:hidden"></div></div><div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div><div class="DTFC_RightWrapper" style="position:absolute; top:0; right:0;"><div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightHeadBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div><div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_RightBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll; overflow-x: hidden"></div></div><div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightFootBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div></div></div>')[0],
g=r.childNodes[0],w=r.childNodes[1];this.dom.grid.dt.parentNode.insertBefore(r,this.dom.grid.dt);r.appendChild(this.dom.grid.dt);this.dom.grid.wrapper=r;0<this.s.iLeftColumns&&(this.dom.grid.left.wrapper=g,this.dom.grid.left.head=g.childNodes[0],this.dom.grid.left.body=g.childNodes[1],this.dom.grid.left.liner=a("div.DTFC_LeftBodyLiner",r)[0],r.appendChild(g));if(0<this.s.iRightColumns){this.dom.grid.right.wrapper=w;this.dom.grid.right.head=w.childNodes[0];this.dom.grid.right.body=w.childNodes[1];
this.dom.grid.right.liner=a("div.DTFC_RightBodyLiner",r)[0];c=a(a(this.dom.grid.dt)[0]);var e=c.width()-c.children(".dataTables_scrollBody").children("table").width();0>e&&(e=0);w.style.right=e+"px";c=a("div.DTFC_RightHeadBlocker",r)[0];c.style.width=b.bar+"px";c.style.right=e+"px";this.dom.grid.right.headBlock=c;c=a("div.DTFC_RightFootBlocker",r)[0];c.style.width=b.bar+"px";c.style.right=e+"px";this.dom.grid.right.footBlock=c;r.appendChild(w)}this.s.dt.nTFoot&&(this.dom.footer=this.s.dt.nTFoot.parentNode,
0<this.s.iLeftColumns&&(this.dom.grid.left.foot=g.childNodes[2]),0<this.s.iRightColumns&&(this.dom.grid.right.foot=w.childNodes[2]));this.s.rtl&&a("div.DTFC_RightHeadBlocker",r).css({left:-b.bar+"px",right:""})},_fnGridLayout:function(){var b=this,c=this.dom.grid;a(c.wrapper).width();var r=a(this.s.dt.nTable.parentNode).outerHeight(),g=a(this.s.dt.nTable.parentNode.parentNode).outerHeight(),w=this._fnDTOverflow(),e=this.s.iLeftWidth,n=this.s.iRightWidth,k="rtl"===a(this.dom.body).css("direction"),
q=function(c,r){w.bar?b._firefoxScrollError()?34<a(c).height()&&(c.style.width=r+w.bar+"px"):c.style.width=r+w.bar+"px":(c.style.width=r+20+"px",c.style.paddingRight="20px",c.style.boxSizing="border-box")};w.x&&(r-=w.bar);c.wrapper.style.height=g+"px";0<this.s.iLeftColumns&&(g=c.left.wrapper,g.style.width=e+"px",g.style.height="1px",k?(g.style.left="",g.style.right=0):(g.style.left=0,g.style.right=""),c.left.body.style.height=r+"px",c.left.foot&&(c.left.foot.style.top=(w.x?w.bar:0)+"px"),q(c.left.liner,
e),c.left.liner.style.height=r+"px");0<this.s.iRightColumns&&(g=c.right.wrapper,g.style.width=n+"px",g.style.height="1px",e=a(a(c.dt)[0]),e=e.width()-e.children(".dataTables_scrollBody").children("table").width(),0>e&&(e=0),this.s.rtl?(g.style.left=w.y?w.bar+"px":0,g.style.right=""):(g.style.left="",g.style.right=e+"px"),c.right.body.style.height=r+"px",c.right.foot&&(c.right.foot.style.top=(w.x?w.bar:0)+"px"),q(c.right.liner,n),c.right.liner.style.height=r+"px",c.right.headBlock.style.display=w.y?
"block":"none",c.right.footBlock.style.display=w.y?"block":"none")},_fnDTOverflow:function(){var a=this.s.dt.nTable,c=a.parentNode,r={x:!1,y:!1,bar:this.s.dt.oScroll.iBarWidth};a.offsetWidth>c.clientWidth&&(r.x=!0);a.offsetHeight>c.clientHeight&&(r.y=!0);return r},_fnDraw:function(b){this._fnGridLayout();this._fnCloneLeft(b);this._fnCloneRight(b);null!==this.s.fnDrawCallback&&this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right);a(this).trigger("draw.dtfc",{leftClone:this.dom.clone.left,
rightClone:this.dom.clone.right})},_fnCloneRight:function(a){if(!(0>=this.s.iRightColumns)){var c,r=[];for(c=this.s.iTableColumns-this.s.iRightColumns;c<this.s.iTableColumns;c++)this.s.dt.aoColumns[c].bVisible&&r.push(c);this._fnClone(this.dom.clone.right,this.dom.grid.right,r,a)}},_fnCloneLeft:function(a){if(!(0>=this.s.iLeftColumns)){var c,r=[];for(c=0;c<this.s.iLeftColumns;c++)this.s.dt.aoColumns[c].bVisible&&r.push(c);this._fnClone(this.dom.clone.left,this.dom.grid.left,r,a)}},_fnCopyLayout:function(b,
c,r){for(var g=[],w=[],e=[],n=0,k=b.length;n<k;n++){var q=[];q.nTr=a(b[n].nTr).clone(r,!1)[0];for(var D=0,I=this.s.iTableColumns;D<I;D++)if(-1!==a.inArray(D,c)){var A=a.inArray(b[n][D].cell,e);-1===A?(A=a(b[n][D].cell).clone(r,!1)[0],w.push(A),e.push(b[n][D].cell),q.push({cell:A,unique:b[n][D].unique})):q.push({cell:w[A],unique:b[n][D].unique})}g.push(q)}return g},_fnClone:function(b,c,r,e){var w=this,n,k,q,G,D,I,A,B,Q,M=this.s.dt;if(e){a(b.header).remove();b.header=a(this.dom.header).clone(!0,!1)[0];
b.header.className+=" DTFC_Cloned";b.header.style.width="100%";c.head.appendChild(b.header);B=this._fnCopyLayout(M.aoHeader,r,!0);G=a(">thead",b.header);G.empty();n=0;for(k=B.length;n<k;n++)G[0].appendChild(B[n].nTr);M.oApi._fnDrawHead(M,B,!0)}else for(B=this._fnCopyLayout(M.aoHeader,r,!1),Q=[],M.oApi._fnDetectHeader(Q,a(">thead",b.header)[0]),n=0,k=B.length;n<k;n++)for(q=0,G=B[n].length;q<G;q++)Q[n][q].cell.className=B[n][q].cell.className,a("span.DataTables_sort_icon",Q[n][q].cell).each(function(){this.className=
a("span.DataTables_sort_icon",B[n][q].cell)[0].className});this._fnEqualiseHeights("thead",this.dom.header,b.header);"auto"==this.s.sHeightMatch&&a(">tbody>tr",w.dom.body).css("height","auto");null!==b.body&&(a(b.body).remove(),b.body=null);b.body=a(this.dom.body).clone(!0)[0];b.body.className+=" DTFC_Cloned";b.body.style.paddingBottom=M.oScroll.iBarWidth+"px";b.body.style.marginBottom=2*M.oScroll.iBarWidth+"px";null!==b.body.getAttribute("id")&&b.body.removeAttribute("id");a(">thead>tr",b.body).empty();
a(">tfoot",b.body).remove();var T=a("tbody",b.body)[0];a(T).empty();if(0<M.aiDisplay.length){k=a(">thead>tr",b.body)[0];for(A=0;A<r.length;A++)D=r[A],I=a(M.aoColumns[D].nTh).clone(!0)[0],I.innerHTML="",G=I.style,G.paddingTop="0",G.paddingBottom="0",G.borderTopWidth="0",G.borderBottomWidth="0",G.height=0,G.width=w.s.aiInnerWidths[D]+"px",k.appendChild(I);a(">tbody>tr",w.dom.body).each(function(b){b=!1===w.s.dt.oFeatures.bServerSide?w.s.dt.aiDisplay[w.s.dt._iDisplayStart+b]:b;var c;c=b>=w.s.dt.aoData.length||
_.isUndefined(w.s.dt.aoData[b].anCells)?w.s.dt.aoData[b-1].anCells:w.s.dt.aoData[b].anCells;var g=this.cloneNode(!1);g.removeAttribute("id");g.setAttribute("data-dt-row",b);for(A=0;A<r.length;A++)D=r[A],0<c.length&&(I=a(c[D]).clone(!0,!0)[0],I.setAttribute("data-dt-row",b),I.setAttribute("data-dt-column",M.oApi._fnVisibleToColumnIndex(M,D)),g.appendChild(I));T.appendChild(g)})}else a(">tbody>tr",w.dom.body).each(function(b){I=this.cloneNode(!0);I.className+=" DTFC_NoData";a("td",I).html("");T.appendChild(I)});
b.body.style.width="100%";b.body.style.margin="0";b.body.style.padding="0";M.oScroller!==g&&(k=M.oScroller.dom.force,c.forcer?c.forcer.style.height=k.style.height:(c.forcer=k.cloneNode(!0),c.liner.appendChild(c.forcer)));c.liner.appendChild(b.body);this._fnEqualiseHeights("tbody",w.dom.body,b.body);if(null!==M.nTFoot){if(e){null!==b.footer&&b.footer.parentNode.removeChild(b.footer);b.footer=a(this.dom.footer).clone(!0,!0)[0];b.footer.className+=" DTFC_Cloned";b.footer.style.width="100%";c.foot.appendChild(b.footer);
B=this._fnCopyLayout(M.aoFooter,r,!0);c=a(">tfoot",b.footer);c.empty();n=0;for(k=B.length;n<k;n++)c[0].appendChild(B[n].nTr);M.oApi._fnDrawHead(M,B,!0)}else for(B=this._fnCopyLayout(M.aoFooter,r,!1),c=[],M.oApi._fnDetectHeader(c,a(">tfoot",b.footer)[0]),n=0,k=B.length;n<k;n++)for(q=0,G=B[n].length;q<G;q++)c[n][q].cell.className=B[n][q].cell.className;this._fnEqualiseHeights("tfoot",this.dom.footer,b.footer)}c=M.oApi._fnGetUniqueThs(M,a(">thead",b.header)[0]);a(c).each(function(a){D=r[a];this.style.width=
w.s.aiInnerWidths[D]+"px"});null!==w.s.dt.nTFoot&&(c=M.oApi._fnGetUniqueThs(M,a(">tfoot",b.footer)[0]),a(c).each(function(a){D=r[a];this.style.width=w.s.aiInnerWidths[D]+"px"}))},_fnGetTrNodes:function(a){for(var c=[],r=0,g=a.childNodes.length;r<g;r++)"TR"==a.childNodes[r].nodeName.toUpperCase()&&c.push(a.childNodes[r]);return c},_fnEqualiseHeights:function(b,c,r){if("none"!=this.s.sHeightMatch||"thead"===b||"tfoot"===b){var g,w,n=c.getElementsByTagName(b)[0];r=r.getElementsByTagName(b)[0];b=a(">"+
b+">tr:eq(0)",c).children(":first");b.outerHeight();b.height();n=this._fnGetTrNodes(n);c=this._fnGetTrNodes(r);var e=[];r=0;for(b=c.length;r<b;r++)g=n[r].offsetHeight,w=c[r].offsetHeight,g=w>g?w:g,"semiauto"==this.s.sHeightMatch&&(n[r]._DTTC_iHeight=g),e.push(g);r=0;for(b=c.length;r<b;r++)c[r].style.height=e[r]+"px",n[r].style.height=e[r]+"px"}},_firefoxScrollError:function(){if(q===g){var b=a("<div/>").css({position:"absolute",top:0,left:0,height:10,width:50,overflow:"scroll"}).appendTo("body");
q=b[0].clientWidth===b[0].offsetWidth&&0!==this._fnDTOverflow().bar;b.remove()}return q}});c.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,sHeightMatch:"semiauto"};c.version="3.2.3-dev";n.Api.register("fixedColumns()",function(){return this});n.Api.register("fixedColumns().update()",function(){return this.iterator("table",function(a){a._oFixedColumns&&a._oFixedColumns.fnUpdate()})});n.Api.register("fixedColumns().relayout()",function(){return this.iterator("table",function(a){a._oFixedColumns&&
a._oFixedColumns.fnRedrawLayout()})});n.Api.register("rows().recalcHeight()",function(){return this.iterator("row",function(a,c){a._oFixedColumns&&a._oFixedColumns.fnRecalculateHeight(this.row(c).node())})});n.Api.register("fixedColumns().rowIndex()",function(b){b=a(b);return b.parents(".DTFC_Cloned").length?this.rows({page:"current"}).indexes()[b.index()]:this.row(b).index()});n.Api.register("fixedColumns().cellIndex()",function(b){b=a(b);if(b.parents(".DTFC_Cloned").length){var c=b.parent().index(),
c=this.rows({page:"current"}).indexes()[c];b=b.parents(".DTFC_LeftWrapper").length?b.index():this.columns().flatten().length-this.context[0]._oFixedColumns.s.iRightColumns+b.index();return{row:c,column:this.column.index("toData",b),columnVisible:b}}return this.cell(b).index()});a(k).on("init.dt.fixedColumns",function(b,g){if("dt"===b.namespace){b=g.oInit.fixedColumns;var r=n.defaults.fixedColumns;if(b||r)r=a.extend({},b,r),!1!==b&&new c(g,r)}});a.fn.dataTable.FixedColumns=c;return a.fn.DataTable.FixedColumns=
c});
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(e){return a(e,window,document)}):"object"===typeof exports?module.exports=function(e,k){e||(e=window);k&&k.fn.dataTable||(k=require("datatables.net")(e,k).$);return a(k,e,e.document)}:a(jQuery,window,document)})(function(a,e,k,g){var n=a.fn.dataTable;a.extend(!0,n.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"});a.extend(n.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",
sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm",sProcessing:"dataTables_processing panel panel-default"});n.ext.renderer.pageButton.bootstrap=function(e,c,b,m,r,C){var w=new n.Api(e),K=e.oClasses,F=e.oLanguage.oPaginate,x=e.oLanguage.oAria.paginate||{},G,D,I=0,A=function(c,g){var m,n,k,B,ka=function(b){b.preventDefault();!a(b.currentTarget).hasClass("disabled")&&w.page()!=b.data.action&&w.page(b.data.action).draw("page")};m=0;for(n=g.length;m<n;m++)if(B=g[m],a.isArray(B))A(c,
B);else{D=G="";switch(B){case "ellipsis":G="&#x2026;";D="disabled";break;case "first":G=F.sFirst;D=B+(0<r?"":" disabled");break;case "previous":G=F.sPrevious;D=B+(0<r?"":" disabled");break;case "next":G=F.sNext;D=B+(r<C-1?"":" disabled");break;case "last":G=F.sLast;D=B+(r<C-1?"":" disabled");break;default:G=B+1,D=r===B?"active":""}G&&(k=a("<li>",{"class":K.sPageButton+" "+D,id:0===b&&"string"===typeof B?e.sTableId+"_"+B:null}).append(a("<a>",{href:"#","aria-controls":e.sTableId,"aria-label":x[B],
"data-dt-idx":I,tabindex:e.iTabIndex}).html(G)).appendTo(c),e.oApi._fnBindAction(k,{action:B},ka),I++)}},B;try{B=a(c).find(k.activeElement).data("dt-idx")}catch(Q){}A(a(c).empty().html('<ul class="pagination"/>').children("ul"),m);B!==g&&a(c).find("[data-dt-idx="+B+"]").focus()};return n});
(function(a){"function"===typeof define&&define.amd?define(["jquery","moment","datatables"],a):a(jQuery,moment)})(function(a,e){a.fn.dataTable.moment=function(k,g){var n=a.fn.dataTable.ext.type;n.detect.unshift(function(a){a&&a.replace&&(a=a.replace(/<.*?>/g,""));return""===a||null===a?"moment-"+k:e(a,k,g,!0).isValid()?"moment-"+k:null});n.order["moment-"+k+"-pre"]=function(a){a&&a.replace&&(a=a.replace(/<.*?>/g,""));return""===a||null===a?-Infinity:parseInt(e(a,k,g,!0).format("x"),10)}}});
var pvui=pvui||{};pvui.grid=pvui.grid||{};
pvui.grid.utils=function(){var a=$("#wrapper"),e=$("#commonListDataElements").data("has-multiple-list"),k=function(a){a.find("div.dataTables_scrollBody");var b=a.find("div.DTFC_LeftBodyWrapper, div.DTFC_LeftBodyLiner");setTimeout(function(){$(b).height(g(a))},10);pvui.grid.manageUIWrapper.updatePerfectScrollbar(a)},g=function(a){if(e)return a.find(".dataTables_scrollBody table").outerHeight();var b=a.find(".pv-topsrc-container");a=b.is(":visible");var b=$(b).outerHeight(),g=$(window).height()-265;
return a?g-b:g},n=function(a){if(!e){var b=a.find("div.dataTables_scrollBody");$(b).css({height:g(a),"max-height":g(a)})}k(a)},q=function(){return{hideSettingPanel:function(){a.removeClass("right-bar-enabled");$(".rightpanel-backdrop").remove()},showSettingPanel:function(){a.addClass("right-bar-enabled")}}}();return{appendDropdownOutsideContainer:function(a,b){var g;$(a).on("show.bs.dropdown",b,function(a){g=$(a.currentTarget).find(".dropdown-menu");$("body").append(g.detach());a=$(a.currentTarget);
var b=a.offset(),c=$(window).width()-(b.left+a.outerWidth()),e=parseInt(g.outerHeight()),b=b.top,n=parseInt(a.outerHeight());g.css({display:"block",top:r(a,e,n,b)?b-e:b+n,right:c})});$(a).on("hidden.bs.dropdown",b,function(a){$(a.currentTarget).append(g.detach());g.hide()});var r=function(a,b,c,r){a=$(window).height();b=parseInt(c+b+r);return a<b}},htmlOverflowYHidden:function(){e||document.getElementsByTagName("html")[0].classList.add("overflow-y-hidden")},getGridHeight:g,setGridHeight:n,updateGridOnResize:function(a){$(window).resize(function(){n(a)})},
manageListingUI:q}}();pvui=pvui||{};pvui.grid=pvui.grid||{};var itemDragged=!1;
pvui.grid.manageUIWrapper=function(){var a,e=function(a,e){var k=$(e).index()+1,c=a.find(".dataTables_scrollBody>table>tbody>tr:nth-child("+k+")"),k=c.find(".pv-table-action"),c=c.find(".pv-table-action>.td-box");var b=$(e).index()+1,m=a.find(".dataTables_scrollBody>table>tbody>tr:nth-child("+b+")").hasClass("details"),r=$(e).index();a.find(".dataTables_scrollBody>table>tbody>tr:nth-child("+r+")").hasClass("details")?(e=$(e).index(),e=".dataTables_scrollBody>table>tbody>tr:nth-child("+b+"),.DTFC_LeftBodyLiner>table>tbody>tr:nth-child("+
b+"),.dataTables_scrollBody>table>tbody>tr:nth-child("+e+"),.DTFC_LeftBodyLiner>table>tbody>tr:nth-child("+e+")"):m?(e=$(e).index()+2,e=".dataTables_scrollBody>table>tbody>tr:nth-child("+b+"),.DTFC_LeftBodyLiner>table>tbody>tr:nth-child("+b+"),.dataTables_scrollBody>table>tbody>tr:nth-child("+e+"),.DTFC_LeftBodyLiner>table>tbody>tr:nth-child("+e+")"):e=".dataTables_scrollBody>table>tbody>tr:nth-child("+b+"),.DTFC_LeftBodyLiner>table>tbody>tr:nth-child("+b+")";return{row:a.find(e),cell:c,col:k}},k=
function(a){var e=$(a).closest(".DTFC_ScrollWrapper").find(".dataTables_scrollBody");a=e.outerWidth();e=e.scrollLeft();return a+e};return{preventScrollingEmptyGrid:function(a,e){a.find(".dataTables_empty").length?e.css({"overflow-y":"hidden"}):e.css({"overflow-y":"auto"})},disableTableScrolling:function(a,e){a.css({overflow:"hidden"});e.css({"overflow-y":"hidden"})},enableTableScrolling:function(a,e){a.css({overflow:"auto"});e.css({"overflow-y":"scroll"})},handleRowMouseOverEvent:function(a){var n=
a.find(".dataTables_scrollBody"),q=n.outerWidth(),c=n.get(0).scrollWidth,b;a.off("mouseenter mouseleave").on("mouseenter",".dataTables_scrollBody>table>tbody>tr, .DTFC_LeftBodyLiner>table>tbody>tr",function(){var m=e(a,$(this));if(q<c){var r=k($(this))-m.cell.outerWidth();b=m.cell.detach();b.addClass("pv-list-action-cta").css({left:r+"px"});m.col.after(b)}m.row.addClass("curr-record")}).on("mouseleave",".dataTables_scrollBody>table>tbody>tr, .DTFC_LeftBodyLiner>table>tbody>tr",function(){var m=e(a,
$(this));q<c&&(b.removeClass("pv-list-action-cta"),b.attr("style",""),m.col.append(b));m.row.removeClass("curr-record")})},handleGridHorizontalScroll:function(a){a.find(".dataTables_scrollBody").on("scroll, touchmove",function(){var e=$(this),k=e.outerWidth()<e.get(0).scrollWidth,c=e.find(".footable-row-detail-inner"),e=e.get(0).scrollLeft;k&&0<e?(c.css("margin-left",e+"px"),k=a.find(".dataTables_scrollBody .pv-list-action-cta"),c=k.prev(),k.detach().removeClass("pv-list-action-cta").appendTo(c)):
c.css("margin-left","0px")})},bindIconHoverEvents:function(a){a.find(".reportStateMessage").webuiPopover({trigger:"hover",width:400,content:$(this).data("content")})},setPerfectScrollbar:function(g){a=new PerfectScrollbar(g.find(".dataTables_scrollBody")[0]);new PerfectScrollbar(".side-bar.right-bar")},updatePerfectScrollbar:function(g){g=g.find(".dataTables_scrollBody")[0];a&&a.update();$(g).scroll()},setGridActionButtonPosition:k,setMoreOption:function(a){a.find(".pvjs_outer-more-box").each(function(){var a=
$(this),g=a.find(".pvjs_inner-more-box"),c=a.attr("data-more"),b=a.attr("data-name"),c='<a type="link" class="cl-ic-more"><i class="fa fa-ellipsis-h more-option"  data-moredata="'+c+'" data-item="'+b+'"> </i> </a>';g.innerHeight()>a.innerHeight()&&g.append(c)})},handleDragDropEvent:function(g){itemDragged=!1;g.find(".ui-sortable").sortable({update:function(){itemDragged=!0;a.update()}})},scrollTopGrid:function(a){a.find(".dataTables_scrollBody").scrollTop(0)},initializePopover:function(a){_.each(a.find(".more-option"),
function(a){var g=pvi.util.removeHTMLTags($(a).data("moredata"));$(a).webuiPopover({html:!0,trigger:"hover",content:function(){_.isEmpty(g)&&(g="");for(var a=_.filter(g.split(","),function(a){return!_.isEmpty(a.trim())}),b="",e=a.length,r=0;r<e;r++)a[r]&&(b=b+"<a>"+a[r]+"</a>"),r<e-1&&(b+=",<br>");return b}})})},setMoreDataOption:function(a){_.each($("#"+a).find(".pvjs_outer-more-box"),function(a){var g=$(a).find(".pvjs_inner-more-box"),c='<a type="link" class="cl-ic-more" title="See All"><i class="fa fa-ellipsis-h more-option"> </i><span class="hide">'+
g.html()+"</span> </a>";g.innerHeight()>$(a).innerHeight()&&g.append(c)})},bindMoreContentPopover:function(a){_.each($("#"+a).find(".more-option"),function(a){$(a).webuiPopover("destroy").webuiPopover({trigger:"hover",content:function(){return $(a).next("span").html()}})})},closeSettingPanel:function(a,e){var k=function(){itemDragged?a():pvui.grid.utils.manageListingUI.hideSettingPanel()};if(e)e.click(function(){k()});else $(document).on("click",".rightpanel-backdrop",function(){k()})},toggleGridFilter:function(a,
e){a.find(".list-filter").is(":visible")?(a.find(".list-filter").hide(),a.find(".filter-head").find(".select2-container").hide()):(a.find(".list-filter").show(),a.find(".select2-container").show(),a.find(".date-time-filter").attr("placeholder",e?e.dateFormat:""))}}}();
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(e){return a(e,window,document)}):"object"===typeof exports?module.exports=function(e,k){e||(e=window);k&&k.fn.dataTable||(k=require("datatables.net")(e,k).$);return a(k,e,e.document)}:a(jQuery,window,document)})(function(a,e,k,g){function n(a){for(var b=[],c=0,g=a.length;c<g;c++)b[a[c]]=c;return b}function q(a,b,c){b=a.splice(b,1)[0];a.splice(c,0,b)}function c(a,b,c){for(var g=[],e=0,m=a.childNodes.length;e<
m;e++)1==a.childNodes[e].nodeType&&g.push(a.childNodes[e]);b=g[b];null!==c?a.insertBefore(b,g[c]):a.appendChild(b)}var b=a.fn.dataTable;a.fn.dataTableExt.oApi.fnColReorder=function(b,e,m,k,F){var x,G,D,I,A,B=b.aoColumns.length,Q;A=function(a,b,c){if(a[b]&&"function"!==typeof a[b]){var r=a[b].split("."),g=r.shift();isNaN(1*g)||(a[b]=c[1*g]+"."+r.join("."))}};if(e!=m)if(0>e||e>=B)this.oApi._fnLog(b,1,"ColReorder 'from' index is out of bounds: "+e);else if(0>m||m>=B)this.oApi._fnLog(b,1,"ColReorder 'to' index is out of bounds: "+
m);else{D=[];x=0;for(G=B;x<G;x++)D[x]=x;q(D,e,m);var M=n(D);x=0;for(G=b.aaSorting.length;x<G;x++)b.aaSorting[x][0]=M[b.aaSorting[x][0]];if(null!==b.aaSortingFixed)for(x=0,G=b.aaSortingFixed.length;x<G;x++)b.aaSortingFixed[x][0]=M[b.aaSortingFixed[x][0]];x=0;for(G=B;x<G;x++){Q=b.aoColumns[x];D=0;for(I=Q.aDataSort.length;D<I;D++)Q.aDataSort[D]=M[Q.aDataSort[D]];Q.idx=M[Q.idx]}a.each(b.aLastSort,function(a,c){b.aLastSort[a].src=M[c.src]});x=0;for(G=B;x<G;x++)Q=b.aoColumns[x],"number"==typeof Q.mData?
Q.mData=M[Q.mData]:a.isPlainObject(Q.mData)&&(A(Q.mData,"_",M),A(Q.mData,"filter",M),A(Q.mData,"sort",M),A(Q.mData,"type",M));if(b.aoColumns[e].bVisible){A=this.oApi._fnColumnIndexToVisible(b,e);I=null;for(x=m<e?m:m+1;null===I&&x<B;)I=this.oApi._fnColumnIndexToVisible(b,x),x++;D=b.nTHead.getElementsByTagName("tr");x=0;for(G=D.length;x<G;x++)c(D[x],A,I);if(null!==b.nTFoot)for(D=b.nTFoot.getElementsByTagName("tr"),x=0,G=D.length;x<G;x++)c(D[x],A,I);x=0;for(G=b.aoData.length;x<G;x++)null!==b.aoData[x].nTr&&
c(b.aoData[x].nTr,A,I)}q(b.aoColumns,e,m);x=0;for(G=B;x<G;x++)b.oApi._fnColumnOptions(b,x,{});q(b.aoPreSearchCols,e,m);x=0;for(G=b.aoData.length;x<G;x++){I=b.aoData[x];if(Q=I.anCells)for(q(Q,e,m),D=0,A=Q.length;D<A;D++)Q[D]&&Q[D]._DT_CellIndex&&(Q[D]._DT_CellIndex.column=D);"dom"!==I.src&&a.isArray(I._aData)&&q(I._aData,e,m)}x=0;for(G=b.aoHeader.length;x<G;x++)q(b.aoHeader[x],e,m);if(null!==b.aoFooter)for(x=0,G=b.aoFooter.length;x<G;x++)q(b.aoFooter[x],e,m);(F||F===g)&&a.fn.dataTable.Api(b).rows().invalidate();
x=0;for(G=B;x<G;x++)a(b.aoColumns[x].nTh).off("click.DT"),this.oApi._fnSortAttachListener(b,b.aoColumns[x].nTh,x);a(b.oInstance).trigger("column-reorder.dt",[b,{from:e,to:m,mapping:M,drop:k,iFrom:e,iTo:m,aiInvertMapping:M}])}};var m=function(b,c){b=(new a.fn.dataTable.Api(b)).settings()[0];if(b._colReorder)return b._colReorder;!0===c&&(c={});var g=a.fn.dataTable.camelToHungarian;g&&(g(m.defaults,m.defaults,!0),g(m.defaults,c||{}));this.s={dt:null,init:a.extend(!0,{},m.defaults,c),fixed:0,fixedRight:0,
reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]};this.dom={drag:null,pointer:null};this.s.dt=b;this.s.dt._colReorder=this;this._fnConstruct();return this};a.extend(m.prototype,{fnReset:function(){this._fnOrderColumns(this.fnOrder());return this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(b,c){var e=[],m,k=this.s.dt.aoColumns;if(b===g){c=0;for(m=k.length;c<m;c++)e.push(k[c]._ColReorder_iOrigCol);return e}if(c){k=
this.fnOrder();c=0;for(m=b.length;c<m;c++)e.push(a.inArray(b[c],k));b=e}this._fnOrderColumns(n(b));return this},fnTranspose:function(b,c){c||(c="toCurrent");var g=this.fnOrder(),e=this.s.dt.aoColumns;return"toCurrent"===c?a.isArray(b)?a.map(b,function(b){return a.inArray(b,g)}):a.inArray(b,g):a.isArray(b)?a.map(b,function(a){return e[a]._ColReorder_iOrigCol}):e[b]._ColReorder_iOrigCol},_fnConstruct:function(){var b=this,c=this.s.dt.aoColumns.length,g=this.s.dt.nTable,e;this.s.init.iFixedColumns&&
(this.s.fixed=this.s.init.iFixedColumns);this.s.init.iFixedColumnsLeft&&(this.s.fixed=this.s.init.iFixedColumnsLeft);this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0;this.s.init.fnReorderCallback&&(this.s.reorderCallback=this.s.init.fnReorderCallback);for(e=0;e<c;e++)e>this.s.fixed-1&&e<c-this.s.fixedRight&&this._fnMouseListener(e,this.s.dt.aoColumns[e].nTh),this.s.dt.aoColumns[e]._ColReorder_iOrigCol=e;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(a,
c){b._fnStateSave.call(b,c)},"ColReorder_State");var m=null;this.s.init.aiOrder&&(m=this.s.init.aiOrder.slice());this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(m=this.s.dt.oLoadedState.ColReorder);if(m)if(b.s.dt._bInitComplete)c=n(m),b._fnOrderColumns.call(b,c);else{var k=!1;a(g).on("draw.dt.colReorder",function(){if(!b.s.dt._bInitComplete&&!k){k=!0;var a=n(m);b._fnOrderColumns.call(b,a)}})}else this._fnSetColumnIndexes();
a(g).on("destroy.dt.colReorder",function(){a(g).off("destroy.dt.colReorder draw.dt.colReorder");a(b.s.dt.nTHead).find("*").off(".ColReorder");a.each(b.s.dt.aoColumns,function(b,c){a(c.nTh).removeAttr("data-column-index")});b.s.dt._colReorder=null;b.s=null})},_fnOrderColumns:function(b){var c=!1;if(b.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");else{for(var e=0,g=b.length;e<g;e++){var m=
a.inArray(e,b);e!=m&&(q(b,m,e),this.s.dt.oInstance.fnColReorder(m,e,!0,!1),c=!0)}a.fn.dataTable.Api(this.s.dt).rows().invalidate();this._fnSetColumnIndexes();c&&(""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))}},_fnStateSave:function(b){var c,e,g,m=this.s.dt.aoColumns;b.ColReorder=[];if(b.aaSorting){for(c=0;c<b.aaSorting.length;c++)b.aaSorting[c][0]=
m[b.aaSorting[c][0]]._ColReorder_iOrigCol;var k=a.extend(!0,[],b.aoSearchCols);c=0;for(e=m.length;c<e;c++)g=m[c]._ColReorder_iOrigCol,b.aoSearchCols[g]=k[c],b.abVisCols[g]=m[c].bVisible,b.ColReorder.push(g)}else if(b.order){for(c=0;c<b.order.length;c++)b.order[c][0]=m[b.order[c][0]]._ColReorder_iOrigCol;k=a.extend(!0,[],b.columns);c=0;for(e=m.length;c<e;c++)g=m[c]._ColReorder_iOrigCol,b.columns[g]=k[c],b.ColReorder.push(g)}},_fnMouseListener:function(a,b){},_fnMouseDown:function(b,c){var e=this,m=
a(b.target).closest("th, td").offset();c=parseInt(a(c).attr("data-column-index"),10);c!==g&&(this.s.mouse.startX=this._fnCursorPosition(b,"pageX"),this.s.mouse.startY=this._fnCursorPosition(b,"pageY"),this.s.mouse.offsetX=this._fnCursorPosition(b,"pageX")-m.left,this.s.mouse.offsetY=this._fnCursorPosition(b,"pageY")-m.top,this.s.mouse.target=this.s.dt.aoColumns[c].nTh,this.s.mouse.targetIndex=c,this.s.mouse.fromIndex=c,this._fnRegions(),a(k).on("mousemove.ColReorder touchmove.ColReorder",function(a){e._fnMouseMove.call(e,
a)}).on("mouseup.ColReorder touchend.ColReorder",function(a){e._fnMouseUp.call(e,a)}))},_fnMouseMove:function(a){if(null===this.dom.drag){if(5>Math.pow(Math.pow(this._fnCursorPosition(a,"pageX")-this.s.mouse.startX,2)+Math.pow(this._fnCursorPosition(a,"pageY")-this.s.mouse.startY,2),.5))return;this._fnCreateDragNode()}this.dom.drag.css({left:this._fnCursorPosition(a,"pageX")-this.s.mouse.offsetX,top:this._fnCursorPosition(a,"pageY")-this.s.mouse.offsetY});for(var b=!1,c=this.s.mouse.toIndex,e=1,g=
this.s.aoTargets.length;e<g;e++)if(this._fnCursorPosition(a,"pageX")<this.s.aoTargets[e-1].x+(this.s.aoTargets[e].x-this.s.aoTargets[e-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[e-1].x);this.s.mouse.toIndex=this.s.aoTargets[e-1].to;b=!0;break}b||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to);this.s.init.bRealtime&&c!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,
this.s.mouse.toIndex,!1),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(b){a(k).off(".ColReorder");null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!0),this._fnSetColumnIndexes(),""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),
null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnRegions:function(){var b=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length);this.s.aoTargets.push({x:a(this.s.dt.nTable).offset().left,to:0});for(var c=0,e=this.s.aoTargets[0].x,g=0,m=b.length;g<m;g++)g!=this.s.mouse.fromIndex&&c++,b[g].bVisible&&"none"!==b[g].nTh.style.display&&(e+=a(b[g].nTh).outerWidth(),this.s.aoTargets.push({x:e,to:c}));0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-
this.s.fixedRight);0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var b=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,c=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,e=c.parentNode,g=e.parentNode,m=g.parentNode,k=a(c).clone();this.dom.drag=a(m.cloneNode(!1)).addClass("DTCR_clonedTable").append(a(g.cloneNode(!1)).append(a(e.cloneNode(!1)).append(k[0]))).css({position:"absolute",top:0,left:0,width:a(c).outerWidth(),height:a(c).outerHeight()}).appendTo("body");
this.dom.pointer=a("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:b?a("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:a(this.s.dt.nTable).offset().top,height:b?a("div.dataTables_scroll",this.s.dt.nTableWrapper).height():a(this.s.dt.nTable).height()}).appendTo("body")},_fnSetColumnIndexes:function(){a.each(this.s.dt.aoColumns,function(b,c){a(c.nTh).attr("data-column-index",b)})},_fnCursorPosition:function(a,b){return-1!==a.type.indexOf("touch")?a.originalEvent.touches[0][b]:
a[b]}});m.defaults={aiOrder:null,bRealtime:!0,iFixedColumnsLeft:0,iFixedColumnsRight:0,fnReorderCallback:null};m.version="1.3.3";a.fn.dataTable.ColReorder=m;a.fn.DataTable.ColReorder=m;"function"==typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.10.8")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInstance;a._colReorder?b.oApi._fnLog(a,1,"ColReorder attempted to initialise twice. Ignoring second"):(b=a.oInit,new m(a,b.colReorder||
b.oColReorder||{}));return null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.10.8 or greater - www.datatables.net/download");a(k).on("preInit.dt.colReorder",function(c,e){if("dt"===c.namespace){c=e.oInit.colReorder;var g=b.defaults.colReorder;if(c||g)g=a.extend({},c,g),!1!==c&&new m(e,g)}});a.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(a){a._colReorder.fnReset()})});a.fn.dataTable.Api.register("colReorder.order()",
function(a,b){return a?this.iterator("table",function(c){c._colReorder.fnOrder(a,b)}):this.context.length?this.context[0]._colReorder.fnOrder():null});a.fn.dataTable.Api.register("colReorder.transpose()",function(a,b){return this.context.length&&this.context[0]._colReorder?this.context[0]._colReorder.fnTranspose(a,b):a});return m});var $jscomp=$jscomp||{};$jscomp.scope={};
$jscomp.findInternal=function(a,e,k){a instanceof String&&(a=String(a));for(var g=a.length,n=0;n<g;n++){var q=a[n];if(e.call(k,q,n,a))return{i:n,v:q}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,k){a!=Array.prototype&&a!=Object.prototype&&(a[e]=k.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,e,k,g){if(e){k=$jscomp.global;a=a.split(".");for(g=0;g<a.length-1;g++){var n=a[g];n in k||(k[n]={});k=k[n]}a=a[a.length-1];g=k[a];e=e(g);e!=g&&null!=e&&$jscomp.defineProperty(k,a,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,k){return $jscomp.findInternal(this,a,k).v}},"es6","es3");
(function(a){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(e){return a(e,window,document)}):"object"===typeof exports?module.exports=function(e,k){e||(e=window);k&&k.fn.dataTable||(k=require("datatables.net")(e,k).$);return a(k,e,e.document)}:a(jQuery,window,document)})(function(a,e,k,g){var n=a.fn.dataTable,q=function(c,b){if(!n.versionCheck||!n.versionCheck("1.10.8"))throw"RowGroup requires DataTables 1.10.8 or newer";this.c=a.extend(!0,{},n.defaults.rowGroup,
q.defaults,b);this.s={dt:new n.Api(c)};this.dom={};c=this.s.dt.settings()[0];if(b=c.rowGroup)return b;c.rowGroup=this;this._constructor()};a.extend(q.prototype,{dataSrc:function(c){if(c===g)return this.c.dataSrc;var b=this.s.dt;this.c.dataSrc=c;a(b.table().node()).triggerHandler("rowgroup-datasrc.dt",[b,c]);return this},disable:function(){this.c.enable=!1;return this},enable:function(a){if(!1===a)return this.disable();this.c.enable=!0;return this},_constructor:function(){var a=this,b=this.s.dt;b.on("draw.dtrg",
function(){a.c.enable&&a._draw()});b.on("column-visibility.dt.dtrg responsive-resize.dt.dtrg",function(){a._adjustColspan()});b.on("destroy",function(){b.off(".dtrg")});b.on("responsive-resize.dt",function(){a._adjustColspan()})},_adjustColspan:function(){a("tr."+this.c.className,this.s.dt.table().body()).find("td").attr("colspan",this._colspan())},_colspan:function(){return this.s.dt.columns().visible().reduce(function(a,b){return a+b},0)},_draw:function(){var a=this._group(0,this.s.dt.rows({page:"current"}).indexes());
this._groupDisplay(0,a)},_group:function(c,b){for(var e=a.isArray(this.c.dataSrc)?this.c.dataSrc:[this.c.dataSrc],k=n.ext.oApi._fnGetObjectDataFn(e[c]),q=this.s.dt,w,K,F=[],x=0,G=b.length;x<G;x++){var D=b[x];w=q.row(D).data();w=k(w);if(null===w||w===g)w=this.c.emptyDataGroup;if(K===g||w!==K)F.push({dataPoint:w,rows:[]}),K=w;F[F.length-1].rows.push(D)}if(e[c+1]!==g)for(x=0,G=F.length;x<G;x++)F[x].children=this._group(c+1,F[x].rows);return F},_groupDisplay:function(a,b){for(var e=this.s.dt,g,k=0,n=
b.length;k<n;k++){var q=b[k],F=q.dataPoint,x=q.rows;this.c.startRender&&(g=this.c.startRender.call(this,e.rows(x),F,a),(g=this._rowWrap(g,this.c.startClassName,a))&&g.insertBefore(e.row(x[0]).node()));this.c.endRender&&(g=this.c.endRender.call(this,e.rows(x),F,a),(g=this._rowWrap(g,this.c.endClassName,a))&&g.insertAfter(e.row(x[x.length-1]).node()));q.children&&this._groupDisplay(a+1,q.children)}},_rowWrap:function(c,b,e){if(null===c||""===c)c=this.c.emptyDataGroup;return c===g||null===c?null:("object"===
typeof c&&c.nodeName&&"tr"===c.nodeName.toLowerCase()?a(c):c instanceof a&&c.length&&"tr"===c[0].nodeName.toLowerCase()?c:a("<tr/>").append(a("<td/>").attr("colspan",this._colspan()).append(c))).addClass(this.c.className).addClass(b).addClass("dtrg-level-"+e)}});q.defaults={className:"dtrg-group",dataSrc:0,emptyDataGroup:"No group",enable:!0,endClassName:"dtrg-end",endRender:null,startClassName:"dtrg-start",startRender:function(a,b){return b}};q.version="1.1.1";a.fn.dataTable.RowGroup=q;a.fn.DataTable.RowGroup=
q;n.Api.register("rowGroup()",function(){return this});n.Api.register("rowGroup().disable()",function(){return this.iterator("table",function(a){a.rowGroup&&a.rowGroup.enable(!1)})});n.Api.register("rowGroup().enable()",function(a){return this.iterator("table",function(b){b.rowGroup&&b.rowGroup.enable(a===g?!0:a)})});n.Api.register("rowGroup().dataSrc()",function(a){return a===g?this.context[0].rowGroup.dataSrc():this.iterator("table",function(b){b.rowGroup&&b.rowGroup.dataSrc(a)})});a(k).on("preInit.dt.dtrg",
function(c,b,e){"dt"===c.namespace&&(c=b.oInit.rowGroup,e=n.defaults.rowGroup,c||e)&&(e=a.extend({},e,c),!1!==c&&new q(b,e))});return q});
var FormState=function(a,e){var k,g,n=function(a,c){a=$._data(a,"events");c=$._data(c,"events");a="undefined"!==typeof a?Object.keys(a).length:0;c="undefined"!==typeof c?Object.keys(c).length:0;return a===c?0:a>c?1:-1};this.getState=function(){var a={};$(k).find("input, textarea, select").each(function(){var e=$(this),g;(g=e.is('input[type="file"], input[type="hidden"], input[type="submit"], input[type="reset"]'))||(g=(g=q(e,k))?g.hasClass("hide"):!1);g||(g=c(e),e=e.is("input[type=checkbox]")?e.prop("checked")?
"checked":"unchecked":e.val(),a[g]=e)});return JSON.stringify(a)};var q=function(a,c){a=a.parent().attr("data-id");return _.isUndefined(a)?null:c.find("#"+a)};this.loadVisibilityState=function(){var a=sessionStorage.getItem(g);if(a){var e=JSON.parse(a);$(k).find("input, textarea, select").each(function(){try{var a=$(this);if(!a.is('input[type="file"], input[type="hidden"], input[type="submit"], input[type="reset"]')){var b=c(a),g=q(a,k);b&&g&&(e.hasOwnProperty(b)?g.hasClass("hide")&&k.find("."+g.attr("id")).removeClass("hide"):
g.hasClass("hide")||k.find("."+g.attr("id")).addClass("hide"))}}catch(n){console.log("Error while loading form state",n)}})}};this.saveState=function(){sessionStorage.setItem(g,this.getState())};this.clearState=function(){sessionStorage.removeItem(g)};this.clearSelectively=function(){var a=sessionStorage.getItem(g);if(a){var c=JSON.parse(a);$.each(c,function(a,b){-1===a.indexOf(".persisting")&&(c[a]="")});sessionStorage.setItem(g,JSON.stringify(c))}};this.loadState=function(a){var c=sessionStorage.getItem(g);
this.loadStateFrom(c,a)};this.loadStateFrom=function(a,e){if("undefined"!==typeof a&&a){var g=JSON.parse(a);$(k).find("input, textarea, select").sort(n).each(function(){if(!$(this).is('input[type="file"], input[type="hidden"], input[type="submit"], input[type="reset"]'))a:{var a=$(this);if(g){var b=c(a),k=g[b];if("undefined"!==typeof k&&("boolean"!=typeof k||!1!==k))if(a.is("input[type=radio], input[type=checkbox]"))"checked"===k||a.val()===k?a.prop("checked",!0):"unchecked"===k&&a.prop("checked",
!1);else if(a.val()!==k){if(e===pvi_forms.duplicate_search)if(b.includes(".persisting"))a.val(k);else break a;else a.val(k);a.is("input")?a.trigger("input"):a.is("select")&&a.trigger("change")}}}})}};this.construct=function(a,c){k=a;g=c;return this};var c=function(a){if("undefined"===typeof a)return a;if(1!==a.length)return!1;var c="",e=a.is("input[type=checkbox]"),g=a;for(a=!!a.data("is-permanent");g.length;){var k=g[0],n=k.nodeName;if(!n)break;var n=n.toLowerCase(),g=g.parent(),q=g.children(n);
if($(k).is("form, input, select, textarea")||e)if(n+=$(k).attr("name")?"."+$(k).attr("name"):"",1<q.length&&!$(k).is("input[type=radio]")&&(n+=":eq("+q.index(k)+")"),c=n+(c?">"+c:""),"form"===k.nodeName.toLowerCase())break}a&&(c+=".persisting");return c};return this.construct(a,e)},pvi=pvi||{};pvi.rdl=pvi.rdl||{};
pvi.rdl.manageReportDistribution=function(){var a=$("#reportDestinationModal"),e=$("#reportDistTable"),k=null,g=e.find("tbody"),n=a.find(".e2bXMLDetail"),q=a.find(".back-to-rd-listing"),c=a.find(".rd-listing-close-btn"),b=a.find("h4.rdLog"),m=[],r=function(g,m,k){k?a.find("h4.e2bXml").removeClass("hide").find(".e2bFileName").text(" ("+m+")"):a.find("h4.ackXml").removeClass("hide").find(".ackFileName").text(" ("+m+")");e.add(b).add(c).addClass("hide");q.add(n).removeClass("hide");n.find(".xmlContent").text(vkbeautify.xml(g))},
C=function(){$(".e2bXml,.ackXml").add(q).add(n).addClass("hide");b.add(e).add(c).removeClass("hide");n.find(".xmlContent").text("")},w=function(b){m=b=_.isUndefined(b)?[]:b;var c=0,g=null;k=$(e).DataTable({destroy:!0,paging:!1,searching:!1,info:!1,data:b,order:[[1,"asc"],[2,"asc"]],orderFixed:[[1,"asc"],[2,"asc"]],columns:[{data:"idx",render:function(a){return pvi.util.encodeToHTML(a)}},{data:"destinationName",className:"col-rd-destination-name",render:function(a){return pvi.util.encodeToHTML(a)}},
{data:"type",className:"col-rd-type",render:function(a){return pvi.util.encodeToHTML(a)}},{data:"fromState",className:"col-rd-from-state",render:function(a){return pvi.util.encodeToHTML(a)}},{data:"toState",className:"col-rd-to-state",render:function(a){return pvi.util.encodeToHTML(a)}},{data:"timeStamp",className:"col-rd-time-stamp",render:function(a){return pvi.util.encodeToHTML(a)}},{data:"icsrId",className:"col-rd-icsr-id",render:function(a){return pvi.util.encodeToHTML(a)}}],columnDefs:[{targets:[1,
2],visible:!1,orderable:!0},{targets:[0,3,4,5,6],orderable:!1}],rowGroup:{dataSrc:["destinationName","type"],startRender:function(a,b){if(0===c)g=b,c++;else return c=0,"<h5><b>"+g+"</b></h5>"}},createdRow:function(a,b,c){var g=!1,e="",m="";b.toStateId===pvi_icsr_state.GENERATED?(e=b.type===pvi_icsr_type.PDF?getMessage("icsr_type_pdf"):b.type===pvi_icsr_type.E2B_EXT?getMessage("icsr_type_e2b"):getMessage("icsr_type_e2b_r3"),g=b.type===pvi_icsr_type.PDF):_.contains([pvi_icsr_state.POSITIVE_ACK,pvi_icsr_state.NEGATIVE_ACK],
b.toStateId)?e="Ack":b.toStateId===pvi_icsr_state.TRANSMITTED&&b.type===pvi_icsr_type.E2B_R3_EXT&&(e="HL7");var k=!_.isEmpty(b.reportMessage)&&_.contains([pvi_icsr_state.POSITIVE_ACK,pvi_icsr_state.NEGATIVE_ACK],b.toStateId)?"":"hide";if(g){c=b.files;e='<a class="btn btn-xs btn-inverse waves-light" href="'+pvi_urls.icsrPdfDownload+"?id="+b.icsrId+'&type=icsr">'+e+"</a>";if(0===c.length)c=e;else{e='<div class="dropdown"> <div class="btn-group" role="group">'+e+'<button class="btn btn-xs btn-inverse waves-light dropdown-toggle" id="dropdownAttachments" type="button" data-toggle="dropdown" aria-haspopup="true" ><span class="md md-menu-down"></span></button><ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownAttachments" >';
for(g=0;g<c.length;g++)e+='<li><a href="'+pvi_urls.icsrPdfDownload+"?id="+c[g].id+'&type=attachment">'+c[g].name+"</a></li>";c=e+"</ul></div>"}m+=c}else m+='<button type="button" data-index="'+c+'" class="showAckXML btn btn-xs btn-inverse waves-light dropdown-toggle noActionAllowed not-clickable '+e+'">'+e+"</button>";$("td:eq(0)",a).addClass("snum");$("td:eq(2)",a).html(b.toState+'<a href="#" class="pv-ic-viewquery rdl-ic-showmsg '+k+'">\n<span class="fa fa-info-circle m-l-5"></span>\n</a>');$("td:eq(4)",
a).html(m)}});C();a.modal("show")},K=function(){$(document).off("click","a.reportState").on("click","a.reportState",function(b){b.preventDefault();b=$(this).attr("data-id");$.ajax({type:"GET",url:pvi_urls.report_distribution_log_url+b,success:function(a){w(JSON.parse(a).data)},error:function(b){g.text(b.message);a.modal("show")}})});$(document).off("click","a.rdl-ic-showmsg").on("click","a.rdl-ic-showmsg",function(a){a.preventDefault();a=$(this).closest("tr");var b=k.row(a);b.child.isShown()?(b.child.hide(),
a.removeClass("shown")):(b.child("<p>"+b.data().reportMessage+"</p>").show(),a.addClass("shown"))});$(document).off("click",".showAckXML").on("click",".showAckXML",function(a){a.preventDefault();a=$(this);var b=a.attr("data-index");a.hasClass(pvi_icsr_type.E2B_EXT)||a.hasClass(pvi_icsr_type.E2B_R3_EXT)?r(m[b].icsrXml,m[b].icsrFileName,!0):a.hasClass(pvi_icsr_type.HL7_EXT)?r(m[b].r3IcsrXml,m[b].icsrFileName,!0):a.hasClass(pvi_icsr_type.E2B_ACK)&&r(m[b].ackXml,m[b].ackFileName,!1)});$(document).off("click",
".back-to-rd-listing").on("click",".back-to-rd-listing",function(){C()});a.off("hide.bs.modal").on("hide.bs.modal",function(){C()})};return{init:function(){K()}}}();
var allCaseListTables=[],followUpFromList=function(a){$.ajax({url:a.url,type:"POST",data:{data:JSON.stringify({initialCaseId:a.initialCaseId,followUpCaseId:a.followUpCaseId,safetyCaseNum:a.safetyCaseNum})},beforeSend:function(){pvui.common.showPVLoader()},success:function(a){a=$.parseJSON(a);a.status===pvi_constants.status_fail?(pvui.common.hidePVLoader(),$("#messageBox").removeClass("hide"),$("#errorMessage").text(a.message)):($("#pviModalFollowUp").modal("hide"),pvi.util.gotoURL(pvi_urls.show_case_url+
a["case-id"]+pvi_urls.case_entry_default_template_suffix))}})},pvi=pvi||{};pvi.list=pvi.list||{};
pvi.list.commonFunctions=function(){return{setColumnVisibility:function(a,e){_.each(a,function(a){e.columns(a.name+":name").visible(1===a.containerView,!1)})},populateErrorInErrorContainer:function(a,e){$("#messageAlertContainer").remove();for(var k="",g=a.length,n=0;n<g;n++)k+="<li>"+a[n]+"</li>";$("#"+e).find(".dataTableList").before('<div class="alert alert-dismissible forceLineWrap alert-danger" role="alert" id="messageAlertContainer"></div>');$("#messageAlertContainer").html("<ul id='errorList'>"+
k+"</ul>")}}}();
pvi.list.dataGrid=function(a,e,k,g,n){function q(a,b,c){a=moment().tz(corporateTimezone).subtract(a,b);c=a.clone().subtract(c-1,b).clone().startOf(b).utc().format();b=a.clone().endOf(b).utc().format();return pa(c,b)}var c=$("#"+a),b=c.find("#"+e),m=n?n:{},r=!1,C,w={},K=!1,F=c.find("input[name='pageTypeId']").val(),x="undefined"!==typeof duplicateSearchPageId&&F===duplicateSearchPageId.toString(),G=c.find("input[name='actionVisible']").val(),D=pvi.util.isFromBackButtonPage();m.loadData=!!c.find("input[name='loadData']").data("value")||
D;var I=c.find("#list-data-elements"),A=I.data("page-length"),B=c.find("#"+k),Q,M=!1,T=0<$("#isDashboardPage").length,R=c.find(".dataTables_scrollBody"),Ia=c.find(".DTFC_LeftBodyLiner"),W=[],ka=new FormState($('form[name="'+g+'"]'),browserStorage.utils.appUserStorageKey+(g+":FORM_STATE")),na=function(){var a=_.reduce(c.find("input[caseState]"),function(a,b){b.checked&&a.push(c.find(b).attr("value").toLowerCase());return a},[]);return a&&0<a.length?a.join():c.find("div.report-distribution input").is(":checked")?
"":"xxxxx-crazy"},S=function(){var a=[];c.find(".pv-source-database").each(function(){$(this).is(":checked")&&a.push($(this).val())});return a},la=function(){var a=S();1>a.length&&a.push(1);return a},pa=function(a,b){return JSON.stringify({gte:a,lte:b})},ja=function(a,b){var c=1;if("true"===isIncludeTodayInSearchCriteria||!0===isIncludeTodayInSearchCriteria)c=0;return q(c,b,a)},oa=function(){var a=ja(defaultDateRangeValue,"day");a.range="LAST_X_DAYS";a.x=defaultDateRangeValue;return JSON.stringify(a)},
L=function(a,b){var c=null;switch(a){case "TODAY":b=moment().tz(corporateTimezone).clone();a=b.startOf("day").utc().format();b=b.endOf("day").utc().format();c=pa(a,b);break;case "YESTERDAY":c=q(1,"day",1);break;case "LAST_WEEK":c=ja(1,"week");break;case "LAST_MONTH":c=ja(1,"month");break;case "LAST_YEAR":c=ja(1,"year");break;case "LAST_X_DAYS":c=/^\d+$/.test(b)?ja(b,"day"):c;break;case "LAST_X_WEEKS":c=/^\d+$/.test(b)?ja(b,"week"):c;break;case "LAST_X_MONTHS":c=/^\d+$/.test(b)?ja(b,"month"):c;break;
case "LAST_X_YEARS":c=/^\d+$/.test(b)?ja(b,"year"):c;break;default:c=null}return c},da=function(){var a={},b=c.find("#simpleSearchField"),g=b.hasClass("visible");g&&(a.simpleSearch=b.val());V(a,!g);b=c.find("#date-range-type").val();g=c.find("#pviListDateRange").val();if(-1<_.indexOf(ea,g)||-1<_.indexOf(ma,g)){var e=c.find("#range-factor-field").val(),m=L(g,e);if(!m)return swal("",getMessage("correct_date_range")),null;m.range=g;m.x=e;a[b]=m}else if("CUSTOM"===g)if(g=ra())a[b]=g;else return null;
return a},V=function(a,b){b&&(_.each(c.find("input[data-search-field]:visible"),function(b){b=$(b);var c=b.val();if(!_.isEmpty(c)){var g=b.data("search-field");a[g]=b.hasClass("generateDateRange")?pvi.util.generateDateRange(c):c}}),_.each(c.find("select[data-search-field]:visible"),function(b){b=$(b);var c=pvi.util.getSelectedValueFromSelect2(b);_.isEmpty(c)||(a[b.data("search-field")]=c)}));a.caseStateId=na();b=c.find("#list-data-elements");var g=b.data("is-or-operation"),e=b.data("sort-while-search"),
m=b.data("count-search-criteria");a.config='{"isOrOperation": "'+g+'", "sortWhileSearch": "'+e+'", "countSearchCriteria": "'+m+'"}';!0===b.data("only-latest-valid-version")&&(a.isLatestValidVersion=!0);c.find("div.report-distribution input").is(":checked")&&(a.reportDistributionThreshold=!0);a.sourceDbId=la().join(",")},ra=function(){var a=c.find("#datepicker-rangeStartDate").val(),b=c.find("#datepicker-rangeEndDate").val();if(!a&&!b)return pvi.util.showInfo(getMessage("enter_start_end_date")),null;
if(!a)return swal("",getMessage("enter_start_date")),null;if(!b)return swal("",getMessage("enter_end_date")),null;if(!pvi.util.isValidDate(a))return swal("",getMessage("correct_start_date")),null;if(!pvi.util.isValidDate(b))return swal("",getMessage("correct_end_date")),null;var g=pvi.util.supportedDateTimeFormat,e=moment(a,g).tz(corporateTimezone,!0).startOf("day").utc(),g=moment(b,g).tz(corporateTimezone,!0).endOf("day").utc(),m=null;a&&b&&g.isAfter(e)?m=pa(e.format(),g.format()):a&&b?swal("",getMessage("start_end_constraint")):
swal("",getMessage("enter_start_end_date"));return m},ea=["TODAY","YESTERDAY","LAST_WEEK","LAST_MONTH","LAST_YEAR"],ma=["LAST_X_DAYS","LAST_X_WEEKS","LAST_X_MONTHS","LAST_X_YEARS"],qa=function(a,b,c,g,e){a={title:a,text:b,type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:g,closeOnConfirm:!0};c&&(a.showCancelButton=!0,a.cancelButtonText=c);swal(a,function(){e()})},va,ya=function(){var a=pvi.util.fetchUsersReferenceData();_.each(a,function(a){a.id=a.text});return a},aa=function(){var a=
function(a,b){$.ajax({url:pvi_urls.bulk_change_case_state,type:"POST",data:{data:JSON.stringify({ids:a.ids,toStateId:a.toStateId,actionPerformed:a.action})},beforeSend:function(){pvui.common.showPVLoader()},success:function(a){var c=JSON.parse(a);422===parseInt(c.status)?(pvi.list.commonFunctions.populateErrorInErrorContainer(c.text.errors,b),C.ajax.reload(),pvui.common.hidePVLoader()):setTimeout(function(){C.ajax.reload();pvui.common.hidePVLoader();pvi.util.showFloatingNotification.successMessage(c.message)},
1E3)}})},e=function(a,b){var c=$("#justificationPassword").val();pvi.util.showSpinDlg(function(){$.ajax({url:pvi_urls.bulk_change_case_state,async:!1,type:"POST",data:{data:JSON.stringify({ids:a.ids,toStateId:a.toStateId,comments:b.comments,actionPerformed:a.actionPerformed,timestamp:b.timestamp,username:usernameToSavePreference,password:c})},success:function(a){pvui.common.hidePVLoader();var b=JSON.parse(a);_.has(b,"caseStateChanged")&&!b.caseStateChanged?pvi.util.handleCaseStateChangeRejection(b):
setTimeout(function(){$("#pv-justification-modal").modal("hide");C.ajax.reload();pvi.util.showFloatingNotification.successMessage(b.message)},1E3)}})})},k=function(a){var b=C.column("simpleSearch:name");I.data("save-form-state")&&(a?(ka.saveState(),pvi.user.state.saveState(ka.getState(),g,pvi_page_section_name.form_section)):ka.clearState());b.search(a?a:null);r=m.loadData=!0;n()},n=function(a){m.loadData&&(T?pvui.common.pvWidgetLoader.hideLoader(c):pvui.common.hidePVLoader());_.isUndefined(a)?C.draw():
(C.draw(a),m.loadData||pvui.common.hidePVLoader())};c.on("list.data.table.clear.rows",function(){m.loadData=!1;n();m.loadData=!0});c.find("#date-range-type, #pviListDateRange").on("change",function(){var a=function(){c.find("#range-factor-field-container").addClass("hide").find("input").val("")},b=function(){c.find("#pviListCustomDaterange").addClass("hide")};c.find("#date-range-type").val();var g=c.find("#pviListDateRange").val();a();b();-1<ea.indexOf(g)?(a(),b()):-1<ma.indexOf(g)?(c.find("#range-factor-field-container").removeClass("hide"),
b(),c.find("#range-factor-field").val(),b()):"CUSTOM"===g&&(a(),a(),c.find("#pviListCustomDaterange").removeClass("hide").find("input").val(""))});c.find(".pv-source-database").on("change",function(a){!$(this).is(":checked")&&1>S().length&&(swal("",getMessage("source_db_warning_msg")),this.checked=!this.checked)});c.find(".search-button").click(function(){if(0<c.find("div.pv-include-cases-list input:checkbox:checked").length){var a=da();_.isEmpty(a)||k(JSON.stringify(a))}else qa("",getMessage("select_a_case"),
"",pvi_constants.success_btn_label,function(){swal.close()})});c.find("#export-excel-button").click(function(){$.ajax({type:"POST",url:pvi_urls.list_export_url+F,data:C.ajax.params(),beforeSend:function(){pvui.common.showPVLoader()},success:function(a){var b=document.createElement("a");b.href=pvi_urls.list_export_report_download_url+a.filename;document.body.appendChild(b);b.click();pvui.common.hidePVLoader()}})});c.find("#pviCaseSearchIcon").click(function(a){a.preventDefault();c.find("#pviCaseSrcSec").toggleClass("hide");
$("body").toggleClass("top-search-enabled");pvui.grid.utils.setGridHeight(c)});var q=function(){var a=function(){var a=0,b=0;_.each(W,function(a){a.listOrder=9999});_.each(sa(pvi_list_columns_view.primaryCols),function(b){b.listOrder=a++});_.each(sa(pvi_list_columns_view.secondaryCols),function(a){a.listOrder=b++});return W}();Qa();n(!0);A();$.ajax({url:eb(pvi_urls.case_list_update_columns_url),method:"POST",data:JSON.stringify(a),dataType:"json",beforeSend:function(){pvui.common.showPVLoader()},
success:function(){pvui.common.hidePVLoader()}});itemDragged=!1};(function(){c.find("#filter-button").click(function(a){a.preventDefault();va||(va=ya(),va.splice(0,0,{id:"-1",text:getMessage("select_blank_option")}),c.find("#assignee-filter").select2({data:va,placeholder:getMessage("select_default_text"),allowClear:!0}),a=w.column("assignedToUsername:name").search(),void 0!==a&&a!==loginUser||c.find("#assignee-filter").val(loginUser).trigger("change.select2"));pvui.grid.manageUIWrapper.toggleGridFilter(c,
{dateFormat:pvi.util.getDateFormats.listDateFormat.toUpperCase()});c.find("thead.filter-head").toggleClass("pv-filter-active")});c.find(".btn-select-all-checklist input").click(function(){c.find(".pv-include-cases-list input").prop("checked",$(this).prop("checked"))});c.find(".pv-include-cases-list input").on("change",function(){c.find(".btn-select-all-checklist input").prop("checked",a())});var a=function(){var a=c.find(".pv-include-cases-list input[caseState]:checked").length,b=c.find(".pv-include-cases-list input[caseState]").length;
return a===b};c.find("#range-factor-field").keydown(function(a){-1!==[46,8,9,27,13,110,190].indexOf(a.keyCode)||65===a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||67===a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||88===a.keyCode&&(!0===a.ctrlKey||!0===a.metaKey)||35<=a.keyCode&&39>=a.keyCode||(a.shiftKey||48>a.keyCode||57<a.keyCode)&&(96>a.keyCode||105<a.keyCode)&&a.preventDefault()});c.find("#range-factor-field").keypress(function(a){return 13!==a.which});c.find("#simpleSearchField").keyup(function(a){if(13===
a.keyCode)return(a=da())&&k(JSON.stringify(a)),!1});c.find("#pviListDateRange>option[value="+defaultDateRangeKey+"]").prop("selected",!0);c.find("#pviListDateRange").trigger("change");c.find("#range-factor-field").val(defaultDateRangeValue)})();T||pvi.util.bindDatePickers();pvi.util.select2Fields();za();var A=function(){C.columns().every(function(){var a=parseInt(getConfig("typeAhead.listFilterDelay"));c.find($(this.header())).on("input change",".list-filter",$.debounce(a,function(a){a=$(a.target);
var c=a.attr("data-field"),g=a.val();a.hasClass("date-time-filter")&&(g=pvi.util.generateDateRange(g,c));b.DataTable().column(c+":name").search(g);n();"intakeCaseNumber"===c&&(M=!0)}));c.find($(this.header())).on("click",".list-filter, .dropdown-list-filter",function(a){a.stopPropagation()});c.find($(this.header())).on("keypress",".list-filter",function(a){13===a.keyCode&&a.stopPropagation()})})};A();(function(){c.find(".allCasesButton").click(function(){var a=C.column("assignedToUsername:name");
a.search("");$(a.header()).find("#assignee-filter").val("").trigger("change.select2");Sa();n()})})();(function(){c.find(".myCasesButton").click(function(){var a=C.column("assignedToUsername:name");a.search(loginUser);$(a.header()).find("#assignee-filter").val(loginUser).trigger("change.select2");Sa();n()})})();(function(){var a=function(a,b,c){var g=0,e=function(a){return _.find(c,function(b){return b.name===a}).seq};return _.reduce(a.children("a.list-group-item"),function(a,c){c=$(c);var m=c.html();
c=c.attr("data-field");var k={};k.label=m;k.name=c;k.containerView=b;k.seq=e(c);k.listOrder=g++;a.push(k);return a},[])};c.find("#config-view-bt").click(function(){pvui.grid.utils.manageListingUI.showSettingPanel()});c.find("#btnSaveListConfig").unbind("click").on("click",function(b){b.preventDefault();itemDragged?(pvui.common.showPVLoader(),setTimeout(function(){c.find(".list-filter").show();c.find(".select2-container").show();pvui.grid.manageUIWrapper.toggleGridFilter(c,{dateFormat:pvi.util.getDateFormats.listDateFormat.toUpperCase()});
var b=a(c.find(".list-group-primary"),1,W),b=b.concat(a(c.find(".list-group-secondary"),2,W));W=b=b.concat(a(c.find(".list-group-optional"),3,W));pvi.list.commonFunctions.setColumnVisibility(W,C);q();bb();pvui.grid.utils.manageListingUI.hideSettingPanel()},0)):pvui.grid.utils.manageListingUI.hideSettingPanel()});c.find(".display-config-field, .display-config-field2, .display-config-field3").sortable({connectWith:".short-field"}).disableSelection();var b=[];c.find(".display-config-field, .display-config-field2, .display-config-field3").each(function(a,
c){b.push(c.innerHTML)});var g=function(){qa(getMessage("close_btn_warning_title"),getMessage("close_btn"),"No","Yes",function(){c.find(".display-config-field, .display-config-field2, .display-config-field3").each(function(a,c){c.innerHTML=b[a]});itemDragged=!1;pvui.grid.utils.manageListingUI.hideSettingPanel()})};B.on("click",function(a){a.stopPropagation()});pvui.grid.manageUIWrapper.closeSettingPanel(g,c.find("#btnCloseListConfig"));pvui.grid.manageUIWrapper.closeSettingPanel(g)})();(function(){c.find(".inp-display-record").change(function(){var a=
c.find(".inp-display-record").val();C.page.len(a);n(!1)})})();(function(){c.find(".grid-top-head").on("click","ul.bulk-action-list>li.bulk-action",function(b){var g=_.collect(_.filter(c.find(".list-row-checkbox:checked")),function(a){return $(a).attr("data-id")}),m=[],k=[],n=[],r=[],w=[],q=[];_.each(c.find(".list-row-checkbox:checked"),function(a){a=$(a).data();a.vendorId&&m.push(a.vendorId);a.productids&&(isNaN(a.productids)?_.each(a.productids.split(","),function(a){!_.isUndefined(a)&&a&&k.push(parseInt(a))}):
k.push(a.productids));a.countryid&&n.push(a.countryid);a.studyid&&r.push(a.studyid);a.assigntoid&&w.push(a.assigntoid);q.push(a.isclinicaltrial)});var C=$(this).find("a"),A=C.data("action"),B=C.data("container");switch(A){case activeStateId:a({toStateId:activeStateId,action:A,ids:g},B);break;case rejectedStateId:var L={actionPerformed:A,toStateId:rejectedStateId,ids:g};pvi.util.justificationModule().showJustificationModal("mark_reject",L,e);break;case finalStateId:qa("",getMessage("submit_btn"),pvi_constants.cancel_btn_label,
pvi_constants.success_btn_label,function(){a({toStateId:finalStateId,action:A,ids:g},B)})}if(C.parent().hasClass("assignAll")){var L={},x=$("#assigneeUserList");x.select2({dropdownParent:pvi.util.caseJustification.justificationModal});L.countryIds=_.unique(n);0<k.length&&(L.productIds=_.unique(k));!_.isUndefined(r)&&r&&(L.studyIds=_.unique(r));L.isClinicalTrial=_.unique(q);m&&(L.vendorIds=_.unique(m));w&&(L.assignToIds=_.unique(w));$.ajax({url:pvi_urls.case_assignee_user_list_url,data:{data:JSON.stringify(L)},
type:"POST",async:!0,success:function(a){x.html("").append(new Option(getMessage("select_default_text"),0,!0,!0));a=JSON.parse(a);_.each(a,function(a){x.append(new Option(a.username,a.id,!1,!1))});pvi.util.manageUserAssign.userCaseAssignmentLogic(b,x,x,C,null,g,$("#assigneeUserList :selected").val(),B)}})}})})();(function(){c.find(".pv-list-table").on("click","button.noActionAllowed",function(a){a.preventDefault();swal("",getMessage("no_action_state")+c.find(this).attr("data-case-state")+" State",
"");return!1})})();(function(){c.find(".grid-top-head").on("click","button.noBulkActionAllowed",function(a){a.preventDefault();swal("",getMessage("no_bulk_action_state"),"");return!1})})();Qa();r=x&&!m.caseIdAvailable?!1:!0;n(!1);pvui.grid.utils.htmlOverflowYHidden()},Va=function(){return _.find(W,function(a){return 2===a.containerView})},bb=function(){Va()?b.removeClass("no-secondary"):b.addClass("no-secondary")},sa=function(a,b){var c=_.filter(W,function(b){return b.containerView===a.cId});b&&(c=
c.sort(function(b,c){b=b[a.sortByProp];c=c[a.sortByProp];if("string"===typeof b||b instanceof String)return b.localeCompare(c,void 0,{sensitivity:"base"});if("number"===typeof b)return b-c}));return c},Za=function(){var b=function(a){var b=!0;c.find(".list-row-checkbox:checked").each(function(){if($(this).data("case-state")!==a)return b=!1});return b};return{init:function(g){var e=c.find(".btn-caselist-action-all");e.removeClass("noBulkActionAllowed");var m=g?c.find(".list-row-checkbox:checked").eq(0).data("case-state"):
!1,k=g?b(m):!1;if(g){e.removeClass("hide");m={tmplName:"bulkAction",pageId:F,dataObj:{caseStateId:m,containerId:a}};m=pvi.util.manageActionViews().initBulk(m);""===m&&e.addClass("noBulkActionAllowed");var n=c.find("#bulkActionContainer");n.find("ul").remove();n.html(n.html()+m)}g&&!k?c.find(".bulk-action-list").find("li.bulk-action:not(.assignAll)").addClass("hide"):g||e.addClass("hide")}}}(),Ja=function(){c.find(".pv-caselist-checkall").prop("checked",!1)},za=function(){var e=c.find("#list-data-elements"),
k=e.data("order-by-default"),n=e.data("paging"),q=e.data("length-change"),B=e.data("show-info"),aa=e.data("is-widget"),K=e.data("clear-cache-on-refresh"),e=function(a){var b=_.find(W,function(b){return b.name===a&&1===b.containerView});return!_.isEmpty(b)},S=function(a,b){var c="";a&&a.value&&(c="undefined"===typeof b||b?pvi.util.encodeToHTML(a.value):a.value);return c},za=function(a,b){var c="";a&&a.name&&(c="undefined"===typeof b||b?pvi.util.encodeToHTML(a.name):a.name);return c},wa={"class":"attachmentRow",
"data-filename":"name","data-storageid":"id","data-redact":"redact"},I=function(a,b){var c="";if(b&&0<b.length){b=b.trim().replace(/, /g,",").split(",");for(var c=[],e=b.length,g=0;g<e;g++)b[g]&&c.push(b[g]);c=c.join(", ");b=pvi.util.encodeToHTML(c);c=b.replace(/"/g,"'");c='<span class="one-row-elipsis pvjs_outer-more-box" data-name="'+a+'" data-more="'+c+'"><span class="pvjs_inner-more-box">'+b+"</span></span>"}return c},V=function(a,b,c,e){var g="";if(b&&0<b.length){for(var g=[],m=b.length,k=0;k<
m;k++)b[k]&&g.push(b[k][c]);g=g.join(", ");"undefined"===typeof e||e?(b=pvi.util.encodeToHTML(g),e=pvi.util.convertToSingleQuote(b)):e=b=g;g='<span class="one-row-elipsis pvjs_outer-more-box" data-name="'+J(a,!0)+'" data-more="'+e+'"><span class="'+("link"===c?"pvjs_inner-more-box disableHtmlEncode":"pvjs_inner-more-box")+'">'+b+"</span></span>"}return g},J=function(a,b){a=pvi.util.encodeToHTML(a);"undefined"!==typeof b&&b&&(a=pvi.util.convertToSingleQuote(a));return a},ea=function(a,b,c){b="undefined"===
typeof c||c?J(b):b;return 1===a?_.isEmpty(b)?"":b:""},e=[{data:"selected",render:function(a,b,c){a=c.products.map(function(a){if(a.id)return a.id});b=c.sourceDbId===pvi_constants.source_db_safety?"":c.intakeCaseNumber;return'<div class="td-box"><input type="checkbox" name= "listRowCheckbox" class="list-row-checkbox" data-id='+J(c.id,!0)+' class="copy-select" data-intake-case-num="'+J(b,!0)+'"data-isClinicalTrial="'+(c.sourceType?J(c.sourceType.isClinicalTrial,!0):!!c.studyId)+'" data-safety-case-num="'+
J(c.safetyCaseNumber,!0)+'" data-case-state="'+J(c.caseStateId,!0)+'" data-intake-case-version="'+J(c.version,!0)+'" data-vendor-id="'+J(c.vendorId,!0)+'" data-countryId="'+(c.caseCountry?J(c.caseCountry.id,!0):"")+'" data-studyId="'+J(c.studyId,!0)+'" data-assignToId="'+J(c.assignedTo,!0)+'"" data-productIds="'+J(a,!0)+'"></div>'},orderable:!1,name:"selected",className:"snum"},{data:"intakeCaseNumber",name:"intakeCaseNumber",orderable:!0,visible:!0,className:"col-intake-case",render:function(a,b,
c){return'<a href="#" class="link-to-fce" data-source-db ="'+J(c.sourceDbId,!0)+'" data-id='+J(c.id,!0)+">"+(a?J(a):"")+"</a>"}},{data:"caseVersion",name:"caseVersion",visible:e("caseVersion"),className:"col-case-version",orderable:!0,render:function(a){return J(a)}},{data:"firstReceiptDateString",name:"firstReceiptDate",visible:e("firstReceiptDate"),className:"col-first-rdate",render:function(a){return J(a)}},{data:"reporterQualification",name:"reporters.qualificationValue",visible:e("reporters.qualificationValue"),
className:"col-reporter-type",orderable:!0,render:function(a,b,c){return c.reporterQualification?J(c.reporterQualification.value):""}},{data:"events",name:"events.eventName",visible:e("events.eventName"),orderable:!1,className:"col-case-events",render:function(a){return V("events",a,"eventName")}},{data:"products",name:"products.name",visible:e("products.name"),orderable:!1,className:"col-case-products",render:function(a){return V("products",a,"name")}},{data:"caseSeriousness",name:"caseSeriousness.category",
visible:e("caseSeriousness.category"),className:"col-case-ser",orderable:!0,render:function(a){return a?J(a):""}},{data:"priority",name:"priority.value",visible:e("priority.value"),sWidth:"40px",orderable:!0,className:"col-case-priority",render:function(a,b,c){b="";if(1===c.sourceDbId){a=S(a);b=pvi.util.manageCasePriority.getSelectView(c.id);var e=c.priorityJustification?c.priorityJustification:"",e='&nbsp <i id="priorityLog" class="more-option md md-information pv-priority-log allow-text'+(e?"":
" hidden")+'" data-moredata="'+J(e,!0)+'" data-id="'+J(c.id,!0)+'"></i>';a||(a=pvi_constants.case_no_priority_select);b="<span class='"+pvi.util.manageCasePriority.getClasses(a)+"'><span class='more-option pv-ic-priority' data-priority-select-id='"+J(c.id,!0)+"' data-target-event='click' data-content='"+b+"'>"+a+"</span>"+e+"</span>"}return b}},{data:"attachments",className:"pv-col-attachment",name:"attachments.name",visible:e("attachments.name"),orderable:!1,render:function(a){var b="";if(a&&!_.isEmpty(a[0])){for(var b=
a.length,c=0;c<b;c++){var e=a[c],g="";for(prop in wa){var m=e[wa[prop]];_.contains(["class"],prop)&&(m=wa[prop]);"data-redact"===prop&&!0===e.isRedactExists&&(m=!0);g+=prop+"='"+m+"' "}a[c].link=!0===e.isProtected?!0===e.isRedactExists?"<span class='pv-ic-redact ic-sm'><i class='md md-alpha-r-box-outline'></i> </span><a href='javascript:void(0)' "+g+">"+e.name+"</a>":"<a href='javascript:void(0)' class='pii showUnauthorisedMessage'>"+e.name+"</a>":"<a href='javascript:void(0)' "+g+">"+e.name+"</a>"}b=
V("attachments",a,"link",!1)}return b}},{data:"dueDateString",name:"dueDate",visible:e("dueDate"),className:"col-due-date",render:function(a,b,c){a="";1===c.sourceDbId&&(a=c.dueDateJustification?'<i class="fa fa-info-circle more-option m-l-5 allow-text" data-moredata="'+J(c.dueDateJustification,!0)+'"></i>':"",a='<span class="flex-box"><span class="lbl-elipsis lbl-elipsis-inline">'+(c.dueDateString?c.dueDateString:"")+"</span>"+a+"</span>");return a}},{data:"isRelated",name:"isRelated",className:"col-is-related",
visible:e("isRelated"),render:function(a){return J(a)}},{data:"assignedToUsername",name:"assignedToUsername",visible:e("assignedToUsername"),className:"pv-col-editable col-assigned-to",render:function(a,b,c){b="";if(1===c.sourceDbId)if(a=pvi.util.manageUserAssign.assignedUserName(a),b=c.isAssignmentHistory?"&nbsp <i id='assignedToLog' class='fa fa-info-circle pv-caseAssign-log ' data-id='"+J(c.id)+"'></i>":"",0===c.userRoles.length)b=a;else{var e=c.products.map(function(a){if(a.id)return a.id});b=
'<span class="assign-user-box"><a href="#" data-type="select2" data-countryId= "'+J(c.caseCountry?c.caseCountry.id:"",!0)+'" data-productIds="'+e+'" data-pk="'+J(c.id,!0)+'" data-assingeeId="'+J(c.assignedTo,!0)+'" data-isClinicalTrial="'+(c.sourceType?J(c.sourceType.isClinicalTrial,!0):!!c.studyId)+'" data-studyId="'+J(c.studyId,!0)+'" data-vendorId="'+J(c.vendorId,!0)+'" data-url="'+pvi_urls.case_assignee_user_list_url+'" data-value="ru" data-title="Select User" class="assignUser manageAssignUser lbl-elipsis lbl-elipsis-inline">'+
J(a)+'</a><select class="form-control select2 hide displayUserList" disabled></select>'+b+"</span>"}return b}},{data:"safetyCaseNumber",name:"safetyCaseNumber",className:"col-safety-cnumber",visible:e("safetyCaseNumber"),render:function(a,b,c){return'<a href="#" class= "'+(c.sourceDbId===pvi_constants.source_db_safety||c.safetyCaseExists?"safety-link-to-fce":"safety-link-to-fce safety-link-not-exists")+'" data-source-db="'+J(c.sourceDbId,!0)+'" data-id='+J(c.id,!0)+">"+(a?J(a):"")+"</a>"}},{data:"reportType",
name:"reportType",className:"col-report-type",visible:!1,render:function(a){return J(a)}},{data:"patientAge",name:"patientAge",visible:e("patientAge"),className:"col-patient-age",orderable:!1,render:function(a){return J(a)}},{data:"gender",name:"gender.value",visible:e("gender.value"),className:"col-list-gender",orderable:!0,render:function(a){return S(a)}},{data:"destination",name:"icsr.destination",className:"col-list-destination",visible:e("icsr.destination"),render:function(a,b,c){return ea(c.sourceDbId,
a)}},{data:"reportDueDateString",name:"icsr.dueDate",className:"col-report-duedate",visible:e("icsr.dueDate"),render:function(a,b,c){return ea(c.sourceDbId,a)}},{data:"reporterComments",name:"reporterComments",visible:e("reporterComments"),orderable:!1,className:"col-reporter-comments",render:function(a){return'<span class="one-row-elipsis pvjs_outer-more-box" data-more="'+J(a,!0)+'"><span class="pvjs_inner-more-box">'+J(a)+"</span>"}},{data:"reporters",name:"reporters.name",visible:e("reporters.name"),
className:"col-reporter-name",render:function(a){return V("reporters",a,"name")}},{data:"senderType",name:"senderType.value",visible:e("senderType.value"),className:"col-sender-type",orderable:!0,render:function(a,b,c){return ea(c.sourceDbId,S(a,!1))}},{data:"senderName",name:"senderName",className:"col-sender-name",visible:e("senderName"),render:function(a,b,c){return ea(c.sourceDbId,a)}},{data:"eventCountry",name:"eventCountry.name",visible:e("eventCountry.name"),className:"col-event-country",render:function(a){return za(a)}},
{data:"reportVersion",name:"icsr.reportVersion",className:"col-report-version",visible:e("icsr.reportVersion"),render:function(a,b,c){return ea(c.sourceDbId,a)}},{data:"icsr",name:"icsr.transmissionStatus",visible:e("icsr.transmissionStatus"),className:"pv-col-editable col-icsr-trans",render:function(a,b,c){return 1===c.sourceDbId?(b="",a&&(b=_.isEmpty(a.reportMessage)?"":"&nbsp <i class='fa fa-info-circle more-option reportStateMessage' data-content='<p>"+J(a.reportMessage)+"</p>'></i>",b="<span class='lbl-elipsis lbl-elipsis-inline'><a href='javascript:void(0)' data-id="+
a.id+" class='reportState'>"+J(a.transmissionStatus)+"</a>"+b+"</span>"),b):""}},{data:"stateTimestampString",name:"icsr.stateTimestamp",className:"col-state-timestamp",visible:e("icsr.stateTimestamp"),render:function(a,b,c){return ea(c.sourceDbId,a)}},{data:"reportMessage",name:"icsr.reportMessage",visible:e("icsr.reportMessage"),className:"col-report-message",orderable:!1,render:function(a,b,c){a=ea(c.sourceDbId,a);return'<span class="one-row-elipsis pvjs_outer-more-box"><span class="pvjs_inner-more-box" data-type-string="true">'+
a+"</span></span>"}},{data:"eventName",name:"eventName",className:"col-event-name",visible:e("eventName"),render:function(a){return J(a)}},{data:"eventStartDate",name:"eventStartDate",className:"col-event-startdate",visible:e("eventStartDate"),render:function(a){return J(a)}},{data:"outcome",name:"outcome.value",visible:e("outcome.value"),className:"col-list-outcome",render:function(a){return S(a)}},{data:"reporterCountry",name:"reporters.countryName",visible:e("reporters.countryName"),className:"col-reporter-country",
orderable:!0,render:function(a,b,c){return c.reporterCountry?J(c.reporterCountry.name):""}},{data:"relatednessString",name:"relatednessString",className:"col-relatedness-str",visible:e("relatednessString"),render:function(a){return J(a)}},{data:"sourceType",name:"sourceType.type",visible:e("sourceType.type"),className:"col-source-type",render:function(a){return a&&a.type?J(a.type):""}},{data:"categories",name:"categories.value",visible:e("categories.value"),orderable:!1,className:"col-list-categories",
render:function(a,b,c){return a&&1===c.sourceDbId?(_.collect(a,function(a){return a.value}).join(", "),V("categories",a,"value")):""}},{mData:"mostRecentReceiptDateString",name:"mostRecentReceiptDate",sWidth:"40px",className:"col-most-rrdate",visible:e("mostRecentReceiptDate"),render:function(a){return J(a)}},{data:"productName",name:"productName",visible:e("productName"),className:"col-product-name",render:function(a){return J(a)}},{data:"substances",name:"substances.nameValue",visible:e("substances.nameValue"),
className:"col-list-substances",orderable:!1,render:function(a){return V("substances",a,"nameValue")}},{data:"studyNumber",name:"studyNumber",className:"col-study-number",visible:e("studyNumber"),render:function(a){return J(a)}},{data:"caseState",name:"caseState",className:"col-case-state",visible:e("caseState"),render:function(a,b,c){b="";1===c.sourceDbId&&(c=c.stateChangeComment,c=_.isUndefined(c)||!c?"":c.replace(/'/g,"&#39;"),b="<div>"+a+(c?"&nbsp <i class='fa fa-info-circle more-option allow-text stateChangeComment' data-content='"+
c+"'></i>":"")+"</div>");return b}},{data:"versionType",name:"versionType.value",visible:!1,className:"col-version-type",render:function(a){return S(a)}},{data:"receiptDateString",name:"receiptDate",visible:e("receiptDate"),className:"col-receipt-date",orderable:!1,render:function(a){return J(a)}},{data:"onsetDate",name:"onsetDate",visible:e("onsetDate"),className:"col-onset-date",orderable:!0,render:function(a){return J(a)}},{data:"submissionDate",name:"submissionDate",className:"col-submission-date",
visible:!1,render:function(a){return J(a)}},{data:"dosageForm",name:"dosageForm.value",visible:e("dosageForm.value"),className:"col-dosage-form",render:function(a){return S(a)}},{data:"caseVersionType",name:"caseVersionType",className:"col-case-vtype",visible:!1,render:function(a){return J(a)}},{data:"icsrType",name:"icsr.type",className:"col-icsr-type",visible:e("icsr.type"),render:function(a){return J(a)}},{data:"studyType",name:"studyType.value",visible:e("studyType.value"),className:"col-study-type",
render:function(a){return S(a)}},{data:"patientName",name:"patientName",visible:e("patientName"),className:"col-patient-name",render:function(a){return J(a)}},{data:"seriousness",name:"seriousnessString",visible:e("seriousnessString"),className:"col-list-ser",orderable:!1,render:function(a){return V("seriousness",a,"shortName")}},{data:"caseCountry",name:"caseCountry.name",visible:e("caseCountry.name"),className:"col-case-country",render:function(a){return za(a)}},{data:"allReferences",name:"allReferences",
visible:e("allReferences"),orderable:!1,className:"col-all-ref",render:function(a,b,c){return 1===c.sourceDbId?J(a):I("allReferences",a)}},{data:"patientId",name:"patientId",className:"col-patient-id",visible:e("patientId"),render:function(a){return J(a)}},{data:"dobString",name:"dob",className:"col-list-dob",visible:e("dob"),render:function(a){return J(a)}},{data:"matchScore",name:"matchScore",visible:e("matchScore"),orderable:!0,className:"matchScore col-match-score",render:function(a){return J(a)}},
{data:"simpleSearch",name:"simpleSearch",visible:!1,className:"col-simple-search",render:function(a){return J(a)}},{data:"dateRangeSearch",name:"dateRangeSearch",className:"col-daterange-search",visible:!1,render:function(a){return J(a)}},{data:"sourceDb",name:"sourceDb",visible:e("sourceDb"),className:"col-source-db",orderable:!0,render:function(a){return J(a)}},{data:"safetyWFState",name:"safetyWFState",visible:e("safetyWFState"),className:"col-safety-wfstate",orderable:!0,render:function(a){return J(a)}},
{data:"centralReceiptDateString",name:"centralReceiptDate",visible:e("centralReceiptDate"),className:"col-central-receipt-date",orderable:!0,render:function(a){return J(a)}},{data:"localSubmissionDateString",name:"localSubmissionDate",visible:e("localSubmissionDate"),className:"col-local-submission-date",orderable:!0,render:function(a){return J(a)}},{data:"localSubmissionDueDateString",name:"localSubmissionDueDate",visible:e("localSubmissionDueDate"),className:"col-local-submission-due-date",orderable:!0,
render:function(a){return J(a)}},{data:"latestAssignmentComment",name:"latestAssignmentComment",visible:e("latestAssignmentComment"),orderable:!1,className:"col-assignment-comments",render:function(a){var b="",c="";a&&(b=pvi.util.htmlEncode(a),c=pvi.util.convertToSingleQuote(b));return'<span class="one-row-elipsis pvjs_outer-more-box" data-more="'+c+'"><span class="pvjs_inner-more-box">'+b+"</span></span>"}},{data:"vendor",name:"vendor",visible:e("vendor"),className:"col-case-vendor",orderable:!0,
render:function(a){return J(a)}},{data:"replacementRequired",name:"replacementRequired",visible:e("replacementRequired"),className:"col-replacement-required",orderable:!0,render:function(a){return J(a)}},{data:"caseCreatedDate",name:"caseCreatedDate",visible:e("caseCreatedDate"),className:"col-case-date-created",orderable:!0,render:function(a){return J(a)}},{data:"reporters",name:"reporters.organization",visible:e("reporters.organization"),className:"col-case-reporter-organization",orderable:!0,render:function(a){return V("reporters",
a,"organization")}},{data:"reporters",name:"reporters.department",visible:e("reporters.department"),className:"col-case-reporter-department",orderable:!0,render:function(a){return V("reporters",a,"department")}},{data:"reporters",name:"reporters.address",visible:e("reporters.address"),className:"col-case-reporter-address",orderable:!0,render:function(a){return V("reporters",a,"address")}},{data:"reporters",name:"reporters.telephone",visible:e("reporters.telephone"),className:"col-case-reporter-telephone",
orderable:!0,render:function(a){return V("reporters",a,"telephone")}},{data:"reporters",name:"reporters.faxNumber",visible:e("reporters.faxNumber"),className:"col-case-reporter-fax",orderable:!0,render:function(a){return V("reporters",a,"faxNumber")}},{data:"reporters",name:"reporters.email",visible:e("reporters.email"),className:"col-case-reporter-email",orderable:!0,render:function(a){return V("reporters",a,"email")}},{data:"pqcCaseNumber",name:"pqcCaseNumber",className:"col-pqc-cnumber",visible:e("pqcCaseNumber"),
render:function(a){return J(a)}},{data:"returnRequired",name:"returnRequired",visible:e("returnRequired"),className:"col-case-returnRequired",orderable:!0,render:function(a){return J(a)}},{data:"refundRequested",name:"refundRequested",visible:e("refundRequested"),className:"col-case-refundRequested",orderable:!0,render:function(a){return J(a)}},{data:"reporters",name:"reporters.contactTypes.value",visible:e("reporters.contactTypes.value"),className:"col-case-reporter-contact-types",orderable:!1,render:function(a){if(a)return a=
_.collect(a[0].contactTypes,function(a){return J(a.value)}).join(", "),I("contactTypes",a)}},{data:"action",orderable:!1,className:"pv-table-action",render:function(b,c,e){e.isList=!0;e.containerId=a;e.actionVisible=G;return pvi.util.manageActionViews().init({tmplName:"viewAction",pageId:F,dataObj:e})}}],ma=[null,null,null,null,null,null,null,null,null,null,null,null,{search:loginUser},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,
null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,{search:'{ "firstReceiptDate" : '+oa()+', "caseStateId" : "'+na()+'", "sourceDbId" : "'+la().join(",")+'"}'},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];Q=e.length;var Ea=g+":DataTable",ra=function(){var a=pvi.referenceDataUtil.manageReferenceData.getListReferenceData("clinical-trials"),b=$("#duplicateSearchForm select[name='safetyData.sourceType.id']").val(),
c=$("input[name^='safetyData.study']").closest(".template-control");a&&(0<=a.indexOf(parseInt(b))?(c.removeClass("hide"),$("#studyName").addClass("hide"),$("#patientPatientId").removeClass("hide").find("input").removeClass("hide")):(c.addClass("hide"),$("#patientPatientId").addClass("hide").find("input").addClass("hide").val("")))},Z=function(){var a=[];_.each($("div.pv-head-config").find("input:checkbox"),function(b){b.checked&&a.push($(b).data("id"))});_.each($("#duplicateSearchForm").find(".template-control"),
function(b){b=$(b);var c=b.attr("id");(0<a.length&&0>a.indexOf(c)||0===a.length)&&b.addClass("hide")});ra()},Ra=function(a,b){return a?(a=JSON.parse(a))&&a.gte&&b?moment.utc(a.gte).format(b):"":""},ja=function(){pvui.grid.utils.setGridHeight(c);C.fixedColumns().update();if(M){var a=c.find("input[data-field='intakeCaseNumber']:visible");a.focus();var b=a.val();a.val("").val(b);M=!1}};c.on({"shown.bs.collapse":function(){ja()},"hidden.bs.collapse":function(){ja()}},"#accordion-searchcase");$(document).on("click",
".pdfView",function(){var a=$(this).find("a").attr("href");window.location.href=pvi.util.updateUrlQueryStringParameter(a,"templateId","")});(function(){ka.loadVisibilityState();$("li.field-visible").each(function(){var a=$(this);if(!a.hasClass("click-disabled")){var b=a.find(":checkbox")[0],a=a.data("id"),a=-1<$(b).data("class").indexOf(pvi_constants.duplicateFieldIdClass)?pvi.util.includeDuplicateFields(a):pvi.util.excludeDuplicateField(a);b.checked=!a.hasClass("hide")}});x&&Z();!D&&K&&(ka.clearSelectively(),
manageSessionStorage.removeItem(Ea));ka.loadState(g)})();b.on("draw.dt",function(){Sa()});var pa=function(a){return $.Deferred(function(b){r?(n||(m.length=A),m.loadData=!0,_.extend(a,m),$.ajax({url:eb(pvi_urls.case_list_data_url),type:"POST",data:a,beforeSend:function(){T?pvui.common.pvWidgetLoader.showLoader(c):pvui.common.showPVLoader()},success:function(a){b.resolve({data:a})},complete:function(){m.loadData=!1;T?pvui.common.pvWidgetLoader.hideLoader(c):pvui.common.hidePVLoader()}})):b.resolve({data:{recordsTotal:0,
myRecordsTotal:0,recordsFiltered:0,data:{}}})})};w=C=b.DataTable({ordering:!0,searching:!0,stateSave:!0,stateDuration:-1,serverSide:!0,processing:!0,dom:"rtip",scrollCollapse:!0,renderer:"bootstrap",scrollX:!0,fixedColumns:{leftColumns:2},scrollY:pvui.grid.utils.getGridHeight(c),colReorder:{realtime:!1},order:k,paging:n,lengthChange:q,pageLength:A?A:25,displayStart:0,info:B,pagingType:"full_numbers_no_ellipses",fnInitComplete:function(){$(document).on("change","#eastPanelToggle",function(){pvui.grid.manageUIWrapper.updatePerfectScrollbar(c);
ja()})},lengthMenu:[25,50,100,250],stateLoadParams:function(a,e){ka.loadState(g);if(e){var v=D&&!aa;v||(e.start=0,k&&(e.order=k));n&&e.length&&c.find(".inp-display-record").val(e.length);aa&&(e.length=A?A:5,e.start=0);e.columns&&b.find("thead th").each(function(){try{var a=$(this),b=a.data("idx");if(!v){var f=a.attr("data-field");if("simpleSearch"!==f)void 0===e.columns[b].search&&(e.columns[b].search={}),e.columns[b].search.search="assignedToUsername"!==f||e.columns[b].search.search!==loginUser&&
void 0!==e.columns[b].search.search?"":loginUser;else{var c=JSON.parse(e.columns[b].search.search);"4"==F?c=da():_.each(["firstReceiptDate","mostRecentReceiptDate","submissionDate"],function(a){if(c[a]){var b="string"===typeof c[a]?JSON.parse(c[a]):c[a];if(b.range){var f=L(b.range,b.x);b.gte=f.gte;b.lte=f.lte;c[a]=JSON.stringify(b)}}});e.columns[b].search.search=JSON.stringify(c)}}var g=e.columns[b].search.search;if("string"===typeof g||g instanceof String){var m=a.find("input");m.hasClass("date-time-filter")?
m.val(Ra(g,m.attr("data-precision"))):m.val(g)}}catch(k){console.log(k)}})}return!0},stateSaveCallback:function(a,b){if(!aa)try{var c=JSON.stringify(b);browserStorage.utils.addToStorage(Ea,c);pvi.user.state.saveState(c,g,pvi_page_section_name.datatable_section)}catch(e){console.log(e)}},stateLoadCallback:function(a){a=browserStorage.utils.getFromStorage(Ea);_.isEmpty(a)&&(a=pvi.user.state.loadState(g,pvi_page_section_name.datatable_section).data.data,b.find("thead th[data-field='assignedToUsername'] select").val(loginUser).trigger("change.select2"));
return a?JSON.parse(a):null},ajax:function(a,b,e){pa(a).done(function(a){a=a.data;c.find("#my-cases-count").text(a.myRecordsTotal);var f=0===a.matchingRecordsTotal?a.myRecordsTotal:a.matchingRecordsTotal,e=f;f&&f>A&&(e=getMessage("more_than_matching_msg",{pageLen:A}));c.find("#matching-cases-count").text(e);c.find("#all-cases-count").text(a.recordsTotal);b(a)})},columns:e,searchCols:ma});allCaseListTables.push(C);var va=function(){C.rows().every(function(a){var b=C.row(a);a=b.data();b=b.node();a.passDue&&
!_.contains([pvi_case_state_names.SUCCESSFUL,pvi_case_state_names.REJECTED],a.caseState)&&$(b).addClass("pv-case-overdue")})},ya=function(){b.find("td").each(function(){var a=$(this);a.text()===PIIMaskPattern&&a.addClass("pv-pii").text(PIIMaskString)})},Wa=function(a,b,c,e,g,m,k,n){var H=$("#pv-justification-modal"),r=function(a,f){var h=$("#justificationPassword").val();pvi.util.showSpinDlg(function(){$.ajax({url:pvi_urls.case_state_change,async:!1,type:"POST",data:{data:JSON.stringify({id:parseInt(c),
toStateId:a,actionPerformed:b,comments:f.comments,timestamp:f.timestamp,username:usernameToSavePreference,password:h})},success:function(a){pvui.common.hidePVLoader();var b=JSON.parse(a);_.has(b,"caseStateChanged")&&!b.caseStateChanged?pvi.util.handleCaseStateChangeRejection(b):setTimeout(function(){H.modal("hide");_.each(allCaseListTables,function(a){a.ajax.reload()});pvi.util.showFloatingNotification.successMessage(b.message)},1E3)}})})},h=function(a){$.ajax({url:pvi_urls.case_state_change,type:"POST",
data:{data:JSON.stringify({id:parseInt(c),toStateId:a,actionPerformed:b})},beforeSend:function(){pvui.common.showPVLoader()},success:function(a){var b=JSON.parse(a);422==b.status?(pvi.list.commonFunctions.populateErrorInErrorContainer(b.text.errors,k),C.ajax.reload(),pvui.common.hidePVLoader()):setTimeout(function(){_.each(allCaseListTables,function(a){a.ajax.reload()});pvui.common.hidePVLoader();pvi.util.showFloatingNotification.successMessage(b.message)},1E3)}})},l=$(a.target);if(l.parent("li:first").hasClass("task"))return pvi.util.checkEditLock(c,
function(){var a=l.data("case-country-id"),b=l.data("vendor-Id");taskAction.commonMethod.addTask(c,g,n,null,a,b)}),!1;if(l.parent("li:first").hasClass("followUpQuery"))return pvi.util.checkEditLock(c,function(){followUpQuery.commonMethod.addFollowUpQuery(c,g,n);pvi.util.getCaseData(c)}),!1;if(l.parent("li:first").hasClass("duplicateSearch"))pvi.util.checkEditLock(c,function(){pvi.util.gotoURL(pvi_urls.duplicate_search_url+l.data("case-id"))});else{switch(b){case activeStateId:$(l).parent().hasClass("followUp")?
pvi.util.checkEditLock(c,function(){pvi.util.showFollowUpModal.init({url:pvi_urls.follow_up_url,followUpCaseId:c},followUpFromList,!0)}):pvi.util.checkEditLock(c,h,activeStateId);break;case finalStateId:pvi.util.checkEditLock(c,function(a){qa("",getMessage("submit_btn"),pvi_constants.cancel_btn_label,pvi_constants.success_btn_label,function(){h(a)})},finalStateId);break;case rejectedStateId:pvi.util.checkEditLock(c,function(a){pvi.util.justificationModule().showJustificationModal("mark_reject",a,
r)},rejectedStateId);break;case closedStateId:pvi.util.checkEditLock(c,function(a){pvi.util.justificationModule().showJustificationModal("mark_closed",a,r)},closedStateId);break;case "fullCaseView":window.location.href=fceUrl+"/"+c;break;case "caseEntry":window.location.href=caseEntryUrl+"?templateId="+e+"&id="+c;break;case "case":e===pvi_constants.ack?(a=Aa(pvi_urls.xml_report_url,pvi_constants.ack,c),pvi.util.getXMLReport(a)):e===pvi_constants.e2b?(a=[],a.xmlType=pvi_constants.e2b,a=Aa(pvi_urls.xml_report_url,
pvi_constants.e2b,c),pvi.util.getXMLReport(a)):e===pvi_constants.fu_diff_view&&(a=Aa(pvi_urls.validate_fu_diff_view_url,pvi_constants.fu_diff_view,c),pvi.util.validateFuDiffView(a))}return!0}},Aa=function(a,b,c){return{url:a,xmlType:b,caseId:c}};bb();var Ta=function(){var a=function(a){if(a)return-1!==a.indexOf(".")?a.split("."):a.endsWith("Low")?[a.substring(0,a.indexOf("Low"))]:a.endsWith("WithOrder")?[a.substring(0,a.indexOf("WithOrder"))]:[a]},b=function(b,e,g){var v={seriousnessString:"seriousness.shortName",
dueDate:"dueDateString","caseSeriousness.category":"caseSeriousness",localSubmissionDueDate:"localSubmissionDueDateString",centralReceiptDate:"centralReceiptDateString",localSubmissionDate:"localSubmissionDateString",dob:"dobString","reporters.qualificationValue":"reporterQualification.value","reporters.countryName":"reporterCountry.name"};v[b]&&(b=v[b]);v="caseState assignedToUsername icsr.reportVersion icsr.reportMessage icsr.destination categories.value icsr.stateTimestamp senderType.value icsr.type icsr.dueDate attachments.name senderName dueDateString icsr.transmissionStatus".split(" ");
if(2===g.sourceDbId&&0<=v.indexOf(b))return"";var t=a(b);b="";if(1<t.length){b=t[0];var m=a(t[1]);b=(g=g[b])?_.isArray(g)?g.map(function(a){a=a[m];return _.isArray(a)?t[2]?_.collect(a,function(a){return a[t[2]]}).join(", "):a.join(", "):a}).join(", "):g[m]:""}else b=g[t];if(_.isNull(b)||_.isUndefined(b)||_.isNaN(b)||" "===b)b="";/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/.test(b)&&
(b=moment(b).format(pvi.util.getDateFormats.listDateFormat.toUpperCase()));g=50>b.length?"footable-row-detail-col-md":"footable-row-detail-col-lg";pvui.grid.utils.setGridHeight(c);$(".pv-action-dropdown").hide();return _.isEmpty(b)||b!==PIIMaskPattern?_.isEmpty(b)?"":'<div class="footable-row-detail-col '+g+'"><div class="footable-row-detail-name">'+e+' </div><div class="footable-row-detail-value">'+pvi.util.encodeToHTML(b)+"</div></div>":'<div class="footable-row-detail-col '+g+'"><div class="footable-row-detail-name">'+
e+' </div><div class="footable-row-detail-value pv-pii">'+PIIMaskString+"</div></div>"},e=function(a){if(a){var f=c.find(".DTFC_ScrollWrapper").width()-15,e=c.find(".dataTables_scrollBody").get(0).scrollLeft,g=!1,f='<div class="footable-row-detail-inner" style="width:'+f+"px; margin-left:"+e+'px">',e=_.reduce(sa(pvi_list_columns_view.secondaryCols,!0),function(f,c){c=b(c.name,c.label,a);0<c.length&&(g=!0);return f+c+"\n"},"");return g?f+'<div class="footable-row-detail-row">'+e+"</div></div>":f+'<div class="text-center">'+
getMessage("no_data_secondary_view")+"</div></div>"}return""};return{init:function(a){a=$(a.target).closest("tr").index()+1;var b=c.find(".dataTables_scrollBody>table>tbody>tr:nth-child("+a+")"),f=C.row(b);if(f.child.isShown())b.removeClass("details"),f.child.hide(),c.find(".DTFC_Cloned tbody tr[data-dt-row="+f.index()+'][class*="padding"]').remove(),pvui.grid.manageUIWrapper.updatePerfectScrollbar(c);else if(Va()){a=f.index();var g=e(f.data());b.addClass("details");f=f.child(g).show();g=b.next().addClass("pv-caselist-secodary-view").find(".footable-row-detail-inner").height();
b.next().find("td").css({height:g+"px"});b=$(f.child()).height();c.find(".DTFC_Cloned tbody tr[data-dt-row="+a+"]").after("<tr class='padding' data-dt-row='"+a+"' style='height:"+b+"px'><td colspan='2'></td></tr>");pvui.grid.manageUIWrapper.updatePerfectScrollbar(c)}}}}(),Ba=function(){_.each(c.find(".more-option"),function(a){a=$(a);var b=a.closest(".pvjs_inner-more-box"),c;c=b.hasClass("disableHtmlEncode")?a.data("moredata"):pvi.util.encodeToHTML(a.data("moredata"));var e=a.data("iconview-popover"),
g=e?a.text():"",m=a.data("target-event"),m=m?m:"hover";a.webuiPopover({html:!a.hasClass("allow-text"),trigger:m,content:function(){_.isEmpty(c)&&(c="");var m=_.filter(c.split(","),function(a){return!_.isEmpty(a.trim())}),k="",n="";if(_.isEmpty(m)||b.data("type-string"))n=b.text();else if(e)for(var n=$("<ul class='icon-list'/>"),r=$(a).data("pk"),h=0;h<m.length;h++)k=$("<li><a data-pk='"+r+"' class='"+(m[h]===g?"active":"")+" pop-ic"+m[h]+"'>"+m[h]+"</a></li>"),k.appendTo(n);else for(n=$("<ul class='text-list'/>"),
r=0;r<m.length;r++)m[r]&&(k=$("<li>"+m[r]+"</li>")),k.appendTo(n);return n}})})};C.on("click",".showUnauthorisedMessage",function(){pvi.util.showInfo(getMessage("pii_attachment_warning"))});$(document).on("click",".webui-popover-content .showUnauthorisedMessage",function(){pvi.util.showInfo(getMessage("pii_attachment_warning"))});C.on("click",".list-row-checkbox",function(a){a=$(a.target);var b=a.is(":checked");b||Ja();b&&x&&($("input:checkbox[name='"+a.prop("name")+"']").prop("checked",!1),a.prop("checked",
!0));a=1<c.find(".list-row-checkbox:checked").length;Za.init(a)});C.on("click",".link-to-fce",function(a){a.preventDefault();a=$(this);var b=a.data("source-db");b===pvi_constants.source_db_intake?pvi.util.gotoURL(pvi_urls.show_case_url+a.attr("data-id")+pvi_urls.open_accordion):b===pvi_constants.source_db_safety&&(a={sourceCaseNum:a.text(),sourceDbId:b},pvi.util.fetchLinkedCasesDetails(a))});C.on("click",".safety-link-to-fce",function(a){a.preventDefault();a=$(this);var b=a.data("source-db");a.hasClass("safety-link-not-exists")?
swal("Warning",getMessage("safety_case_not_linked")):b===pvi_constants.source_db_safety?pvi.util.gotoURL(pvi_urls.show_case_url+a.attr("data-id")+pvi_urls.open_accordion):b===pvi_constants.source_db_intake&&(a={sourceCaseNum:a.text(),sourceDbId:b},pvi.util.fetchLinkedCasesDetails(a))});C.on("click",".not-clickable",function(a){swal("warning",getMessage("no_action_state")+$(a.target).attr("data-case-state")+" State")});C.on("mouseenter","span.state-comment",function(a){$(a.target).tooltip()});pvi.util.manageUserAssign.init(R,
Ia);pvi.util.manageCasePriority.init();C.on("click","tr td",function(a){"TD"===a.target.tagName&&Ta.init(a)});$(document).on("click",".pv-action-dropdown a",function(a){a.preventDefault();if(!0!==a.handled){var b=$(a.target),c=b.attr("data-case-id"),e=b.attr("data-intake-case-num"),g=b.attr("data-intake-case-version"),m=b.data("action"),k=b.attr("data-templateId"),n=b.data("case-state"),b=b.data("container");Wa(a,m,c,k,e,n,b,g);a.handled=!0}});C.on("draw.dtfc",function(){var a=c.find("div.DTFC_ScrollWrapper input[data-field=intakeCaseNumber]");
if(3===a.length){var b=$(a[2]).val();$(a[0]).val(b);$(a[1]).val(b)}});C.on("draw.dt",function(){va();c.find(".btn-caselist-action-all").addClass("hide").attr("disabled",!1);c.find(".grid-top-head .dropdown-menu").parent().removeClass("open");Ja();Qa();pvui.grid.manageUIWrapper.setPerfectScrollbar(c);pvui.grid.manageUIWrapper.handleDragDropEvent(c);ja();pvui.grid.utils.updateGridOnResize(c);pvui.common.hidePVLoader();pvui.grid.manageUIWrapper.preventScrollingEmptyGrid(c,R);pvui.grid.manageUIWrapper.handleRowMouseOverEvent(c);
pvui.grid.manageUIWrapper.bindIconHoverEvents(c);pvui.grid.manageUIWrapper.handleGridHorizontalScroll(c);ya();pvui.grid.manageUIWrapper.setMoreOption(c);Ba()});return C},wa=[],Qa=function(){var a=Ra();_.isEqual(wa,a)||(C.colReorder.order(a,!0),wa=a)},Ea=function(a){var b=0;return _.reduce(a,function(a,c){_.has(c,"listOrder")||(c.listOrder=b++);return a=a+'<a href="#" class="list-group-item" data-field="'+c.name+'">'+c.label+"</a>\n"},"")},eb=function(a){a.endsWith("/")||(a+="/");return a+F},Ra=function(){var a=
function(){var a=b.find("thead th");return _.collect(a,function(a){a=$(a);return{idx:a.data("idx"),name:a.attr("data-field")}})},c=function(){var b=a(),c=[],e=sa(pvi_list_columns_view.primaryCols,!0);K?(K=!1,_.each(e,function(a){var e=_.find(b,function(b){return a.name===b.name});e&&c.push(e.idx)})):c=_.collect(e,function(a){var c=_.find(b,function(b){return a.seq===b.idx});return c?c.idx:0});return c};return function(){var a=_.range(0,Q),b=c(),a=_.filter(a,function(a){return!_.contains(b,a)}),a=
b.concat(a),a=_.without(a,0,1,Q-1);a.push(Q-1);a.unshift(1);a.unshift(0);return a}()},Sa=function(){if(r){var a=w.column("assignedToUsername:name"),b=a.search(),e="myCasesButton";"undefined"!==typeof duplicateSearchPageId&&F===duplicateSearchPageId.toString()?(c.find("#assignee-filter").prop("readonly",!0),a.search(""),$(a.header()).find("input.list-filter").val("")):void 0===b||b===loginUser?c.find("#assignee-filter").prop({readonly:!0,disabled:!0}):(c.find("#assignee-filter").prop({readonly:!1,
disabled:!1}),e="allCasesButton");c.find(".myCasesButton, .allCasesButton").removeClass("btn-pointed");c.find("."+e).addClass("btn-pointed")}};$.extend($.fn.dataTable.defaults,{language:{processing:""}});(function(){$.ajax({url:eb(pvi_urls.case_list_columns_url),cache:!1,success:function(a){a&&0<a.length&&(W=_.collect(a,function(a){var b={};b.name=a.name;b.label=a.label;b.seq=a.seq;b.listOrder=a.listOrder;b.containerView=a.containerView;return b}));c.find(".list-group-primary").html(Ea(sa(pvi_list_columns_view.primaryCols,
!0)));c.find(".list-group-secondary").html(Ea(sa(pvi_list_columns_view.secondaryCols,!0)));c.find(".list-group-optional").html(Ea(sa(pvi_list_columns_view.optionalCols,!0)));aa()}})})();(function(){c.on("change","#bulk-select-bt",function(a){a.stopPropagation();a=$(this).is(":checked");c.find(".list-row-checkbox").prop("checked",a);Za.init(a);return!1})})();pvui.grid.utils.appendDropdownOutsideContainer(c,".td-box>.dropdown");pvi.rdl.manageReportDistribution.init();1>$("#isDashboardPage").length&&
pvi.util.bindFileUploaderEvent()};$.fn.DataTable.ext.pager.full_numbers_no_ellipses=function(a,e){var k=[];$.fn.DataTable.ext.pager.numbers_length=5;var k=$.fn.DataTable.ext.pager.numbers_length,g=Math.floor(k/2),n=function(a,c){var b;"undefined"===typeof c?(c=0,b=a):(b=c,c=a);for(a=[];c<b;c++)a.push(c);return a},k=e<=k?n(0,e):a<=g?n(0,k):a>=e-1-g?n(e-k,e):n(a-g,a+g+1);k.DT_el="span";return["first","previous",k,"next","last"]};
(function(){function a(a){return a.replace(a.substr(0,1),function(a){return a.toUpperCase()})}var e="",k=!1,g,n=$("#mic");try{g=!1 in window?new (window.SpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition):new webkitSpeechRecognition}catch(b){g={}}g.continuous=!0;g.interimResults=!0;g.onstart=function(){k=!0};g.onerror=function(a){console.log(a.error)};g.onend=function(){k=!1;$(".search-button").trigger("click")};g.onresult=function(b){for(var g="",k=b.resultIndex;k<b.results.length;++k)b.results[k].isFinal?
(e+=b.results[k][0].transcript,document.getElementById("simpleSearchField").value=e):g+=b.results[k][0].transcript;e=a(e);final_span.innerHTML=e.replace(q,"<p></p>").replace(c,"<br>");interim_span.innerHTML=g.replace(q,"<p></p>").replace(c,"<br>")};var q=/\n\n/g,c=/\n/g;n.click(function(a){a.preventDefault();k?(g.stop(),n.removeClass("fa-microphone"),n.addClass("fa-microphone-slash")):(n.removeClass("fa-microphone-slash"),n.addClass("fa-microphone"),e="",g.lang="en-US",g.interimResults=!1,g.start(),
final_span.innerHTML="",interim_span.innerHTML="")})})();var pvb=pvb||{};
pvb.core=function(){var a=function(a,b){this.final=a;this.othersRequired=b},e="",k=0,g="",n={},q,c,b,m,r={product:new a("licenses.value",["value"]),meddra:new a("llt"),study:new a("number")},C={product:"/PVBRest/searchData",meddra:"/PVBRest/searchMedDRAs",study:"/PVBRest/searchData"},w={},K=function(a,b){var c="";$.ajax({url:"/assets/pv/comp/templates/"+a+".hbs",method:"GET",async:!1,cache:!0,success:function(a){c=a}});return Handlebars.compile(c)(b)},F=function(a){var b="";$.ajax({url:"/assets/pv/comp/templates/"+
a+".hbs",method:"GET",async:!1,cache:!0,success:function(a){b=a}});return b},x=function(a,b){function c(){e||(e=!0,b(a,"ok"))}var e=!1,g=document.createElement("script");g.onload=c;g.onreadystatechange=function(){var a;e||(a=g.readyState,"complete"===a&&c())};g.onerror=function(){e||(e=!0,b(a,"error"))};g.src=a;document.getElementsByTagName("head")[0].appendChild(g)},G=function(a,b){function c(){e||(e=!0,b(a,"ok"))}var e=!1,g=document.createElement("link");g.onload=c;g.rel="stylesheet";g.href=a;g.onreadystatechange=
function(){var a;e||(a=g.readyState,"complete"===a&&c())};g.onerror=function(){e||(e=!0,b(a,"error"))};g.src=a;document.getElementsByTagName("head")[0].appendChild(g)},D=function(a,b){b&&(w={});qa(a);a.find(".selected-value-field").html("");a.find(".searchField").val("");a.find("button.addAll").prop("disabled",!0)},I=function(){var a=!1,c=r[m],e=b.find('.column-list-box[data-field-name="'+c.final+'"] a.selectedItem').text();_.isEmpty(w)||_.isEmpty(e.trim())||(a=A(b,c.othersRequired));return a},A=
function(a,b){var c=!0;b&&_.find(b,function(b){var e=a.find('.column-list-box[data-field-name="'+b+'"] a.selectedItem');if(_.isEmpty(e.text())&&1<a.find('a[data-field-name="'+b+'"]').length)return c=!1,!0});return c},B=function(a){if(!_.isEmpty(a)&&!_.isEmpty(a.finalValue)){var c=r[m],e=a[c.final];_.isEmpty(e)?(e=b.find('.list-item[data-field-name="'+c.final+'"]'),1===e.length&&e.click()):b.find('.list-item[data-field-name="'+c.final+'"][data-item-id="'+e+'"]').click();1<Object.keys(a).length&&_.each(b.find(".searchField"),
function(e){e=$(e).attr("data-field-name");c.final!==e&&b.find('.list-item[data-field-name="'+e+'"][data-item-id="'+a[e]+'"]').click()})}},Q=function(a,b){var c,e=b.finalValue;_.isEmpty(e)?(c=_.keys(b)[0],e=b[c]):c=r[m].final;var g=C[a],k,n;n="meddra"===a?function(a){q=T(null,a,{});qa(k);va(k,c);M(k);R(k,c,e,_.sortBy(q[c],"value"));B(b)}:function(a){q=a;qa(k);va(k,c);M(k);la(k,c,e,a);B(b)};return function(b){e?(k=b,$.ajax({url:g,data:{browserType:a,search_field:c,search_value:e},success:n})):qa(b)}},
M=function(a){a.find(".selected-value-pane .selected-value-field").text("")},T=function(a,b,c){var e=null!=a;_.each(b,function(b){var g=b.type;_.isArray(c[g])?c[g].push(b):c[g]=[b];e&&(b.parent=a);_.has(b,"childEvents")&&null!=b.childEvents&&b.childEvents.length&&T(b,b.childEvents,c)});return c},R=function(a,b,c,e){c=a.find(".column-list-box[data-field-name='"+b+"']");c.html("");var g="";_.each(e,function(a){g+='<a href="#" class="list-group-item list-item" data-item-id="'+a.id+'" + data-field-name="'+
b+'" title="'+a.value+'">'+a.value+"</a>"});c.append(g);var k=function(b){b.preventDefault();b=$(b.target);var c=b.attr("data-item-id"),e=b.attr("data-field-name");a.find(".column-list-box[data-field-name='"+e+"'] a").removeClass("selectedItem");b.addClass("selectedItem");var g=_.find(q[e],function(a){return a.id==c});if(g){var n=r[m];e===n.final?w=g:_.find(q[n.final],function(a){return a.id==w.id})||(w={});g=Ia(g);_.isArray(g)||(g=[g]);g=_.each(W(g,{}),function(a,b){_.sortBy(a,"value")});ka(a,e,
g,k);L(a);ea(a,g)}ya(b)};a.off("click",".list-item").on("click",".list-item",k)},Ia=function(a){var b=a;_.has(a,"parent")&&(b=a.parent,a={id:b.id,value:b.value,type:b.type,childEvents:[a]},_.has(b,"parent")&&(a.parent=b.parent),b=Ia(a));return b},W=function(a,b){_.each(a,function(a){var c=a.type,e=b[c];e&&_.isArray(e)?b[c].push(a):b[c]=[a];_.has(a,"childEvents")&&null!=a.childEvents&&a.childEvents.length&&W(a.childEvents,b)});return b},ka=function(a,b,c,e){a=a.find(".column-list-box[data-field-name!='"+
b+"']");_.each(a,function(a){a=$(a);var b=a.attr("data-field-name"),g=a.find("a.selectedItem");a.html("");var m="";_.each(c[b],function(a){m+='<a href="#" class="list-group-item list-item" data-item-id="'+a.id+'" data-field-name="'+a.type+'" title="'+a.value+'">'+a.value+"</a>"});a.append(m);a.off("click",".list-item").on("click",".list-item",e);_.isEmpty(g)||(b='a.list-item[data-field-name="'+b+'"][data-item-id="'+g.attr("data-item-id")+'"]',a.find(b).addClass("selectedItem"))});return a},na=function(a,
b,c){var e=[],g=b,m=-1<c;m&&(g=b.substr(0,c));_.each(a,function(a){var b=a;m&&(b=a[g]);_.isArray(b)||(b=[b]);_.each(b,function(a){var b=_.find(e,function(b){return _.isEmpty(b)?!1:a.id===b.id});_.isEmpty(b)?e.push(a):_.extend(b,a)})});return e},S=function(a,b,c,e){return'<a href="#" class="list-group-item list-item" data-item-id="'+a.id+'" data-field-name="'+b+'" title="'+c+'" data-index="'+e+'">'+c+"</a>"},la=function(a,b,c,e){var g=a.find(".column-list-box[data-field-name='"+b+"']"),m=-1,k=b.indexOf("."),
n="";if(-1===k)_.each(e,function(a){n+=S(a,b,a[b])});else{var r=b.substr(k+1);e=na(e,b,k);_.isArray(e)?(e=_.filter(e,function(a){return(new RegExp(c,"ig")).test(a[r])}),_.each(e,function(a){n+=S(a,b,a[r],++m)})):n+=S(e,b,e[r],++m)}g.append(n);pa(a)},pa=function(a){a.off("click",".list-item").on("click",".list-item",function(b){b.preventDefault();b=$(this);var c=b.attr("data-field-name");a.find(".column-list-box[data-field-name='"+c+"'] a").removeClass("selectedItem");b.addClass("selectedItem");var e=
oa(a,c,b.attr("data-item-id"));da(a,c,e);L(a);ja(a,c,e);ea(a,e);ya(b)})},ja=function(a,b,c){var e=r[m];if(b===e.final&&1===c.length)w=c[0];else if(b=a.find(".column-list-box[data-field-name='"+e.final+"'] a.selectedItem"),_.isEmpty(b.text()))w={};else{var e=e.othersRequired,g=_.isEmpty(e);if(g||!g&&A(a,e)){var k=b.attr("data-item-id");g||(k=a.find(".column-list-box[data-field-name='"+e[0]+"'] a.selectedItem").attr("data-item-id"));w=_.find(c,function(a){return a.id===parseInt(k)})}else w={}}},oa=
function(a,b,c){var e=b,g=[],m=b.indexOf(".");-1<m&&(e=b.substr(0,m));_.each(q,function(a){var b=a;-1<m&&(b=b[e]);_.isArray(b)?_.each(b,function(b){parseInt(c)===b.id&&g.push(a)}):parseInt(c)===b.id&&g.push(a)});return g},L=function(a,b){b=a.find(".column-list-box[data-field-name!='"+b+"']");_.each(b,function(b){b=$(b);var c=b.attr("data-field-name");(1>b.find("a").length||_.isEmpty(b.find("a.selectedItem").text()))&&a.find('.selected-value-field[data-field-name="'+c+'"]','.searchField[data-field-name="'+
c+'"]').text("")})},da=function(a,b,c){a=a.find(".column-list-box[data-field-name!='"+b+"']");_.each(a,function(a){a=$(a);var b=a.attr("data-field-name"),e=a.find("a.selectedItem");a.html("");var g=-1,m=b.indexOf("."),k="";if(-1===m)_.each(c,function(a){k+=S(a,b,a[b],++g)});else{var n=b.substr(m+1),m=na(c,b,m);"licenses.value"===b&&(_.isEmpty(m)||m.sort(function(a,b){a=a.value.toLowerCase();b=b.value.toLowerCase();return a<b?-1:a>b?1:0}));_.each(m,function(a){_.isArray(a)?_.each(a,function(a){k+=
S(a,b,a[n],++g)}):k+=S(a,b,a[n],++g)})}a.append(k);e.length&&(e='a.list-item[data-field-name="'+b+'"][data-item-id="'+e.attr("data-item-id")+'"]',a.find(e).addClass("selectedItem"))})},V=function(a,b){_.isArray(a)||(a=[a]);var c=[];_.each(a,function(a){a=ma(a,b);_.isEmpty(a)||(_.isArray(a)?_.each(a,function(a){c.push(a)}):c.push(a))});return c=_.unique(c,function(a){return a})},ra=function(a){var b=a;_.isArray(a)&&(b=_.reduce(a,function(a,b){return a?a+","+b:b}));return b},ea=function(a,b){var c=
_.isEmpty(w);_.each(a.find(".selected-value-pane .selected-value-field"),function(e){e=$(e);var g=e.attr("data-field-name"),m=a.find('.column-list-box[data-field-name="'+g+'"] a.selectedItem').text();!c&&_.isEmpty(m)&&(m=V(b,g),_.isEmpty(m)||(m=ra(m)));_.isEmpty(m)||e.text(m)})},ma=function(a,b){var c=b.indexOf(".");if(b&&-1<c){var e=b.substr(0,c);b=b.substr(c+1);a=a[e];return _.isArray(a)?_.pluck(a,b):a[b]}e=a[b];if(_.isArray(e)){if(1===e.length)return e[0].value}else return a[b]},qa=function(a){a.find(".column-list-box").html("")},
va=function(a,b){a=a.find(".searchField[data-field-name!='"+b+"']");_.each(a,function(a){$(a).val("")})},ya=function(a){e=a.attr("data-field-name");r[m].final===e&&(k=a.attr("data-item-id"));b.find("button.addAll").prop("disabled",!I())};return{init:function(a,b,c,e,g){n[b]=e;var m=function(){var e=localStorage.getItem(a+"_browser_template");e||(Handlebars.registerPartial(a+"_template",F(a+"_template")),e=K(a+"_browser",{browserName:b,containerId:c}),localStorage.setItem(a+"_browser_template",e));
$("#"+c).append(e)};g?G("/assets/pv/comp/browser/pv_browser.css",function(){x("/assets/pv/libs/handlebars-v4.0.5.js",function(){m()})}):m()},launch_browser:function(){var a=function(){var a=_.has(n[c],"searchDelay")?n[c].searchDelay:1E3;b.find("input.searchField").off("keyup").on("keyup",$.debounce(a,function(a){if(!(a.ctrlKey||a.altKey||a.metaKey||a.shiftKey)){var e=$(this);g=a=e.val();var k=_.has(n[c],"typeCount")?n[c].typeCount:3;a.length>=k&&(e=e.attr("data-field-name"),k={},k[e]=a,Q(m,k)(b))}}))},
e=function(a){g=a.codedWithSearchString;b.modal({show:!0});b.off("shown.bs.modal").on("shown.bs.modal",function(c){c=a.finalValue;b.find('.searchField[data-field-name="'+r[m].final+'"]').val(c);_.isEmpty(c)?D(b):Q(m,a)(b)})},q=function(a){b.off("click","button.addAll").off("click","button.clearValues");b.on("click","button.addAll",function(c){I()?b.trigger("pvb.item.chosen",{browserType:m,item:w,id:k,browserIndex:a.browserIndex,browserInputName:a.browserInputName,codedWithSearchString:g}):(c.stopPropagation(),
c.preventDefault())});b.on("click","button.clearValues",function(){w=null;D(b)})},C=function(){var a="";b.find(".searchField").off("focus").on("focus",function(){a=$(this).val()});b.find(".searchField").off("focusout").on("focusout",function(){""==$(this).val()&&""!=a&&D(b,!0)})};return{init:function(g,k,n){w={};c=g;b=$("div[name="+g+"]");m=b.attr("pvb-type");a();D(b,!1);e(k);q(n);C();return b}}}(),getValue:ma,parseMeddraList:T,prepareMeddraDataForDisplay:W,buildMeddraPath:Ia}}();
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(a){function e(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(b.target).ajaxSubmit(c))}function k(b){var c=b.target,e=a(c);if(!e.is("[type=submit],[type=image]")){c=e.closest("[type=submit]");if(0===c.length)return;c=c[0]}var g=this;if(g.clk=c,"image"==c.type)void 0!==b.offsetX?(g.clk_x=b.offsetX,g.clk_y=b.offsetY):"function"==typeof a.fn.offset?(e=e.offset(),
g.clk_x=b.pageX-e.left,g.clk_y=b.pageY-e.top):(g.clk_x=b.pageX-c.offsetLeft,g.clk_y=b.pageY-c.offsetTop);setTimeout(function(){g.clk=g.clk_x=g.clk_y=null},100)}function g(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var n,q;n=void 0!==a("<input type='file'/>").get(0).files;q=void 0!==window.FormData;var c=!!a.fn.prop;a.fn.attr2=function(){if(!c)return this.attr.apply(this,
arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)};a.fn.ajaxSubmit=function(b){function e(c){var g,m=a.param(c,b.traditional).split("&"),k=m.length,n=[];for(c=0;k>c;c++)m[c]=m[c].replace(/\+/g," "),g=m[c].split("="),n.push([decodeURIComponent(g[0]),decodeURIComponent(g[1])]);return n}function k(c){for(var g=new FormData,n=0;n<c.length;n++)g.append(c[n].name,c[n].value);if(b.extraData)for(c=e(b.extraData),n=0;n<c.length;n++)c[n]&&
g.append(c[n][0],c[n][1]);b.data=null;n=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:w||"POST"});b.uploadProgress&&(n.xhr=function(){var c=a.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(a){var c=0,e=a.loaded||a.position,g=a.total;a.lengthComputable&&(c=Math.ceil(e/g*100));b.uploadProgress(a,e,g,c)},!1),c});n.data=null;var r=n.beforeSend;return n.beforeSend=function(a,c){c.data=b.formData?b.formData:g;r&&r.call(this,a,c)},a.ajax(n)}
function C(e){function m(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){g("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(c){g("cannot get iframe.contentDocument: "+c),b=a.document}return b}function k(){function b(){try{var a=m(x).readyState;g("state = "+a);a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(c){g("Server abort: ",c," (",c.name,")"),n(T),G&&clearTimeout(G),G=void 0}}var c=F.attr2("target"),
e=F.attr2("action"),r=F.attr("enctype")||F.attr("encoding")||"multipart/form-data";I.setAttribute("target",A);w&&!/post/i.test(w)||I.setAttribute("method","POST");e!=q.url&&I.setAttribute("action",q.url);q.skipEncodingOverride||w&&!/post/i.test(w)||F.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});q.timeout&&(G=setTimeout(function(){K=!0;n(Q)},q.timeout));var B=[];try{if(q.extraData)for(var L in q.extraData)q.extraData.hasOwnProperty(L)&&B.push(a.isPlainObject(q.extraData[L])&&
q.extraData[L].hasOwnProperty("name")&&q.extraData[L].hasOwnProperty("value")?a('<input type="hidden" name="'+q.extraData[L].name+'">').val(q.extraData[L].value).appendTo(I)[0]:a('<input type="hidden" name="'+L+'">').val(q.extraData[L]).appendTo(I)[0]);q.iframeTarget||C.appendTo("body");x.attachEvent?x.attachEvent("onload",n):x.addEventListener("load",n,!1);setTimeout(b,15);try{I.submit()}catch(da){document.createElement("form").submit.apply(I)}}finally{I.setAttribute("action",e),I.setAttribute("enctype",
r),c?I.setAttribute("target",c):F.removeAttr("target"),a(B).remove()}}function n(b){if(!L.aborted&&!Va){if(aa=m(x),aa||(g("cannot access response document"),b=T),b===Q&&L)return L.abort("timeout"),void M.reject(L,"timeout");if(b==T&&L)return L.abort("server abort"),void M.reject(L,"error","server abort");if(aa&&aa.location.href!=q.iframeSrc||K){x.detachEvent?x.detachEvent("onload",n):x.removeEventListener("load",n,!1);var c;b="success";try{if(K)throw"timeout";var e="xml"==q.dataType||aa.XMLDocument||
a.isXMLDoc(aa);if(g("isXml="+e),!e&&window.opera&&(null===aa.body||!aa.body.innerHTML)&&--bb)return g("requeing onLoad callback, DOM not available"),void setTimeout(n,250);var k=aa.body?aa.body:aa.documentElement;L.responseText=k?k.innerHTML:null;L.responseXML=aa.XMLDocument?aa.XMLDocument:aa;e&&(q.dataType="xml");L.getResponseHeader=function(a){return{"content-type":q.dataType}[a.toLowerCase()]};k&&(L.status=Number(k.getAttribute("status"))||L.status,L.statusText=k.getAttribute("statusText")||L.statusText);
var r=(q.dataType||"").toLowerCase(),w=/(json|script|text)/.test(r);if(w||q.textarea){var A=aa.getElementsByTagName("textarea")[0];if(A)L.responseText=A.value,L.status=Number(A.getAttribute("status"))||L.status,L.statusText=A.getAttribute("statusText")||L.statusText;else if(w){var F=aa.getElementsByTagName("pre")[0],da=aa.getElementsByTagName("body")[0];F?L.responseText=F.textContent?F.textContent:F.innerText:da&&(L.responseText=da.textContent?da.textContent:da.innerText)}}else"xml"==r&&!L.responseXML&&
L.responseText&&(L.responseXML=sa(L.responseText));try{ya=Ja(L,r,q)}catch(D){b="parsererror",L.error=c=D||b}}catch(D){g("error caught: ",D),b="error",L.error=c=D||b}L.aborted&&(g("upload aborted"),b=null);L.status&&(b=200<=L.status&&300>L.status||304===L.status?"success":"error");"success"===b?(q.success&&q.success.call(q.context,ya,"success",L),M.resolve(L.responseText,"success",L),B&&a.event.trigger("ajaxSuccess",[L,q])):b&&(void 0===c&&(c=L.statusText),q.error&&q.error.call(q.context,L,b,c),M.reject(L,
"error",c),B&&a.event.trigger("ajaxError",[L,q,c]));B&&a.event.trigger("ajaxComplete",[L,q]);B&&!--a.active&&a.event.trigger("ajaxStop");q.complete&&q.complete.call(q.context,L,b);Va=!0;q.timeout&&clearTimeout(G);setTimeout(function(){q.iframeTarget?C.attr("src",q.iframeSrc):C.remove();L.responseXML=null},100)}}}var r,q,B,A,C,x,L,da,K,G,I=F[0],M=a.Deferred();if(M.abort=function(a){L.abort(a)},e)for(r=0;r<D.length;r++)e=a(D[r]),c?e.prop("disabled",!1):e.removeAttr("disabled");if(q=a.extend(!0,{},a.ajaxSettings,
b),q.context=q.context||q,A="jqFormIO"+(new Date).getTime(),q.iframeTarget?(C=a(q.iframeTarget),da=C.attr2("name"),da?A=da:C.attr2("name",A)):(C=a('<iframe name="'+A+'" src="'+q.iframeSrc+'" />'),C.css({position:"absolute",top:"-1000px",left:"-1000px"})),x=C[0],L={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";g("aborting upload... "+
c);this.aborted=1;try{x.contentWindow.document.execCommand&&x.contentWindow.document.execCommand("Stop")}catch(e){}C.attr("src",q.iframeSrc);L.error=c;q.error&&q.error.call(q.context,L,c,b);B&&a.event.trigger("ajaxError",[L,q,c]);q.complete&&q.complete.call(q.context,L,c)}},B=q.global,B&&0===a.active++&&a.event.trigger("ajaxStart"),B&&a.event.trigger("ajaxSend",[L,q]),q.beforeSend&&!1===q.beforeSend.call(q.context,L,q))return q.global&&a.active--,M.reject(),M;if(L.aborted)return M.reject(),M;(e=I.clk)&&
(da=e.name,da&&!e.disabled&&(q.extraData=q.extraData||{},q.extraData[da]=e.value,"image"==e.type&&(q.extraData[da+".x"]=I.clk_x,q.extraData[da+".y"]=I.clk_y)));var Q=1,T=2;da=a("meta[name=csrf-token]").attr("content");(e=a("meta[name=csrf-param]").attr("content"))&&da&&(q.extraData=q.extraData||{},q.extraData[e]=da);q.forceSync?k():setTimeout(k,10);var ya,aa,Va,bb=50,sa=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,
"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},Za=a.parseJSON||function(a){return window.eval("("+a+")")},Ja=function(b,c,e){var g=b.getResponseHeader("content-type")||"",m="xml"===c||!c&&0<=g.indexOf("xml");b=m?b.responseXML:b.responseText;return m&&"parsererror"===b.documentElement.nodeName&&a.error&&a.error("parsererror"),e&&e.dataFilter&&(b=e.dataFilter(b,c)),"string"==typeof b&&("json"===c||!c&&0<=g.indexOf("json")?b=Za(b):("script"===c||!c&&0<=g.indexOf("javascript"))&&
a.globalEval(b)),b};return M}if(!this.length)return g("ajaxSubmit: skipping submit process - no element selected"),this;var w,K,F=this;"function"==typeof b?b={success:b}:void 0===b&&(b={});w=b.type||this.attr2("method");K=b.url||this.attr2("action");(K=(K="string"==typeof K?a.trim(K):"")||window.location.href||"")&&(K=(K.match(/^([^#]+)/)||[])[1]);b=a.extend(!0,{url:K,success:a.ajaxSettings.success,type:w||a.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},
b);K={};if(this.trigger("form-pre-serialize",[this,b,K]),K.veto)return g("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&!1===b.beforeSerialize(this,b))return g("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var x=b.traditional;void 0===x&&(x=a.ajaxSettings.traditional);var G,D=[],I=this.formToArray(b.semantic,D);if(b.data&&(b.extraData=b.data,G=a.param(b.data,x)),b.beforeSubmit&&!1===b.beforeSubmit(I,this,b))return g("ajaxSubmit: submit aborted via beforeSubmit callback"),
this;if(this.trigger("form-submit-validate",[I,this,b,K]),K.veto)return g("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;K=a.param(I,x);G&&(K=K?K+"&"+G:G);"GET"==b.type.toUpperCase()?(b.url+=(0<=b.url.indexOf("?")?"&":"?")+K,b.data=null):b.data=K;var A=[];if(b.resetForm&&A.push(function(){F.resetForm()}),b.clearForm&&A.push(function(){F.clearForm(b.includeHidden)}),!b.dataType&&b.target){var B=b.success||function(){};A.push(function(c){var e=b.replaceTarget?"replaceWith":"html";
a(b.target)[e](c).each(B,arguments)})}else b.success&&A.push(b.success);if(b.success=function(a,c,e){for(var g=b.context||this,m=0,k=A.length;k>m;m++)A[m].apply(g,[a,c,e||F,F])},b.error){var Q=b.error;b.error=function(a,c,e){Q.apply(b.context||this,[a,c,e,F])}}if(b.complete){var M=b.complete;b.complete=function(a,c){M.apply(b.context||this,[a,c,F])}}G=0<a("input[type=file]:enabled",this).filter(function(){return""!==a(this).val()}).length;K="multipart/form-data"==F.attr("enctype")||"multipart/form-data"==
F.attr("encoding");x=n&&q;g("fileAPI :"+x);var T;!1!==b.iframe&&(b.iframe||(G||K)&&!x)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){T=C(I)}):T=C(I):T=(G||K)&&x?k(I):a.ajax(b);F.removeData("jqxhr").data("jqxhr",T);for(G=0;G<D.length;G++)D[G]=null;return this.trigger("form-submit-notify",[this,b]),this};a.fn.ajaxForm=function(b){if(b=b||{},b.delegation=b.delegation&&a.isFunction(a.fn.on),!b.delegation&&0===this.length){var c=this.selector,n=this.context;return!a.isReady&&c?(g("DOM not ready, queuing ajaxForm"),
a(function(){a(c,n).ajaxForm(b)}),this):(g("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return b.delegation?(a(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,k).on("submit.form-plugin",this.selector,b,e).on("click.form-plugin",this.selector,b,k),this):this.ajaxFormUnbind().bind("submit.form-plugin",b,e).bind("click.form-plugin",b,k)};a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};
a.fn.formToArray=function(b,c){var e=[];if(0===this.length)return e;var g,k=this[0],q=this.attr("id"),F=b?k.getElementsByTagName("*"):k.elements;if(F&&!/MSIE [678]/.test(navigator.userAgent)&&(F=a(F).get()),q&&(g=a(':input[form="'+q+'"]').get(),g.length&&(F=(F||[]).concat(g))),!F||!F.length)return e;var x,G,D,I,A;g=0;for(I=F.length;I>g;g++)if(D=F[g],x=D.name,x&&!D.disabled)if(b&&k.clk&&"image"==D.type)k.clk==D&&(e.push({name:x,value:a(D).val(),type:D.type}),e.push({name:x+".x",value:k.clk_x},{name:x+
".y",value:k.clk_y}));else if(G=a.fieldValue(D,!0),G&&G.constructor==Array)for(c&&c.push(D),q=0,A=G.length;A>q;q++)e.push({name:x,value:G[q]});else if(n&&"file"==D.type)if(c&&c.push(D),A=D.files,A.length)for(q=0;q<A.length;q++)e.push({name:x,value:A[q],type:D.type});else e.push({name:x,value:"",type:D.type});else null!==G&&"undefined"!=typeof G&&(c&&c.push(D),e.push({name:x,value:G,type:D.type,required:D.required}));!b&&k.clk&&(b=a(k.clk),c=b[0],(x=c.name)&&!c.disabled&&"image"==c.type&&(e.push({name:x,
value:b.val()}),e.push({name:x+".x",value:k.clk_x},{name:x+".y",value:k.clk_y})));return e};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var e=this.name;if(e){var g=a.fieldValue(this,b);if(g&&g.constructor==Array)for(var k=0,n=g.length;n>k;k++)c.push({name:e,value:g[k]});else null!==g&&"undefined"!=typeof g&&c.push({name:this.name,value:g})}}),a.param(c)};a.fn.fieldValue=function(b){for(var c=[],e=0,g=this.length;g>
e;e++){var k=a.fieldValue(this[e],b);null===k||"undefined"==typeof k||k.constructor==Array&&!k.length||(k.constructor==Array?a.merge(c,k):c.push(k))}return c};a.fieldValue=function(b,c){var e=b.name,g=b.type,k=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!e||b.disabled||"reset"==g||"button"==g||("checkbox"==g||"radio"==g)&&!b.checked||("submit"==g||"image"==g)&&b.form&&b.form.clk!=b||"select"==k&&-1==b.selectedIndex))return null;if("select"==k){k=b.selectedIndex;if(0>k)return null;c=[];b=b.options;
e=(g="select-one"==g)?k+1:b.length;for(k=g?k:0;e>k;k++){var n=b[k];if(n.selected){var q=n.value;if(q||(q=n.attributes&&n.attributes.value&&!n.attributes.value.specified?n.text:n.value),g)return q;c.push(q)}}return c}return a(b).val()};a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})};a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=
this.type,g=this.tagName.toLowerCase();c.test(e)||"textarea"==g?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==g?this.selectedIndex=-1:"file"==e?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):b&&(!0===b&&/hidden/.test(e)||"string"==typeof b&&a(this).is(b))&&(this.value="")})};a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};a.fn.enable=
function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})};a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var c=this.type;"checkbox"==c||"radio"==c?this.checked=b:"option"==this.tagName.toLowerCase()&&(c=a(this).parent("select"),b&&c[0]&&"select-one"==c[0].type&&c.find("option").selected(!1),this.selected=b)})};a.fn.ajaxSubmit.debug=!1});pvi=pvi||{};
pvi.referenceDataUtil=function(){var a={countries:"countries",gestationPeriod:"gestation-period-list",dosageUnit:"dosage-unit-list",labTestUnits:"lab-test-unit-list",strengthUnit:"strength-unit-list",doseDuration:"duration-code-list",eventSeriousNess:"seriousness",clinicalTrails:"clinical-trials",manufacturers:"manufacturers",labResultsAssessments:"lab-test-assessment-results",route:"route",causalityCategory:"causality-category",causalitySource:"causality-source",causalityMethods:"causality-methods",
ageGroups:"age-group",ageUnits:"age-units",currentMeddraVersion:"current-meddra-version",medDraDictId:"current-medDraDictId",negativeDechallenge:"negative-dechallenge",relatedRoles:"related-roles",nonRelatedRoles:"non-related-roles",senderTypes:"sender-types",referenceTypes:"reference-types",reporterTypes:"reporter-types",genders:"genders",languages:"languages",dosageForm:"dosage-form",roles:"roles",outcomes:"outcomes",dosageFrequency:"dosage-frequency",actionTaken:"action-taken",rechallenges:"rechallenges",
dechallenges:"dechallenges",highlightedByReporters:"highlighted-by-reporters",sourceTypes:"source-types",caseVersions:"case-version-list",versionTypes:"version-type-list",fileTypes:"file-types",processStatus:"process-status",reporterContactType:"reporter-contact-type"},e=function(){var e=[];_.each(a,function(a,b){e.push(a)});return e}(),k=e.length,g=function(a){$.ajax({type:"GET",url:pvi_urls.load_reference_data,success:function(a){_.isEmpty(a)||n.processReferenceData(a)},complete:function(){a&&a()}})},
n=function(){var a=browserStorage.utils.commonStorageKey,c=referenceDataUpdateDateTime,b=function(b){_.each(e,function(c){localStorage.setItem(a+c,JSON.stringify(b[c]))})};return{init:function(a){browserStorage.utils.getFromStorage("referenceDataLastReloadDate")!==c||browserStorage.utils.getFromStorage("referenceKeysCount")!=k?g(a):a&&a()},addReferenceData:b,getListReferenceData:function(b){return JSON.parse(localStorage.getItem(a+b))},getAllReferenceData:function(){var b={};_.each(e,function(c){b[c]=
JSON.parse(localStorage.get(a+c))});return b},processReferenceData:function(a){b(a);browserStorage.utils.addToStorage("referenceDataLastReloadDate",c);browserStorage.utils.addToStorage("referenceKeysCount",k)}}}();return{init:function(a){n.init(a)},pvi_reference_data_mapping:a,manageReferenceData:n}}();var pv=pv||{};
pv.manageTreeView=function(){var a="reporter literature patientMedHistory patientDrugHistory parentMedHistory parentDrugHistory event test product attachment".split(" "),e=$("#treeViewId"),k,g,n,q=!1,c="true"===$("#isDiffViewMode").val(),b=function(){_.each(k.get_json(),function(a){0<$(a.a_attr.href).length&&(e.trigger("pvi.tree.node.show",a.a_attr.href),0<a.children.length&&(e.jstree("open_node",a),_.each(a.children,function(a){e.trigger("pvi.tree.node.show",a.a_attr.href)}),e.jstree("close_node",
a)))})},m=function(){if(0<e.length){$.jstree.defaults.core.multiple=!1;var a=[];_.each($(".rxmain-container.rxmain-container-top"),function(b){var c=[],e={},g={},k={};_.each($(b).find(".sec-display-txt"),function(a){var b={},m={};$(a).hasClass("sectionTitle")?r(a,e,g,k):$(a).hasClass("childSectionTitle")&&(r(a,b,m,k),c.push(b))});e.children=c;a.push(e)});e.jstree({core:{check_callback:!0,data:a},types:{"default":{icon:"glyphicon"}},plugins:["types","wholerow","themes"]});k=e.jstree(!0)}},r=function(a,
b,c,e){a=$(a);b.text=a.text().trim();c.href=a.attr("href");c["data-toggle"]=a.attr("data-toggle");c["data-parent"]=a.attr("data-parent");b.a_attr=c;e.hidden=!1;b.state=e},C=function(){e.on("click","li[aria-expanded] i",function(){$(this).siblings("a.jstree-anchor").click();pvi.util.updateScrollbar(n)})},w=function(){e.on("select_node.jstree",function(a,b){A(a,b);a=$(b.node.a_attr.href);pvi.caseEntry.manageRepeatableSectionOrder.highlightRow(a);pvi.caseEntry.manageRepeatableSectionOrder.showDragButtons(a.parent())});
e.on("repeatableSection.row.added",function(a,b){G(b.sectionId,b.href,b.text);K(b.sectionId)});e.on("repeatableSection.row.validate.add",function(a,b){a=b.sectionId;var c=R(a);k.is_parent(c)||(c=pvi.caseEntry.manageMultipleRecords.getRecords(a),c=$(c.first()).attr("id"),G(a,c));G(b.sectionId,b.href,b.title);b.sectionId===pvi_constants.event_section&&pvi.caseEntry.manageTransReaction.disableTransReaction($("#"+b.href));K(b.sectionId)});e.on("repeatableSection.row.deleted",function(a,b){k.delete_node(b.nodeId);
K(b.sectionId,b.fixedCount);0==b.fixedCount&&c(b.sectionId)});e.on("repeatableSection.row.updated",function(a,b){a=W(b.href);D(a,b.text);return!1});e.on("pvi.tree.node.show",function(a,b){k.show_node($('a[href="'+b+'"]'))});e.on("ready.jstree",function(){C();b();pa();pvi.caseEntry.manageSoftDelete.hideDeletedRecords();pvi.caseEntry.setStudyAndPatientVisibility();pvi.taskAndFuqsUtils.setCountForTaskAndFuq()});e.on("pvi.tree.node.hide",function(a,b){k.hide_node($('a[href="'+b+'"]'))});var c=function(a){var b=
$("#"+a).find(".pv-section-record:first");b.one("change",":input:visible:not(:checkbox)",function(c){c=W(a);k.is_parent(c)||ka(a,b)})};(function(){_.each(a,function(a){c(a)})})()},K=function(a,b){b=void 0===b?pvi.caseEntry.manageMultipleRecords.getRecordCountForTreeView(a):b;var c=W(a),e=$("form.fceForm").find("a[href='#"+a+"']").text().trim(),g=b;0==b&&pvi.caseEntry.manageMultipleRecords.isSectionTabular(a)&&(g="");k.rename_node(c,e+" <span class='badge'>"+g+"</span>")},F=function(a){var b=W(a);
a=$("form.fceForm").find("a[href='#"+a+"']").text().trim();k.rename_node(b,a)},x=function(a){return a.length>g?a.substring(0,g-3)+"...":a},G=function(a,b,c,e){var g=pvi.util.encodeToHTML(c),m="#accordion-"+a,n=R(a);_.isEmpty(g)&&(g="New Record");g=x(g);e&&(g+=e);c=k.create_node(n,{text:g,a_attr:{href:"#"+b,"data-parent":m,"data-toggle":"tooltip",title:c}});$("#"+b).attr("data-treeNodeId",c);I(a)},D=function(a,b){var c=pvi.util.encodeToHTML(b);_.isEmpty(c)&&(c="New Record");var c=x(c),e=k.get_node(a);
e&&(e.a_attr.title=b,k.rename_node(a,c))},I=function(a){a=W(a);k.is_open(a)||k.open_node(a)},A=function(a,b){var c=[b.node.id];$("#"+b.node.id).parents(".jstree-node").each(function(){c.push(this.id)});e.find("li.jstree-node").each(function(){-1===c.indexOf(this.id)&&k.is_open(this.id)&&k.close_node(this.id)})},B=function(a,b,c){e.trigger("repeatableSection.row.added",{href:a,sectionId:b,text:c})},Q=function(){$("div.pv-fullcase-treeview").on("click","ul a",function(a){a.stopPropagation();a.preventDefault();
a=$(this).attr("href");var b=$(a).children("div.panel-collapse");0<b.length?$("#accordion-case a[href='#"+b.attr("id")+"']:not('.jstree-anchor')").click():($('#accordion-case a[href="'+a+'"]:not(".jstree-anchor")').click(),M(a))})},M=function(a){if($(a).hasClass("panel-collapse")){var b=$(a).parents(".panel:first");a="#"+b.attr("id")}void 0!==b&&(a=document.querySelector(a))&&a.scrollIntoView()},T=function(){var a=$("#accordion-case");a.on("shown.bs.collapse",function(a,c){b((c?c.href:a.target.id).replace("#",
""));q&&($(".toggle-tree-nodes").find("i").removeClass("md-arrow-collapse").addClass("md-arrow-expand"),q=!1)});a.on("hidden.bs.collapse",function(a,b){a=W((b?b.href:a.target.id).replace("#",""));k.deselect_node(a);k.is_parent(a)&&k.is_open(a)&&k.close_node(a)});a.on("click","div.row-strip, tr.pv-section-record",function(a){a=$(a.target);a.hasClass("md-arrow-back")||(a.hasClass("pv-section-record")||(a=a.parents(".pv-section-record:first")),b(a.attr("id")))});var b=function(a){a=W(a);k.deselect_all();
k.select_node(a);k.is_parent(a)&&!k.is_open(a)&&k.open_node(a)}},R=function(a){var b=function(a){return e.find("a[href='#"+a+"']").closest("li[role='treeitem']")},c=b(a);1>c.length&&a&&(a=Ia(a),c=b(a));return c},Ia=function(a){return a=a.replace("section_","section-")},W=function(a){var b=R(a).attr("id");void 0===b&&(b=$("#"+a).attr("data-treeNodeId"));return b},ka=function(a,b,c){if(pvi.caseEntry.commonFunctions.isSomeValueExist(b)){var e=$(b).attr("id");c||(c=pvi.caseEntry.manageRepeatableSectionHeader.createRecordTitle(b));
a==pvi_constants.reporter_section&&_.isEmpty(c)&&(c=$(b).find("a.inner-repeatable").text().split(" ")[1]);B(e,a,c)}},na=function(a){var b=[];a=k.get_parent(a);(a=k.get_children_dom(a))&&_.each(a,function(a){b.push($(a).attr("id"))});return b},S=function(a,b){_.each(a,function(a){var e=c?$(a).find("span.compare-title:not(.old)").text():$(a).find("span.eventNameHeaderPE").text();a=$(a).attr("id");var g=R(a);0<g.length&&k.delete_node(g.attr("id"));G(b,a,e,void 0)})},la=function(a){var b=pvi.caseEntry.managePEMatrix,
e=b.containerDivId,g=b.getNonDeletedProductRows().not(".initial-record");if(0<g.length){var m=W(e);k.open_node(m);_.each(g,function(e){e=$(e);var g=e.find("a.productNameHeaderPE"),m=g.attr("href").replace("#","");e=b.getNonDeletedEventRows(e).not(".initial-record");var g=c?g.find("span.compare-title:not(.old)").text():g.text(),n=" <span class='badge'>"+e.length+"</span>",r=R(m);0<r.length&&k.delete_node(r.attr("id"));G(a,m,g,n);I(m);S(e,m)});K(e,g.length);k.close_node(m)}else F(e)},pa=function(){k.open_all();
_.each(a,function(a){var b=$("#"+a),c=b.find(".pv-section-record");_.each(c,function(b){pvi.caseEntry.manageMultipleRecords.getParentSectionId($(b))==a&&ka(a,b)});c=W(a);b.attr("data-treeNodeId",c)});la(pvi.caseEntry.managePEMatrix.containerDivId);k.close_all()},ja=function(){var a=$(".pv-fullcase-treeview");a.on("click",".toggle-tree-panel",function(){$("#wrapper").toggleClass("treeview-collapse");manageSplitPanel.manageUITreeViewToggle()});a.on("click",".toggle-tree-nodes",function(){q?($(".toggle-tree-nodes").find("i").removeClass("md-arrow-collapse").addClass("md-arrow-expand"),
e.jstree("close_all"),e.jstree("deselect_all"),q=!1):($(".toggle-tree-nodes").find("i").removeClass("md-arrow-expand").addClass("md-arrow-collapse"),e.jstree("open_all"),q=!0);n.update()})};return{init:function(){0<e.length&&(m(),Q(),T(),w(),ja(),g=getConfig("treeView.characterLimit"),g=_.isEmpty(g)?20:parseInt(g),n=new PerfectScrollbar(".pv-fullcase-treeview"))},treeView:e,scrollPage:M,refreshNodesInSection:function(a){var b=[],c=!1,e=0,g=a.find(".pv-section-record");_.each(g,function(g){g=$(g);
var m=R(g.attr("id")),n=g.attr("data-treeNodeId");c||(b=na(n),c=!0);var r=pvi.caseEntry.manageRepeatableSectionHeader.createRecordTitle(g);a.attr("id")===pvi_constants.reporter_section&&0<g.find(".pii-secured").length&&(r=g.find("a.inner-repeatable").text().split(" ")[1]);D(m.attr("id"),r);g.hasClass("curr-record")&&(m=m.attr("id"),k.deselect_all(),k.select_node(m));!_.isEmpty(b)&&k.get_children_dom(k.get_parent(n))&&e<b.length&&(g.attr("data-treeNodeId",b[e]),e++)})},refreshNodesInPEMatrix:la,triggerAddNode:B,
triggerUpdateNode:function(a,b){e.trigger("repeatableSection.row.updated",{href:a,text:b})},triggerDeleteNode:function(a,b,c){e.trigger("repeatableSection.row.deleted",{nodeId:a,sectionId:b,fixedCount:c})},triggerValidateAndAddNode:function(a,b){e.trigger("repeatableSection.row.validate.add",{href:a,sectionId:b})},deletePEMatrixNodes:function(a,b){var c=W(pvi.caseEntry.managePEMatrix.containerDivId);k.open_node(c);b&&I(b);a=W(a);k.delete_node(a);k.close_node(c)},openNodeWithHref:I,updateNodeText:D,
updateBadge:K}}();var pvi=pvi||{},globalVars=globalVars||{};
pvi.caseEntry=function(){var a,e=!1,k=getConfig("fileUpload.maxAllowedFileSize"),g={},n=pvi.referenceDataUtil.manageReferenceData,q,c=!1,b=!1,m;(function(){var a=$("#sourceDatabaseId").val(),a=a?parseInt(a):pvi_constants.source_db_intake;globalVars.isSafetyCase=a===pvi_constants.source_db_safety})();var r=function(){var a=$("input[name='pageTypeId']").val(),b=$("input[name='templateId']").val(),c=function(){var c={isList:!1,caseStateId:$("input[name='caseState.id']").val(),id:$("input[name='id']").val(),
intakeCaseNum:$("#intakeCaseNumber").text(),caseState:$("input[name='caseState']").val(),version:$("input[name='caseVersion']").val(),sourceDbId:$("input[name='sourceDatabaseId']").val()},c=pvi.util.manageActionViews().init({tmplName:"viewAction",templateId:b,pageId:a,dataObj:c}),e=$("#viewActionContainer");e.find("ul.pv-form-top-cta").remove();e.append(c);$('input[name="caseVersion"]').attr("value")>pvi_case_version_code.INITIAL&&$(".followUp").hide();c=$("li.pdfView").find("a");e=c.attr("href");
c.attr("href",pvi.util.updateUrlQueryStringParameter(e,"templateId",b));$("li.FU_DIFF_VIEW").find("a").attr("href","#")};return{init:function(){c();ma.init()},renderActionsAndViews:c}}(),C=function(){var a=function(a){a=a?$(a):$("form.fceForm");var b=a.find(".eventLanguage select").val();a=a.find(".eventTranslatedReaction input");parseInt(b)===pvi_constants.en_language_id&&a.attr("disabled","disabled")},b=function(a){a=a?$(a):$("form.fceForm");a.on("change",".eventLanguage select",function(){var a=
$(this),b=a.val(),a=a.parents(".eventLanguage").siblings(".eventTranslatedReaction").find("input");""===b||parseInt(b)!==pvi_constants.en_language_id?a.removeAttr("disabled"):a.val("").attr("disabled","disabled")})};return{init:function(){a();b()},disableTransReaction:a}}(),w=function(){var a=/\[[0-9]*\]/g,b=/\d+(?=[^\d]*$)/gim,c="test-date-col",e="td."+c,g="th."+c,k=function(a){$(a).find("td.testReportRow").children("div:not(:first)").remove()},m=function(a){var b=a.children("div").length-1,c=a.children("div:last"),
f=c.find($("input"));a=[];var h;B()||(a=c.children("div, input"));h=f.length;for(var l=0;l<h;l++)a.push(f[l]);c.attr("data-reportno",b);h=a.length;for(c=0;c<h;c++)(f=$(a[c]).attr("id"))?z(f,a[c],"id",b):(f=$(a[c]).attr("name"))&&z(f,a[c],"name",b)},r=function(a){if(B()){$(a).addClass("deleted").hide();$(a).children("td.testName").find("input[name$=deleted]").val(!0);var b=$(a).children("td.testReportRow").children("div"),c=b.length;a=$(a).closest("tbody");for(var f=0;f<c;f++)$(b[f]).children("input[name$=deleted]").val(!0);
a=a.children().not(".deleted");for(b=0;b<a.length;b++)$(a[b]).find("td.serialNo span.new-index").html(b+1)}else{for(var b=a.attr("id").split("-")[2],c=$("#testTableSection").children(),f=c.length,h,l=0;l<f;l++)if(h=$(c[l]).attr("id").split("-")[2],h>b){var e=$(c[l]);--h;var p=e.children("td.testReportRow"),g=e.children("td.testName"),z=e.children("td.serialNo"),E=e.attr("id").split("-"),E=E[0]+"-"+E[1]+"-"+h,g=$(g).find("div, input, select").not(".ui-menu-item-wrapper"),p=p.children().find("div, input");
e.attr("id",E);$(z).children("span.new-index").html(h+1);z=p.length;for(e=0;e<z;e++)g.push(p[e]);z=g.length;for(e=0;e<z;e++)(p=$(g[e]).attr("id"))&&u(p,g[e],"id",h)}$(a).remove()}},H=function(a){a=a.find("div.del-test");a.hasClass("hide")&&a.removeClass("hide")},q=function(a){a.find("div.del-test").addClass("hide")},h=function(){$("#v-test").on("click",".addReportInTable",function(){var a=$("#testTableSection").children(),b,c;1===a.length?(c=$(a[0]).find("td.testReportRow > div:last").clone(),b=$(a[0]).find("td.testReportRow"),
a=$(a[0]),c.appendTo(b),Y.commonPostAddEvents(b.children("div:last")),Y.clearInputControls(b.children("div:last")),C(b.children("div:last")),m(b),H(a),b.children("div:last").find("div.testDate > div.datepicker > div.right-addon:last").remove()):(b=$(a).filter("tr.curr-record:first"),c=b.find("td.testReportRow > div:last"),0<c.length&&(c=c.clone(),a=b.find("td.testReportRow"),$(c).removeClass("deleted hide").show(),c.appendTo(a),m(a),Y.commonPostAddEvents(a.children("div:last")),H(b),Y.clearInputControls(a.children("div:last")),
C(a.children("div:last")),a.children("div:last").find("div.testDate > div.datepicker > div.right-addon:last").remove()))})},l=function(){$("#v-test").on("click",".del-test",function(){var a=$("#testTableSection").children().not(".deleted").length,b=$(this).parent().parent(),c=b.find("select.testUnitField");1<a?(a=b.attr("data-treeNodeId"),pv.manageTreeView.triggerDeleteNode(a,"test"),r($(b))):(k(b),q(b),C(b),Y.clearSelect2Fields(c),J.clearNormalHighLowValues())});$("#v-test").on("click",".del-test-report",
function(){var a=$(this).parent().parent(),b=$(a).parent(),c=b.parent(),f=b.children().not(".deleted").length,h=$("#testTableSection").children().not(".deleted").length,l=c.find("select.testUnitField");if(1===f)1===h?(C(c),Y.clearSelect2Fields(l),$(c).find("td.testName > div > div.testNormalLowHigh").find("input[type=hidden]").val(""),$(c).find("td.testName").find("span.pv-ic-indicator > i").addClass("hide")):(r($(c)),a=c.attr("data-treeNodeId"),pv.manageTreeView.triggerDeleteNode(a,"test"));else if(1<
f){if(B())$(a).children("input[name$=deleted]").val(!0),$(a).addClass("deleted").hide();else{for(var f=$(a).attr("data-reportno"),h=$(b).children(),l=h.length,e=0;e<l;e++){var p=$(h[e]).attr("data-reportno");if(p>f){for(var g=$(h[e]),p=p-1,u=g.children("div"),E=g.find($("input")),k=E.length,v=0;v<k;v++)u.push(E[v]);g.attr("data-reportno",p);g=u.length;for(E=0;E<g;E++)(k=$(u[E]).attr("id"))&&z(k,u[E],"id",p)}}$(a).remove()}f=b.children().not(".deleted").length;1===f&&q($(c))}})},u=function(a,b,c,f){var h=
"",l;for(l=0;"["!==a[l]&&l<a.length;l++)h+=a[l];h+=a[l];for(l++;"]"!==a[l]&&l<a.length;l++);a=a.substr(l);$(b).attr(c,h+f+a);($(b).is("input")||$(b).is("select"))&&"name"!==c&&$(b).attr("name",h+f+a)},z=function(a,b,c,f){var h="",l;for(l=0;"["!==a[l]&&l<a.length;l++)h+=a[l];h+=a[l];for(l++;"["!==a[l]&&l<a.length;l++)h+=a[l];h+=a[l];for(l++;"]"!==a[l]&&l<a.length;l++);a=a.substr(l);$(b).attr(c,h+f+a);$(b).is("input")&&"name"!==c&&$(b).attr("name",h+f+a)},p=function(){$("#v-test").on("click",".table-row-del",
function(a){a.preventDefault();var b=$(this);a=b.closest("table#testSectionParentTable:visible");var c=a.find(".pv-section-record").not(".deleted").length,b=b.closest("tr"),f=b.attr("data-treeNodeId"),h=b.parent(".pv-draggable-list:first");1<c?(_.isEmpty(b.find("input[name$='deleted']").val())?b.remove():(b.addClass("deleted").hide(),b.find("input[name$=deleted]").val(!0)),A(),ha.showDragButtons(h),pv.manageTreeView.triggerDeleteNode(f,"test")):_.isEmpty(b.find("input[name$='deleted']").val())?($(".testSectionDatePicker").val(""),
Y.clearRowValues(b)):(b.addClass("deleted").hide(),b.find("input[name$=deleted]").val(!0),$("#v-test").find(".add_row_attach").first().click(),A(),ha.showDragButtons(h),pv.manageTreeView.triggerDeleteNode(f,"test"),$(".testSectionDatePicker").val(""));P(a);M()})},E=function(){$("#v-test").on("click",".add_row_attach",function(a){a.preventDefault();a=$(this).closest("table#testSectionParentTable:visible");var b=a.find("#pvDragTestSection"),c=$("#testSectionParentTable > tbody > tr.pv-section-record:last-child").clone();
c.hasClass("deleted")&&(c.removeClass("deleted"),c.show());c.appendTo(b);c.find("input,textarea").css("border-color","");c.find("input[type='checkbox']").parent("div").removeClass("error-box");x(c);P(a);c.removeClass("curr-record");c.find("input[name$=reactionCoded]").parents("div.input-group:first").siblings("span").remove();c.find("input.ui-autocomplete-input").removeData("autocomplete");Y.postAddEvents(c);ha.showDragButtons(c.parent(".pv-draggable-list:first"));M()})},P=function(a){var b=a.find("tbody tr:visible");
_.each($(b),function(b,c){$(b).find(".new-index").text(c+1);2<c+1?a.addClass("table-show-bot-btn"):a.removeClass("table-show-bot-btn")})},O=function(){var a=$("table#testSectionParentTable > tbody > tr:first-child").find("td:visible").length;_.each($("table#testSectionParentTable:visible> tbody > tr:visible"),function(b,c){var f=$("table#labTestDateTDTemplate "+e).clone();Y.postAddEvents(f);f.find("input,textarea").addClass("hide");f.find("div.test-date-inner > div").addClass("hide");f.find("input:checkbox").parent("div").addClass("hide");
var h=a-2;$(b).find("td").not(".deleted").eq(a-1).after(gb(f,c,h))})},U=function(){$("#v-test").on("click",".pv-add-test-date",function(a){a.preventDefault();a=$("table#labTestDateTHTemplate "+g).clone();Y.postAddEvents(a);$("table#testSectionParentTable:visible thead tr:visible").find("th.test-name-col").siblings("th").eq(-1).after(a);O();M()})},w=function(){$(document).on("click",".table#testSectionParentTable:visible a.add-test-ic",function(a){a.preventDefault();var b=$(this).closest(e);a=b.find("div.test-date-inner");
a.removeClass("test-no-data").addClass("test-has-data");a.find("a.add-test-ic").removeClass("add-test-ic").addClass("del-td pv-ic");a.find("a.del-td.pv-ic").find("i.md-add").removeClass("md-add").addClass("md-close");a.find("input,textarea").each(function(a,b){$(b).hasClass("testDate")||$(b).removeClass("hide")});b.find("div.test-date-inner > div").removeClass("hide");a.find("input:checkbox").parent("div").removeClass("hide");var b=b.prevAll(e).length,c=$("table#testSectionParentTable:visible "+g).eq(b).find(".testSectionDatePicker"),
b=c.closest("input[name='safetyData.testDates.format']").val(),f=c.closest("input[name='safetyData.testDates.date']").val(),c=c.val();C($(a));void 0!==c&&G(a,c,b,f);A();M()})},A=function(){_.each($(".table#testSectionParentTable:visible > tbody tr"),function(a){x($(a),!0)})},x=function(a,b){var f,h,l;_.each(a.find("td"),function(p,g){p=$(p);if(p.hasClass("test-name-col")||p.hasClass(c))1===g&&(f=p.closest("tr"),h=f.prevAll("tr").length,a.attr("id","test-section-"+h)),g=p.closest(e),l=p.hasClass("test-name-col")?
void 0:g.prevAll(e).length,gb(p,h,l,b)})},gb=function(c,h,l,e){_.each(c.find("input[type='checkbox'],input[type='text'],input[type='hidden'],select, textarea"),function(c){c=$(c);void 0!==e||c.hasClass("popDatePicker")||F(c);var p;p=c.attr("name");void 0!==h&&0<=h&&(p=p.replace(a,"["+h+"]"));void 0!==l&&0<=l&&(p=p.replace(b,l));c.attr("name",p);c.attr("id",p)});return c},C=function(a){_.each(a.find("input[type='checkbox'],input[type='text'],select, textarea"),function(a){F($(a))})},F=function(a){a.is(":checkbox")?
a.attr("checked",!1):a.val("")},xa=function(){$(document).on("click",".table-column-del:visible",function(a){a.preventDefault();var b=$(this).closest("table#testSectionParentTable:visible"),c=$(this).closest(g).prevAll(g).not(".deleted").length,f=!1;1<b.find("thead "+g).not(".deleted").length&&sweetAlert({title:"Are you sure?",text:"Are you sure that you want to delete this date?",type:"warning",showCancelButton:!0,closeOnConfirm:!1,confirmButtonText:"Yes, delete it!"},function(){La("Date successfully deleted!",
"success","Deleted!");b.find("tbody tr.pv-section-record").each(function(){var a=$($(this).find("td.test-date-col").not(".deleted").get(c));_.isEmpty(a.find("input[name$='deleted']").val())?(a.remove(),f||(b.find("thead th.test-date-col:eq("+c+")").remove(),f=!0)):(0===c&&a.next().addClass("test-section-margin"),a.addClass("deleted").hide(),a.find("input[name$=deleted]").val(!0),f||(a=$(b.find("thead th.test-date-col").not(".deleted").get(c)),a.addClass("deleted").hide(),0===c&&a.next().addClass("test-section-margin"),
f=!0))});A();M()},function(){La("There is something wrong...","error","Oops")})})},D=function(){$(document).on("click",".table#testSectionParentTable a.del-td",function(a){a.preventDefault();var b=$(this).closest("td");a=b.prevAll("td.test-date-col");var c=b.find(".test-has-data"),f=c.find("div.testDate > div .testDate").val();c.find("div.testDate > div").find("input[name*='format']").attr("value");C(c);c.find(".popDatePicker").val($(".testSectionDatePicker").eq(a.length).val());c.fadeOut(500,function(){var a=
b.find("div.test-date-inner");a.addClass("test-no-data").removeClass("test-has-data");a.find("a.del-td.pv-ic").addClass("add-test-ic").removeClass("del-td pv-ic");a.find("a.add-test-ic").find("i.md-close").addClass("md-add").removeClass("md-close");a.find("input,textarea").addClass("hide");b.find("div.test-date-inner > div").addClass("hide");a.find("input:checkbox").parent("div").addClass("hide");c.find("div.testDate > div .testDate").val(f);c.find("div.testDate > div .testDate").attr("value",f);
a.show()});M()})},cb=function(a,b,c,f){_.each($("table#testSectionParentTable tbody tr:visible"),function(h){h=$(h).find(e).eq(a);void 0!==h&&G(h,b,c,f)})},G=function(a,b,c,f){_.each(a.find('input[type="hidden"], input.testDate'),function(a){a=$(a);var h=a.attr("name");if(h.endsWith("date.value")||h.endsWith("date.date"))a.addClass("popDatePicker").val(b),a.closest($("[name^='date.format']").val(c)),a.closest($("[name^='date.date']").val(f))})},K=function(){$(document).on("focusout",".testSectionDatePicker",
function(a){a.preventDefault();a=$(this);var b=a.siblings("input[name='safetyData.testDates.format']").val(),c=a.siblings("input[name='safetyData.testDates.date']").val(),f=a.parents("th").prevAll(g).length;cb(f,a.val(),b,c)})},I=function(){var a=$("#testSectionParentTable"),b=$("#testTableSection"),c=[],f=[],h=/^\d+([.]\d+)?$/,l=/^\d+([.]\d+)?$/,e=/^[a-zA-z]+$/,p=function(a){return void 0!==_.find(c,function(b){return b.value.toLowerCase()===a.toLowerCase()})},g=function(a,b,h){var l=L(a);if(h){var e=
Y.getSectionRow(a).find("select[name$='unit.id']").val();h=_.find(f,function(a){return a.id==e});if(void 0!==h){var p=_.first(b.split(" "))+" "+h.value;a.val(p);a.data("initial-value",p)}}else h=_.find(c,function(a){return a.value==b.split(" ")[0]});void 0!==h&&l.val(h.id)},u=function(a){var b=_.first(a.split(" ")),c=_.last(a.split(" "));return void 0!==_.find(f,function(a){return a.value==c})&&h.test(b)},z=function(){var a=$(this),b=a.val().trim();void 0!==b&&(l.test(b)?g(a,b,!0):p(b)?g(a,b,!1):
b!=a.data("initial-value")&&(u(b)?g(a,b,!0):(b=L(a),void 0!==a.data("initial-value")&&a.data("initial-value",null),b.val(""))))},E=function(a){a.on("keyup paste","input.testResultInput",function(){var a=$(this).val();h.test(a)||""!=a&&!e.test(a)||Z.bindAutoComplete($(this),0,c)})};return{init:function(){c=n.getListReferenceData("lab-test-assessment-results");f=n.getListReferenceData("lab-test-unit-list");a.on("focusout","input.testResultInput",z);E(a);b.on("focusout","input.testResultInput",z);E(b);
_.each($("#testSectionParentTable > .pv-section .test-date-col > div.test-date-inner"),function(a){$(a).hasClass("test-no-data")&&$(a).find("> div").addClass("hide")})}}}(),J=function(){var a=/^\d+([.]\d+)?$/,b=function(a,b,c){a=a.attr("name").replace(b,c);return $("form input[name='"+a+"']")},c=function(a,b){_.each(b,function(b){a=a.toString().split(new RegExp(b+"(.+)"));if(1<a.length)return!1});return a},f=function(){$("form.fceForm").on("change","input.normalHighLowValue",function(){var a=$(this),
f=c(a.val(),getConfig("normalLowHigh.delimeters",!0,!0)),f=f.filter(function(a){return""!==a}),h=b(a,"normalLowHigh","normalLow"),a=b(a,"normalLowHigh","normalHigh");1<f.length?(h.val(_.first(f).trim()),a.val(_.last(f).trim())):f.length?h.val(_.first(f).trim()):(h.val(""),a.val(""))})},h=function(){_.each($("form input.normalHighLowValue"),function(a){a=$(a);var c=b(a,"normalLowHigh","normalLow").val(),f=b(a,"normalLowHigh","normalHigh").val();c&&f?a.val(c+_.first(getConfig("normalLowHigh.delimeters",
!0,!0))+f):c?a.val(c):a.val("")})},l=function(a,b){return(a=_.find(a,function(a){return a.id==b}))?a:{id:"",value:""}},e=function(){$("form.fceForm").on("change",".testUnitField",function(){var c=$(this),f=n.getListReferenceData(c.attr("data-source")),h=l(f,c.val()),c=Y.getSectionRow($(this)).find("input.testResultInput");_.each(c,function(c){var f=$(c).val().trim(),l=b($(c),"value","id");l.val()&&a.test(_.first(f.split(" ")))?(f=_.first(f.split(" "))+" "+h.value,$(c).val(f),$(c).data("initial-value",
f),l.val(h.id)):a.test(f)&&(f=f+" "+h.value,$(c).val(f),$(c).data("initial-value",f),l.val(h.id))})})};return{init:function(){f();e();h()},clearNormalHighLowValues:function(){_.each($("form input.normalHighLowValue"),function(a){a=$(a);b(a,"normalLowHigh","normalLow").val("");b(a,"normalLowHigh","normalHigh").val("")})}}}();return{init:function(){p();E();U();w();xa();D();K();h();l();A();I.init();J.init();var a=$("#pvDragTestSection tr");for(testRow in a){var b=$(a[parseInt(testRow)]).find("td.test-date-col");
if(!_.isEmpty($(b[0]))&&$(b[0]).hasClass("deleted"))for(test in b)if(!$(b[parseInt(test)]).hasClass("deleted")){$(b[parseInt(test)]).addClass("test-section-margin");break}}a=$("#testSectionParentTable > thead > tr > th.test-date-col");if(0<a.length&&$(a[0]).hasClass("deleted"))for(c in a)if(!$(a[parseInt(c)]).hasClass("deleted")){$(a[parseInt(c)]).addClass("test-section-margin");break}},indexTestNumberOnTestAdd:function(a){a=a.find("tbody tr:last");var b=a.find("td.testName"),c=a.find("td.testReportRow > div:last"),
f=parseInt(a.attr("id").split("-")[2]),h,l,e;c.removeClass("deleted hide");k(a);if(B())for(c=c.find("input"),h=b.find("input"),e=h.length,l=0;l<e;l++)c.push(h[l]);else c=c.find("div");b=b.children("div").find("div");e=b.length;for(l=0;l<e;l++)c.push(b[l]);e=c.length;for(b=0;b<e;b++)(l=$(c[b]).attr("id"))&&u(l,c[b],"id",f);q(a)}}}(),K=function(a){return n.getListReferenceData(a.data("unitlist"))},F=function(){var a=$("select[name='caseVersionType.id']"),b=$("select[name='versionType.id']"),c,e=function(e){e||
(e=c,parseInt(a.val())===pvi_constants.initial_case_version_id&&(e=g(e)));var k=b.val();b.hasClass("select2-box")&&b.select2("destroy").empty().select2({templateResult:function(a){return a.value||a.text},templateSelection:function(a){return a.value||a.text},placeholder:"",data:e});_.isEmpty(k)?b.val(null).trigger("change"):b.val(k).trigger("change")},g=function(a){var b=[13,14];return a=a.filter(function(a){return-1<b.indexOf(a.id)})};return{init:function(){var b=c=n.getListReferenceData("version-type-list");
parseInt(a.val())===pvi_constants.initial_case_version_id&&(b=g(b));e(b);a.on("change",function(){x.versionTypeChange();return!1})},triggerVersionDispositionChange:e}}(),x=function(){var a=$("select[name='caseVersionType.id']"),b=n.getListReferenceData("case-version-list"),c=function(){$.ajax({type:"POST",url:pvi_urls.follow_up_to_initial,data:{data:JSON.stringify({id:$('[name="id"]').attr("value")})},beforeSend:function(){pvui.common.showPVLoader()},success:function(a){a=$.parseJSON(a);var b=$.parseJSON(a.kaseData);
Ka().init(b);b.caseVersionType.id==pvi_constants.initial_case_version_id&&Ra.resetFirstReceiptDate(b.safetyData.receiptDate);swal.close();x.setCaseVersionAttribute(pvi_case_version_code.INITIAL);F.triggerVersionDispositionChange();A();pvui.common.hidePVLoader();pvi.util.showFloatingNotification.successMessage(a.message)}})},e=function(a){var c=_.find(b,function(b){return b.id==a});return c?c.value:""},g=function(){var b=pvi_constants.follow_up_case_version_id;parseInt($('input[name="caseVersion"]').attr("value"))===
pvi_case_version_code.INITIAL&&(b=pvi_constants.initial_case_version_id);a.val(b).trigger("change")},k=function(){$(".followUpCancelBtn").click(function(){g()})};return{init:function(){var b=$("#latestVersion").val();b&&"false"!==b||a.attr("disabled","disabled").trigger("change");k()},removeDisable:function(){a.removeAttr("disabled").trigger("change")},getCaseVersion:e,setCaseVersion:function(b){a.val(b).trigger("change")},disableVersionType:function(){a.attr("disabled","disabled").trigger("change")},
setCaseVersionAttribute:function(a){$('input[name="caseVersion"]').attr("value",a)},versionTypeChange:function(){var b,k=e(a.val()),t=$("div.page-bot-rt > .btn-back").data("changed"),t=!(void 0===t||""==t||0==t),m=null;parseInt($('input[name="caseVersion"]').attr("value"))===pvi_case_version_code.INITIAL?b=pvi_constants.case_version_initial:parseInt($('input[name="caseVersion"]').attr("value"))>pvi_case_version_code.INITIAL&&(b=pvi_constants.case_version_followUp);b===pvi_constants.case_version_followUp&&
k===pvi_constants.case_version_initial?(g(),m=function(){pvi.util.showWarning(getMessage("case_version_to_initial_warning"),pvi_constants.cancel_btn_label,pvi_constants.success_btn_label,c,pvi_constants.swal_cancel_btn_class);$(".cancelInitialBtn").on("click",function(){a.val(pvi_constants.follow_up_case_version_id).trigger("change")})}):b===pvi_constants.case_version_initial&&k===pvi_constants.case_version_followUp&&(g(),m=function(){pvi.util.showFollowUpModal.init({url:pvi_urls.follow_up_url},ma.followUpAjax)});
!t&&m?m():m&&T(null,m,g)}}}(),G=function(a,b){a=$(a?a:"form").find("select");_.each(a,function(a){a=$(a);var c=a.data("value");c&&""!==c&&a.val(c).trigger("change",{newRow:b})})},D=function(a){a=$(a?a:"form").find("select.select2-ajax");var b=!1===a.data("tabular");a.val("");b={minimumInputLength:getConfig("typeAhead.substance"),templateResult:function(a){return a.value||a.text},templateSelection:function(a){return a.value||a.text},multiple:b,allowClear:!b,ajax:{delay:getConfig("select2.delayTimeForAjax"),
url:a.data("url"),dataType:"json",data:function(a){return{search:a.term,page:a.page||1}},processResults:function(a){return{results:JSON.parse(JSON.stringify(a.results)),pagination:{more:a.pagination.more}}}}};a.select2(b).select2("val",[])},I=function(){var b=$("form.fceForm");b.on("keyup change entry.form.changed","input,select,textarea",function(){a==b.serialize()||e||"complete"!==document.readyState||0!==jQuery.active||($("div.page-bot-rt > .btn-cancel").removeClass("hide"),$("div.page-bot-rt > .btn-back").data("changed",
!0),e=!0)})},A=function(){e=!1;a=$(".fceForm").serialize()},B=function(){return!_.isEmpty($("input[name='caseState.id']").val())},Q=function(){$("div.page-bot-rt > .btn-cancel").addClass("hide");$("div.page-bot-rt > .btn-back").data("changed",!1)},M=function(){$("div.page-bot-rt > .btn-cancel").removeClass("hide");$("div.page-bot-rt > .btn-back").data("changed",!0)},T=function(a,b,c){na(getMessage("other_btn_action"),function(a){S(a);c&&c()},function(a){S(a);J.showSuccessMessage=!1;J.submitFormAction(function(){},
b)},function(a){S(a);b&&b()})},R=function(){var a=$("div.page-bot-rt > .btn-back"),b=$("div.page-bot-rt > .btn-cancel");I();a.on("click",function(){a.data("changed")?Ia(a):window.history.back()});b.on("click",function(){pvi.util.showWarning(getMessage("cancel_btn"),getMessage("cancel_btn_text"),getMessage("ok_btn_text"),function(){location.reload()})})},Ia=function(){var a=la();$("<div class='sweet-overlay sweet-back-drop'></div>").appendTo("#wrapper");a.find("button.first-btn").unbind("click").click(function(){S(a)});
a.find("button.second-btn").unbind("click").click(function(){$("div.fullcase-page-bot .btn-create").data("destinationURL","goBack").click();S(a)});a.find("button.third-btn").unbind("click").click(function(){window.history.back()})},W=function(a,b){var c=ja(a,getMessage("ok_btn_text"));$("<div class='sweet-overlay sweet-back-drop'></div>").appendTo("#wrapper");c.find("button.second-btn").unbind("click").click(function(){b&&b(c);S(c)})},ka=function(a,b){var c=[],e=[],g;for(g in b)b.hasOwnProperty(g)&&
(c.push(g),e.push(b[g]));var k=3===c.length?oa(a,c[0],c[1],c[2]):oa(a,c[0],c[1]);$("<div class='sweet-overlay sweet-back-drop'></div>").appendTo("#wrapper");k.find("button.first-btn").unbind("click").click(function(){e[0](k)});k.find("button.second-btn").unbind("click").click(function(){e[1](k)});3===e.length&&k.find("button.third-btn").unbind("click").click(function(){e[2](k)})},na=function(a,b,c,e){var g=void 0!==e?oa(a,getMessage("cancel_btn_text"),getMessage("yes_btn_text"),getMessage("no_btn_text")):
oa(a,getMessage("cancel_btn_text"),getMessage("ok_btn_text"));$("<div class='sweet-overlay sweet-back-drop'></div>").appendTo("#wrapper");g.find("button.first-btn").unbind("click").click(function(){b(g)});g.find("button.second-btn").unbind("click").click(function(){c(g)});e&&g.find("button.third-btn").unbind("click").click(function(){e(g)})},S=function(a){a&&0<a.length&&(a.css("display","none"),$(".sweet-overlay.sweet-back-drop").remove(),a.removeClass("sweet-alert showSweetAlert"))},la=function(){var a=
$(".sweet-alert-modal"),b=getMessage("cancel_btn_text"),c=getMessage("yes_btn_text"),e=getMessage("no_btn_text");a.addClass("sweet-alert showSweetAlert").css("display","block").attr("data-animation","pop");a.find("p.display-message").text(getMessage("back_btn"));a.find("button.first-btn").text(b);a.find("button.second-btn").text(c);a.find("button.third-btn").text(e);pa(a,b,c,e);return a},pa=function(a,b,c,e){_.isEmpty(b)?a.find("button.first-btn").hide():a.find("button.first-btn").show().text(b);
_.isEmpty(c)?a.find("button.second-btn").hide():a.find("button.second-btn").show().text(c);_.isEmpty(e)?a.find("button.third-btn").hide():a.find("button.third-btn").show().text(e)},ja=function(a,b){var c=$(".sweet-alert-modal");c.addClass("sweet-alert showSweetAlert").css("display","block").attr("data-animation","pop");c.find("p.display-message").text(a);c.find("button.second-btn").text(b);c.find("button.first-btn").hide();c.find("button.third-btn").hide();return c},oa=function(a,b,c,e){var g=$(".sweet-alert-modal");
g.addClass("sweet-alert showSweetAlert").css("display","block").attr("data-animation","pop");g.find("p.display-message").text(a);g.find("button.first-btn").text(b);g.find("button.second-btn").text(c);pa(g,b,c,e);return g},L=function(a){a=a.attr("name");if(void 0!==a&&a.endsWith(".value"))return $("form input[id='"+a.replace(".value",".id")+"']")},da=function(){var a=["ingredientDosageUnit","productDoseInformation","productCumulativeDoseToFirstReaction","testResult"],b=!1,c=function(a){a=a.split(" ");
a.shift();return a.join(" ")},e=function(b,e){var h=_.find(K(b),function(a){return a.value==c(e)}),l=b.data("allowedfirstpart"),g=new RegExp("^\\d{1,"+l+"}\\s"),l=new RegExp("^(\\d{1,"+l+"}|(?=\\d\\d*\\.\\d+?$)[\\d\\.]{1,"+l+"}\\s)");return void 0!==h&&(_.contains(a,b.attr("data-field-id"))?l.test(e):g.test(e))},g=function(){var a=$(this),f=a.val(),h=L(a);if(void 0!==f){var l=e(a,f)||""==f;""==f&&h.val("");l?(a=_.find(K(a),function(a){return a.value==c(f)}),void 0!==a&&h.val(a.id)):b&&(a.val(""),
h.val(""),pvi.util.showMessageAndCallback(getMessage("invalid_value"),a.focus()))}},k=function(){$("form").on("keyup paste",".combinedComplexField",function(){var b=$(this),c=b.val(),h=b.data("allowedfirstpart"),l;_.contains(a,b.attr("data-field-id"))?l=new RegExp("^(\\d{1,"+h+"}|(?=\\d\\d*\\.\\d+?$)[\\d\\.]{1,"+h+"})$"):l=new RegExp("^\\d{1,"+h+"}\\s");l.test(c)&&(b=m(b,c),Z.bindAutoComplete($(this),2,b))})},m=function(a,b){var c=[];b=b.split(" ");var f=1<b.length?b[1].toLowerCase():"";a=_.filter(K(a),
function(a){return a.value.toLowerCase().startsWith(f)});for(var e=0;e<a.length;e++)c.push(b[0]+" "+a[e].value);return c},n=function(){var a=$(this).find(":selected");if("undefined"!=typeof a.attr("data-select2-tag")){var b=a.attr("value");a.attr("value",pvi_constants.free_text_token+b)}};return{init:function(){$("form.fceForm").on("change",".select2-box[data-tag='true']",n);$(document).on("focus",".combinedComplexField",function(){b=this.isEqualNode(document.activeElement)});$(document).on("focusout",
".combinedComplexField",g);k()}}}(),V=function(){var a=[],b=[],c=/^\d{1,3}\s[a-zA-z]*$/,e=/^\d{1,3}\s[a-zA-z]+$/,g=/^\d{1,3}\s[a-zA-z]+$/,k=/^[a-zA-z]+$/,m=$("input[name='safetyData.patient.age.ageType']"),r=$("input.patientAge"),q=$("input.parentAge"),w=$("input.patientFetus"),h=$("input[id='safetyData.patient.age.id']"),l=$("input[id='safetyData.parent.age.id']"),u=pvi.util.getDateFormats.allSupportedFormats,z=pvi.util.getDateFormats.fullDateFormats,p=pvi.util.getDateFormats.partialFormats,E=pvi.util.getDateFormats.defaultFormat,
P=!1,O="",U=n.getListReferenceData("age-units"),Ha=$("input.patientDOB"),A=function(a){var c=_.find(b,function(b){return b.value==a.split(" ")[1]});return e.test(a)&&void 0!==c},B=function(a){var c=_.find(b,function(b){return b.value==a.split(" ")[1]});return g.test(a)&&void 0!==c},gb=function(a,b){return _.find(a,function(a){return a.id==b})},x=function(c){var h=c.val(),l,e=L(c);(e=void 0!==e?e.val():!1)&&(l=!h||isNaN(h)?gb(a,e):gb(b,e));void 0!==l&&(void 0!==h?$.isNumeric(h)?c.val(h+" "+l.value):
/\d/.test(h)&&c.val(h):c.val(l.value))},C=function(b){return void 0!==_.find(a,function(a){return a.value.toLowerCase()==b.split(" ")[0].toLowerCase()})},xa=function(c,h,l){c=L(c);l=l?_.find(b,function(a){return a.value==h.split(" ")[1]}):_.find(a,function(a){return a.value==h.split(" ")[0]});void 0!==l&&void 0!==c&&c.val(l.id)},F=function(a,b){var c=a.val();a.val("");var h=pvi.util.getValidFormat(c,u);h&&(b=pvi.util.getFormattedDate(c,h,b,p),h=pvi.util.removeTimeIfNotExist(h,b),a.val(h))},cb=function(){var a=
$(this);a.hasClass("patientFetus")&&(a=r);var b=a.val();if(void 0!==b){var c;c=P?A(b)||""==b:pvi.util.getValidFormat(b,z)||pvi.util.isDateInStandardFormat(b)||A(b)||B(b)||C(b)||""==b;c?""==b?(m.val(""),h.val("")):w.is(":checked")?B(b)?(m.val(pvi_constants.age_type.gestation_period),xa(a,b,!0)):(w.attr("checked",!1),a=getMessage("invalid_patient_birth_date"),r.val(""),void 0!==m&&m.val(""),pvi.util.showMessageAndCallback(a,r.focus())):A(b)?(m.val(pvi_constants.age_type.on_set_age),xa(a,b,!0)):pvi.util.getValidFormat(b,
z)||pvi.util.isDateInStandardFormat(b)?(b=pvi.util.getValidFormat(b,z),F(a,b?b:E),pvi.util.isFutureDateInput(a,b?b:E)&&(pvi.util.showInfo(getMessage("future_date_alert")),a.val("")),h.val(""),m.val(pvi_constants.age_type.birth_date)):C(b)&&(h.val(""),m.val(pvi_constants.age_type.age_group),xa(a,b,!1)):(r.val(""),m.val(""),h.val(""),w.attr("checked",!1).trigger("change"),pvi.util.showMessageAndCallback(getMessage(O),r.focus()))}},D=function(){var a=$(this),b=a.val();if(void 0!==b&&""!==b){var c=pvi.util.getValidFormat(b,
u);B(b)?xa(a,b,!0):c?(F(a,c),pvi.util.isFutureDateInput(a,c)&&(pvi.util.showInfo(getMessage("future_date_alert")),a.val("")),l.val("")):(q.val(""),pvi.util.showMessageAndCallback(getMessage("invalid_parent_birth_date"),q.focus()))}},G=function(){var a=$(this).val(),b;if(b=""!==a)b=!(pvi.util.getValidFormat(a,z)||pvi.util.isDateInStandardFormat(a));b&&(Ha.val(""),a=getMessage("invalid_dob"),pvi.util.showMessageAndCallback(a,Ha.focus()))},K=function(a,c){var h=[];a=a.split(" ");var f=1<a.length?a[1].toLowerCase():
"";b=c?U:b;c=_.filter(b,function(a){return a.value.toLowerCase().startsWith(f)});for(var l=0;l<c.length;l++)h.push(a[0]+" "+c[l].value);return h},I=function(){r.on("keyup paste",function(){var b=r.val();c.test(b)?(b=K(b),Z.bindAutoComplete(r,2,b)):P||""!==b&&!k.test(b)||Z.bindAutoComplete(r,0,a)});q.on("keyup paste",function(){var a=q.val();c.test(a)?(a=K(a,!0),Z.bindAutoComplete(q,2,a)):(""===a||k.test(a))&&Z.bindAutoComplete(q,0,[])})};return{init:function(c){c=c||{};O=c.invalidAgeMessage?c.invalidAgeMessage:
"invalid_dob";a=n.getListReferenceData("age-group");b=n.getListReferenceData("age-units");w.on("change",function(a){b=$(a.target).is(":checked")?n.getListReferenceData("gestation-period-list"):n.getListReferenceData("age-units")});x(r);x(q);r.on("focusout",cb);w.change(cb);q.on("focusout",D);Ha.on("focusout",G);I()},setSupportOnlyAgeInUnits:function(a){P=a}}}(),ra=function(){return{init:function(){var a=$("form.fceForm");wa();a.on("click",".btn-add-panel",Y.addRecord);a.on("click",".btn-del-panel",
Y.deleteRecord);$(".change-text").click(ab);ib();a.on("keypress",$a);$('[data-toggle="tooltip"]').tooltip();Da.init();ya();ma.init();pvi.util.bindFileUploaderEvent();pvi.util.bindTextRemaining.init();qa();ea.setRepeatableRecordsIndices();Y.protectAttachments.init(a);a=$("#stateChangeComment");_.isEmpty(a.data("content"))||(a.removeClass("hidden"),a.webuiPopover({trigger:"hover",html:!1,content:$(this).data("content")}));a=$("#assignedToLogTopBar");a.data("content")&&a.removeClass("hidden");var a=
$("#priorityLog"),b=a.data("content");b&&a.removeClass("hide");pvi.util.manageUserAssign.init();pvi.util.manageCasePriority.init();$("span.pv-ic-priority").webuiPopover({trigger:"click",content:pvi.util.manageCasePriority.getSelectView($("#id").val())});$("i.pv-priority-log").webuiPopover({trigger:"hover",content:b})}}}(),ea=function(){var a=function(){_.each($("form.fceForm").find(".productPETemplate"),function(a){a=$(a);_.every(a.find("div.pv-section-record"),function(a){return $(a).hasClass("deleted")})&&
(a.addClass("deleted").hide(),a=ta.productAnchorHref(a),pv.manageTreeView.deletePEMatrixNodes(a,"productEventMatrix"))});pv.manageTreeView.refreshNodesInPEMatrix("productEventMatrix")};return{setDeletedValue:function(){_.each($(".pv-section-record"),function(a){a=$(a).find("input[name$='deleted']");_.each(a,function(a){a=$(a);_.isEmpty(a.val())&&a.val(!1)})})},hideDeletedRecords:function(){_.each($("form.fceForm").find(".pv-section-record:not(.productPETemplate,.eventPETemplate)"),function(a){a=$(a);
if("true"==a.find("input[name$='deleted']").val()){a.addClass("deleted").hide();var b=a.attr("data-treeNodeId");a=Y.getParentSectionId(a);pv.manageTreeView.triggerDeleteNode(b,a)}});a()},setRepeatableRecordsIndices:function(){_.each($("form .pv-section"),function(a){var b=1;_.each($(a).find("> .pv-section-record"),function(a){a=$(a);var c=a.find("input[name$='deleted']").val();if("false"==c||_.isEmpty(c))a.find(".badge-index").text(b),b+=1})});_.each($("form table.pv-inner-table"),function(a){var b=
1;_.each($(a).find(".pv-section-record"),function(a){a=$(a);var c=a.find("input[name$='deleted']").val();if("false"==c||_.isEmpty(c))a.find(".badge-index").text(b),b+=1})})}}}(),ma=function(){var a=function(){var a=$("#id").val(),b=$("#actionButton"),c=$("ul.action-list li").length;b.on("click",function(){!c&&a&&W(getMessage("no_action_state")+$("h4#caseStateName").text()+" State")})},b=function(a,b,c){return{url:a,xmlType:b,caseId:c}},c=function(a){var b=!_.isEmpty($("#id").val());b||W(getMessage(a));
return b},e=function(a,b){var c=$("#justificationPassword").val();$.ajax({type:"POST",url:a.url,data:{data:JSON.stringify({id:parseInt(a.actionParams.id),toStateId:parseInt(a.actionParams.toStateId),actionPerformed:a.actionPerformed,comments:b.comments,timestamp:b.timestamp,templateId:a.templateId,username:usernameToSavePreference,password:c})},beforeSend:function(){pvui.common.showPVLoader()},success:function(c){pvui.common.hidePVLoader();c=$.parseJSON(c);if(_.has(c,"caseStateChanged")&&!c.caseStateChanged)pvi.util.handleCaseStateChangeRejection(c);
else if(422===c.status)Wa(c.text.errors),Aa(c.text.errorFields);else{$("#pv-justification-modal").modal("hide");$("input[name='id']").val(c["case-id"]);var f=$(".page-head-lt");f.find("#caseStateName").html(c.caseState+'&nbsp<i class="fa fa-info-circle more-option allow-text hidden" id="stateChangeComment" data-content=""></i>');f=f.find("#stateChangeComment");b.comments?(f.hasClass("hidden")&&f.removeClass("hidden"),f.attr("data-content",b.comments),f.webuiPopover("destroy").webuiPopover({trigger:"hover",
html:!1,content:$(this).data("content")})):f.hasClass("hidden")||f.addClass("hidden");$("input[name='caseState']").val(c.caseState);$("input[name='caseState.id']").val(c.caseStateId);$("input[name='sourceDatabaseId']").val(c.sourceDb);r.init();if(c.caseStateId===pvi_case_state.FINAL||c.caseStateId===pvi_case_state.TRANSMITTED)x.disableVersionType(),$("div.page-bot-rt > .btn-back").data("changed",!1);Fa.init();A();a.callback&&a.callback();pvui.common.hidePVLoader();ma.successMessage?(pvi.util.showFloatingNotification.successMessage(ma.successMessage),
ma.successMessage=""):pvi.util.showFloatingNotification.successMessage(c.message)}}})},g=function(a,b){$.ajax({type:"POST",url:a.url,data:{data:JSON.stringify({initialCaseId:b.initialCaseId,followUpCaseId:b.followUpCaseId})},beforeSend:function(){pvui.common.showPVLoader()},success:function(a){a=$.parseJSON(a);pvui.common.hidePVLoader();a.status==pvi_constants.status_fail?($("#messageBox").removeClass("hide"),$("#errorMessage").text(a.message)):($("#pviModalFollowUp").modal("hide"),pvi.util.showFloatingNotification.successMessage(a.message),
window.location.reload())}})};return{init:function(){a()},executeAction:function(a,b){if(c("no_action_on_index")){var f=a.find("a"),k=f.data("action"),m=pvi_urls.case_state_change,h=f.data("case-id"),l=$("#id").val(),h=_.isEmpty(h)?l:h,u=f.data("intake-case-num"),u=_.isNaN(parseInt(u))?$("#intakeCaseNumber").text():u,z=f.attr("data-intake-case-version"),z=_.isEmpty(z)?$("input[name='caseVersion']").val():z,p={url:m,actionPerformed:k,actionParams:{id:h,toStateId:k},templateId:$("#templateId").val()},
E=za.getCaseCountry(),n=$('select[name="vendor.id"]').val();if(a.hasClass("task"))return pvi.util.checkEditLock(h,function(){taskAction.commonMethod.addTask(h,u,z,null,E,n)}),!1;if(a.hasClass("followUpQuery"))return pvi.util.checkEditLock(h,function(){followUpQuery.commonMethod.addFollowUpQuery(h,u,z);pvi.util.getCaseData(h)}),!1;a.hasClass("duplicateSearch")?pvi.util.checkEditLock(h,function(){pvi.util.gotoURL(pvi_urls.duplicate_search_url+f.data("case-id"))}):a.hasClass("copyCase")||a.hasClass("splitCase")||
f.text()===getMessage("split_text")?a.hasClass("copyCase")?pvi.util.checkEditLock(h,pvi.util.manageCopyModal.bindModal,h):pvi.util.checkEditLock(h,pvi.util.manageSplitModal.bindModal,h,a.find("a").attr("data-intake-case-num")):k?_.isEmpty(l)||(k===activeStateId&&a.hasClass("followUp")?pvi.util.checkEditLock(h,function(){p.url=pvi_urls.follow_up_url;pvi.util.showFollowUpModal.init(p,g)}):k===activeStateId?pvi.util.checkEditLock(h,function(){e(p,{})},p):k===rejectedStateId?pvi.util.checkEditLock(h,
function(){pvi.util.justificationModule().showJustificationModal("mark_reject",p,e)},p):k===closedStateId?pvi.util.checkEditLock(h,function(){pvi.util.justificationModule().showJustificationModal("mark_closed",p,e)},p):k===finalStateId&&pvi.util.checkEditLock(h,function(){b?e(p,{}):pvi.util.showWarning(getMessage("submit_btn"),getMessage("cancel_btn_text"),getMessage("ok_btn_text"),function(){e(p,{});swal.close()})},p)):W(getMessage("no_action_on_index"))}},executeViews:function(a){if(c("no_view_on_index")){var f=
$("#id").val();a.hasClass(pvi_constants.pdfView)?(a=$("li.pdfView").find("a").attr("href"),pvi.util.gotoURL(a)):a.hasClass(pvi_constants.e2b)?(a=b(pvi_urls.xml_report_url,pvi_constants.e2b,f),pvi.util.getXMLReport(a)):a.hasClass(pvi_constants.ack)?(a=b(pvi_urls.xml_report_url,pvi_constants.ack,f),pvi.util.getXMLReport(a)):a.hasClass(pvi_constants.fu_diff_view)&&(a=b(pvi_urls.validate_fu_diff_view_url,pvi_constants.fu_diff_view,f),pvi.util.validateFuDiffView(a))}},followUpAjax:g,actionAjax:e,successMessage:void 0}}(),
qa=function(){setTimeout(function(){$(".alert-success").addClass("hide")},2E3)},va=function(){var a=$("input[name='lockedByUser']").val(),b=loginUser,c=a&&a!=b,e=function(a,b){c||g($("#id").val(),a,b)},g=function(a,b,c){$.ajax({type:"POST",url:pvi_urls.release_edit_lock_url,data:{id:a},success:function(a){b&&b(c)},error:function(a){console.log("Failed to get case edit lock info",a)}})};return{init:function(){window.onbeforeunload=function(){e()}},releaseEditLock:e,isLocked:c,lockedByUser:a,currentUser:b}}(),
ya=function(){$(document).on("click","ul.navigateAwayEvent > li, a.side-icon, .topbar .container > ul.nav.navbar-nav li:not(.hidden-xs,.divider,.m-t-20,.notification-list,.notifi-title)",function(a){a.preventDefault();var b=a=$(this);b.is("li")&&(b=a.find("a"));if(0<b.length){var c=$("div.page-bot-rt > .btn-back").data("changed"),c=!(void 0===c||""==c||0==c),b=aa(a,b,c);!c&&b?b():T(a,b)}})},aa=function(a,b,c){var g=b.attr("href");if(a.hasClass("pv-caseVersion-list"))return function(){pvi.util.checkAccessToCase(b.data("case-id"),
g)};if(Va(g))return function(){pvi.util.gotoURL(g)};var k=$("div.page-bot-rt > .btn-cancel");if(a.is("li")){if(0<a.parent("ul.action-list").length)return function(){ma.executeAction(a,c);e=!1;k.addClass("hide")};if(0<a.parent("ul.view-list").length)return function(){ma.executeViews(a);e=!1;k.addClass("hide")}}else if(a.is("a")&&0<a.find("i.create-follow-up").length)return function(){manageCreateFollowUpModal.processFollowUp();e=!1;k.addClass("hide")}},Va=function(a){var b=!1,c=["javascript:void(0);",
"javascript:void(0)"];_.isEmpty(a)||-1!==c.indexOf(a)||a.startsWith("#")||(b=!0);return b},bb=function(){$("div#attachment").on("change","input, select",function(){$("div#attachment").addClass("data-changed");pv.manageTreeView.updateBadge($("#attachment").attr("id"))})},sa=function(a){_.isUndefined(a)&&_.isEmpty($("#id").val())&&(a=$("#attachment"));if(!_.isUndefined(a)){var b=moment().format("DD-MMM-YYYY"),c=n.getListReferenceData("process-status")[0].id,e=a.find("input[type='hidden'][id$='.id']").val();
a.find("#attachmentProcessStatus select").val()||e||a.find("#attachmentProcessStatus select").val(c).trigger("change");a.find("div[data-id='attachmentReceiptDate'] > input").val()||e||a.find("div[data-id='attachmentReceiptDate'] > input").val(b)}},Za=function(){var a=$("input[name='defaultReporterContactType']").val();return{init:function(b){_.isUndefined(b)&&(b=$("#reporter"));_.each(b.find("div.reporterContactType").find("select"),function(b){b=$(b);var c=b.data("value");c&&!_.isEmpty(c)||b.val([a]).trigger("change")})}}}(),
Ja=function(){var a=[],b=[];_.each($("a[data-case-version]"),function(c,e){a[e]=$(c).data("case-version");b[e]=$(c).data("case-version-display")});var c=$("span.caseVersionInfoSpan");0===a.length&&0<c.length&&(a[0]=c.data("case-version"),b[0]=c.data("case-version-display"));0===a.length&&(a=[pvi_constants.case_version_initial_number],b=[pvi_constants.case_version_initial]);var e=function(c){_.isUndefined(c)&&(c=$("#attachment"));_.each(c.find("td.attachmentCaseVersion").find("select"),function(c){var e=
$(c);e.find("option").remove();_.each(a,function(a,c){c=b[c];var f=e.data("value");_.isUndefined(a)||_.isUndefined(c)||(a=parseInt(a),f=!_.isUndefined(f)&&f&&parseInt(f)===a,e.append(new Option(c,a,f,f)))});e.trigger("change")});bb()};return{init:e,setCurrentVersion:function(a){var b=$("a[data-case-version]").data("case-version");b&&!_.isUndefined(b)||!c||0<c.length&&(b=c.data("case-version"));a.find("td.attachmentCaseVersion").find("select").data("value",parseInt(b));e(a)}}}(),za=function(){var a=
$("[data-id='caseCountry']").find("select.country"),b=function(b){return a.attr("readonly")?(b.preventDefault(),!1):!0},c=function(){g(e())||a.attr("readonly",!0);a.on("select2:selecting",function(c){if(!b(c))return!1;var e=parseInt(c.params.args.data.id),h=parseInt($(this).val());if(e!=m&&e!=h){var l=$("#"+pvi_constants.reporter_section).find("select.country"),g=$("#event").find("select.country");c=[];var z=[],p=function(a,b){for(var c=0;c<a.length;c++){var f=parseInt($(a[c]).val());_.isUndefined(f)||
!f||_.isNaN(f)||f==h||b.push(c)}},E=function(a,b){for(var c=0;c<a.length;c++){var f=$(a[c]),l=f.val();if(l&&parseInt(l)==h||b)f.val(e),f.trigger("change")}};p(l,c);p(g,z);0<c.length||0<z.length?na(getMessage("case_country_change_text"),function(b){a.val(h);a.trigger("change");S(b)},function(a){E(l,!0);E(g,!0);S(a)},function(a){E(l,!1);E(g,!1);S(a)}):(E(l,!0),E(g,!0))}return!0});a.on("select2:opening",function(a){if(!b(a))return!1});a.on("select2:unselecting",function(a){if(!b(a))return!1});a.on("change",
function(a){Y.protectAttachments.init($("form.fceForm"))});var c=$("#"+pvi_constants.reporter_section).find("select.country"),k=$("#event").find("select.country"),n=function(a){Y.protectAttachments.bindCountryEvents($(a).parent(),!1)};_.each(c,n);_.each(k,n)},e=function(){return parseInt(a.val())},g=function(a){var b=$("#commonDataElements"),c=b.data("countries-current-user-privacy-location"),b=b.data("all-countries-in-privacy-location");return a?_.contains(b,a)?!!_.contains(c,a):!0:!0};return{init:function(){c();
pvi.caseEntry.manageMultipleRecords.protectAttachments.init()},getCaseCountry:e,currentCaseCountryInPrivacyLocation:g}}(),wa=function(a){var b=$('input[name = "lastSequenceNumber"]'),c=b.val();a=$(a||"form.fceForm").find("input[name$='internalRowId'][value='']");_.each(a,function(a){$(a).val(++c)});b.val(c)},Qa=function(){var a=$("#specialFieldContainer");a.empty();$("form select[data-source-field-path]").each(function(b,c){c=$(c);_.each(c.val(),function(b,e){var g=c;e=g.attr("name")+"["+e+"]."+g.data("source-field-path");
a.append("<input type='hidden' id='"+e+"' value='"+b+"' name='"+e+"' />")})})},Ea=function(){var a=Y.getParentSectionId,b=Y.getRecordsCount;$('form.fceForm input[name$="internalRowId"]').each(function(c,e){c=$(e).parents(".pv-section-record:first");eb(c)&&(e=$("#"+c.attr("id")),e=a(e),1!==b(e)&&c.find("i.md-close").trigger("click"))});pvi.caseEntry.setInternalRowId()},eb=function(a){var b=a.find("input[type='text'],input[type='hidden']:not([name$='internalRowId'], [name$='deleted']), input[type='select'], select, textarea");
(b=_.some(b,function(a){return(a=$(a).val())?a.length:a}))||(b=0<a.find("input[type='checkbox']").length?a.find("input[type='checkbox']").prop("checked"):b);return!b},Ra=function(){var a=$('div[data-id="mostRecentReceiptDate"]'),b=$('div[data-id="safetyDataReceiptDate"]'),c=$('div[data-id="caseDueDate"]'),e=$('<i data-placement="right" data-trigger="hover" class="dueDatePopover m-l-5 fa fa-info-circle"></i>'),g=c.find("#dueDate"),k=b.find("input");a.find("input");var m,n=function(){if(!Ba){g.attr("old-value",
g.val());var a=c.parent().find("#dueDateJustification");c.parent().parent().find("label").append(e);r(a.val());var b=$("#simpleJustificationModal"),h=b.find("#simpleJustification"),f=b.find(".simpleJustificationOkBtn");h.on("keyup",function(){var a=""!=$(this).val()?!1:!0;f.attr("disabled",a)});b.find(".simpleJustificationCancelBtn").on("click",function(){g.val(g.attr("old-value"));b.modal("hide")});f.on("click",function(){var c=h.val();r(c);$("#dueDateManual").val("true");a.val(c);g.attr("old-value",
g.val());b.modal("hide")});b.on("show.bs.modal",function(a){h.val("");f.attr("disabled",!0)});c.on("custom.dp.change",function(){g.attr("old-value")!==g.val()&&b.modal("show")})}},r=function(a){e.attr("data-content",pvi.util.encodeToHTML(a));_.isEmpty(a)?e.hide():e.show();e.webuiPopover("destroy").webuiPopover()},q=function(a,b){a.datetimepicker("disable");var c=a.find('input[type="text"]'),h=c.val(),c=c.attr("name");a.find('input[type="hidden"]').length?a.find('input[type="hidden"]:first').removeAttr("disabled"):
a.append('<input type="hidden" value="'+h+'" name="'+c+'" />');b.hasClass("disabled")&&b.datetimepicker("enable");b.find('input[type="hidden"]').length&&b.find('input[type="hidden"]').remove()},h=function(){m=$("select[name$='caseVersionType.id']").val();x.getCaseVersion(m)==pvi_constants.case_version_followUp&&q(b,a)},l=function(){m=$("select[name$='caseVersionType.id']").val();x.getCaseVersion(m)==pvi_constants.case_version_initial&&q(a,b)},u=function(){m=$("select[name$='caseVersionType.id']").val();
$("#safetyDataReceiptDate").on("custom.dp.change",function(){x.getCaseVersion(m)!=pvi_constants.case_version_followUp&&a.find("input").val(b.find("input").val())})};return{init:function(){u();pvi.util.bindDatePickers();pvi.util.setDateToCorporateTimeZone(k);pvi.util.setDateToCorporateTimeZone(a.find("input"));0<g.length&&pvi.util.setDateToCorporateTimeZone(g,!0);n();h();l()},disableReceiptDateAndEnableMostRecentDate:h,setFirstAndRecentDate:function(a){a=moment(a).format(pvi.util.getDateFormats.defaultFormat);
k.val(pvi.util.formatDate(a,k));pvi.util.setDateToCorporateTimeZone(k);h()},resetFirstReceiptDate:function(a){a=moment(a,getConfig("datepicker.internalServerDateFormat")).format(pvi.util.getDateFormats.defaultFormat);k.val(pvi.util.formatDate(a,k));pvi.util.setDateToCorporateTimeZone(k);l()},setDueDate:function(a,b,h){a&&0<g.length?(a=moment(a).format(pvi.util.getDateFormats.defaultFormatWithoutTime),g.val(pvi.util.formatDate(a,g)),pvi.util.setDateToCorporateTimeZone(g,!0)):g.val("");g.attr("old-value",
g.val());a=c.parent();a.find("#dueDateJustification").val(b);a.find("#dueDateManual").val(h);r(b)}}}(),Sa=function(){var a=function(){$(".ui-layout-resizer, .ui-layout-toggler").unbind("click").unbind("dblclick")};return{init:function(){$(".pane.ui-layout-east").attr("data-size",getConfig("eastPanelSize"));setTimeout(a,350)}}}(),db=function(a){var b=$("form.fceForm select[name='safetyData.sourceType.id']"),c=b.val();a||(c=c?c:b.data("value"));a=$(".studySec");0<=n.getListReferenceData("clinical-trials").indexOf(parseInt(c))||
Ba?(a.removeClass("hide"),pv.manageTreeView.treeView.trigger("pvi.tree.node.show","#study"),c=$("#patientPatientId"),c.removeClass("hide").find("input").removeClass("hide"),c=c.find("input.pv-pii:first"),0<c.length&&c.val(getConfig("maskedText")),Da.initializeAdditionalFields()):(a.addClass("hide"),pv.manageTreeView.treeView.trigger("pvi.tree.node.hide","#study"),Z.isSomeValueExist(a)&&Y.clearInputControls(a),$("#patientPatientId").addClass("hide").find("input").addClass("hide").val(""))},jb=function(){var a=
$("#v-reporter").find("input.primaryReporter");1===a.length&&a.prop("checked",!0)},ib=function(){$(document).on("change","input.primaryReporter",function(){var a=$(this);a.is(":checked")||a.prop("checked",!0);var b=$("input[name='defaultReporterContactType']").val(),a=a.parents("div.pv-reporter").find("div.reporterContactType").find("select"),a=$(a),c=a.val();c&&!_.isEmpty(c)&&c.includes(b)||(c||(c=[]),c.push(b),a.val(c).trigger("change"));$("input.primaryReporter:checked").not(this).prop("checked",
!1);jb()})},La=function(a,b,c){swal(c?c:"",a,b?b:"")},ta=function(){var a=$("form.fieldDefForm #productEventMatrix"),b=n.getListReferenceData("related-roles"),c=n.getListReferenceData("negative-dechallenge"),e=[];_.each(b,function(a){e.push(a.toString())});var g=function(a){return $(a).parents("div.form-group:first").find('input[name$="internalRowId"]').val()},k=function(){var a=$("div.productEventDechallenge").find("select");_.each(a,function(a){m("",$(a))})},m=function(a,b){b=b?b:$(this);a=$(b).parents("div.productEventDechallenge").siblings("div.productEventRechallenge").find("select");
b.val()==c?($(b).parents("div.productEventDechallenge").siblings('select[name$="rechallenge.id"]').val(""),a.val(null).attr("disabled","disabled").trigger("change"),a.parent().find(".select2-selection__rendered").attr("title","")):globalVars.isLocked||globalVars.onlyEditableFieldsAllowed&&(!globalVars.onlyEditableFieldsAllowed||!a.hasClass("allowEdit")&&!a.parent().hasClass("allowEdit"))||a.removeAttr("disabled")},r=function(a){return a.find("div.eventPETemplate").not(".deleted")},q=function(b,c){c||
(c=a);return $(c).find("div.eventPETemplate[data-event-row-id="+b+"]")},w=function(){return a.find("div.productPETemplate").not(".deleted")},h=function(){setTimeout(function(){pv.manageTreeView.refreshNodesInPEMatrix("productEventMatrix")},1E3)},l=function(a,b){a.find("div.event > span.pv-ic-indicator").replaceWith(b);a=a.find("div.event > span.pv-ic-indicator i");b=a.data("content");a.webuiPopover("destroy");b&&pvui.utils.showPopover(b,a)},u=function(a,b,c){0===$("form.fieldDefForm div#productEventMatrix").find("div.productPETemplate:not(.deleted)").length&&
z();var h=w();_.each(h,function(h){h=$(h);var f=c.clone(!1),e=h.attr("data-product-row-id");K(e,a)?(h=q(a,h).not(".deleted"),h.find("span.eventNameHeaderPE").text(b),l(h,f)):O(a,b,e,f,h)});E();aa.setPEMOutdated({reorderEvents:!0,refreshTreeView:!0})},z=function(){var a=$("#product div.pv-section-record").not(".deleted").find("input.productNameBrowser");_.each(a,function(a){gb("",a,!1)})},p=function(){var b=a.find("div.productPETemplate").not(".deleted");_.each(b,function(a){var b=1;_.each(r($(a)),
function(a){$(a).find("div.row-num.num-bg span.row-count").text(b++)})})},E=function(){aa.setPEMOutdated({rowNumberUpdate:!0,reindexAllEvents:!0})},P=function(){var b=a.find("div.productPETemplate"),c=0;_.each(b,function(a){_.each($(a).find("div.eventPETemplate"),function(a){a=$(a);var b=c++;Z.updateIndices("productEventMatrix",a,b)})})},O=function(b,c,h,e,p){var g=$("div#eventPEMatrixTemplate div.eventPETemplate").clone(!0);g.removeAttr("data-persisted");g.find("input[name$=eventInternalId]").val(b);
g.find("input[name$=productInternalId]").val(h);g.find("input[name$=deleted]").val("");g.attr("data-event-row-id",b);g.find("span.eventNameHeaderPE").text(c);l(g,e);p.find("div.event-container-div").append(g);b=a.find(".eventPETemplate.pv-section-record").length;Z.updateIndices("productEventMatrix",g,0<b?b-1:b);Y.postAddEvents(g,!0)},U=function(a,b){var c=D();_.each(c,function(c){c=$(c);if(""!==c.val()){var h=c.parents("div.form-group:first"),f=cb(h),l=h.find("span.pv-ic-indicator").clone(!1);O(f,
x(h,c),a,l,b)}});E()},Ha=function(b,c){var h=$("#productPEMatrixTemplate div.productPETemplate").clone(!0);h.removeAttr("data-persisted");a.find(".pe-row").append(h);var l=a.find("div.productPETemplate").length;Z.updateDivsAnchorIndices(h,[l]);$(h).attr("data-product-row-id",b);S(b,c);U(b,h);aa.setPEMOutdated({reorderProducts:!0})},A=function(a,b){var c=D();_.each(c,function(c){c=$(c);var h=c.parents("div.form-group:first"),f=cb(h),e=h.find("span.pv-ic-indicator").clone(!1);c=x(h,c);h=b.find("div[data-event-row-id="+
f+"]").not(".deleted");0===h.length?O(f,c,a,e,b):(h.show().find("span.eventNameHeaderPE").text(c),l(h,e))});E()},B=function(){var a=!1;_.some($("#event div.pv-section-record:not(.deleted)").find("input.eventNameBrowser"),function(b){if($(b).val())return a=!0});return a},gb=function(a,b,c){if(!b||!b.newRow){var h=void 0!==b?$(b):$(this).parents("div.form-group:first").find("input.productNameBrowser");a=h.val();b=G(h);if(a||b)h=g(h),a&&b&&B()?(b=R(h),b=_.filter(b,function(a){return!($(a).is("[data-persisted]")&&
$(a).is(".deleted"))}),b=$(b),0===b.length?Ha(h,a):(S(h,a),b.removeClass("deleted").show(),A(h,b))):xa(h),ba(),!1!==c&&aa.setPEMOutdated({refreshTreeView:!0})}},x=function(a,b){return(a=a.find("input[name$=reactionCoded]").val())?a:b.val()},C=function(a){return(a=a.find("a.productNameHeaderPE").attr("href"))?a.replace("#",""):a},xa=function(a){a=R(a);a=_.filter(a,function(a){return!($(a).is("[data-persisted]")&&$(a).hasClass("deleted"))});a=$(a);var b=!0;_.each(a.find("div.eventPETemplate.pv-section-record"),
function(a){a=$(a);_.isEmpty(a.find("input[name$='deleted']").val())?a.empty().remove():(b=!1,a.addClass("deleted").hide(),a.find("input[name$=deleted]").val(!0))});b?a.empty().remove():a.addClass("deleted").hide();a=C($(a));pv.manageTreeView.deletePEMatrixNodes(a,"productEventMatrix");aa.setPEMOutdated({refreshTreeView:!0})},F=function(a){var b=w();_.each(b,function(b){var c=$(b).attr("data-product-row-id");b=R(c);1===r(b).length?xa(c):(c=q(a,b),_.isEmpty($(c).find("input[name$='deleted']").val())?
c.empty().remove():(c.addClass("deleted").hide(),c.find("input[name$=deleted]").val(!0)),b=C(b),pv.manageTreeView.deletePEMatrixNodes(c.attr("id"),b))});E();ba();aa.setPEMOutdated({refreshTreeView:!0})},cb=function(a){return a.find('input[name$="internalRowId"]').val()},D=function(){return $("#event div.pv-section-record:not(.deleted) input.eventNameBrowser")},G=function(a){var b=!1;a=$(a).closest(".pv-section-record").find("select.productRoleId");_.contains(e,a.val())&&(b=!0);return b},K=function(a,
b){a=R(a);a=_.filter(a,function(a){return!$(a).find("div.eventPETemplate[data-event-row-id="+b+"]").hasClass("deleted")});return 0<q(b,a).length},I=function(){var a=[],b=B();$("#product div.pv-section-record:not(.deleted) input.productNameBrowser").each(function(){var c=$(this);c.val()&&G(c)&&b&&a.push(g(c))});return a},J=function(){var a=I(),b=w();1<b.length&&_.each(a,function(a,c){var h;_.find(b,function(b){b=$(b);if(b.attr("data-product-row-id")===a)return h=b,!0});h&&w().eq(c).before(h)})},M=
function(){var a=[];$("#event div.pv-section-record:not(.deleted) input.eventNameBrowser").each(function(){var b=$(this);b.val()&&a.push(g(b))});return a},L=function(a){var b=M();w().each(function(){var c=$(this),h=c.find(".eventPETemplate:not(.deleted)");1<h.length&&_.each(b,function(b,f){var l;_.find(h,function(a){a=$(a);if(a.attr("data-event-row-id")===b)return l=a,!0});l&&(a&&l.find("div.row-num.num-bg span.row-count").text(f+1),r(c).eq(f).before(l))})})},Q=function(){_.each(a.find(".peResult"),
function(a){a=$(a);Ma.createIndicatorFlag(a.parents("td:first"));Z.setComplexFieldFlag("",a)})},T=function(){var b=$("#product"),c=$("#event");b.on("change","select[name$='role.id']",ta.createPECombination);b.on("pematrix.event.changed","input.productNameBrowser",ta.createPECombination);c.on("pematrix.event.changed","input.eventNameBrowser, input[name$="+Ma.reactionCodedFieldName+"]",ta.eventChanged);c.on("click",".event-del",function(){F(g($(this).parents(".pv-section-record:first").find("input.eventNameBrowser")))});
b.on("click",".product-del",function(){xa(g($(this).parents(".pv-section-record:first").find("input.productNameBrowser")));ba();aa.setPEMOutdated({refreshTreeView:!0})});a.on("change","div.productEventDechallenge select",ta.disableRechallengeOnNegativeDeChallenge);a.on("change",".peResult",Z.setComplexFieldFlag);Q()},R=function(b){return a.find("div.productPETemplate[data-product-row-id="+b+"]")},V=function(){_.each($("#product  div.pv-section:first > div.pv-section-record"),function(a){a=$(a);var b=
a.find("input[name$=internalRowId]").val();a=a.find("input.productNameBrowser").val();S(b,a)})},S=function(a,b){a=R(a);_.each(a,function(a){$(a).find("a.productNameHeaderPE").text(b)})},W=function(){_.each($("#event  div.pv-section:first > div.pv-section-record"),function(a){a=$(a);var b=a.find("input[name$=internalRowId]").val(),c=a.find("input[name$=reactionCoded]").val(),h=a.find("input.eventNameBrowser").val(),c=c?c:h;a=a.find("span.pv-ic-indicator").clone(!1);b=q(b).not(".deleted");b.find("span.eventNameHeaderPE").text(c);
l(b,a)})},ba=function(){var a=$("form.fieldDefForm div#productEventMatrix"),b=a.find("div.no-pe-warning");0<a.find("div.productPETemplate:not(.deleted)").length?b.text(""):b.text(getMessage("no_pe_combinations"))},aa=function(){var b=$("form.fieldDefForm div#v-productEventMatrix i#pemRefresh"),c=function(){return b.data("require-pem-product-order")},h=function(){return b.data("require-pem-event-order")},l=function(){return b.data("require-reindex-all-events")},e=function(){return b.data("require-row-number-update")},
g=function(){return c()||h()||l()||b.data("require-tree-view-refresh")||e()},u=function(){b.data("require-pem-product-order",!1).data("require-pem-event-order",!1).data("require-reindex-all-events",!1).data("require-tree-view-refresh",!1).data("require-row-number-update",!1).addClass("hide")};u();(function(){b.on("click case.data.submit",function(z){g()&&(pvui.common.pvWidgetLoader.showLoader(a),l()&&P(),c()&&J(),h()&&L(e()),!h()&&e()&&p(),pv.manageTreeView.refreshNodesInPEMatrix(ta.containerDivId),
"click"===z.type&&pvi.util.showFloatingNotification.infoMessage(b.data("success-msg")),u(),pvui.common.pvWidgetLoader.hideLoader(a))})})();return{isPEMOutdated:g,setPEMInSync:u,setPEMOutdated:function(a){a.reorderProducts&&b.data("require-pem-product-order",!0);a.reorderEvents&&b.data("require-pem-event-order",!0);a.reindexAllEvents&&b.data("require-reindex-all-events",!0);a.refreshTreeView&&b.data("require-tree-view-refresh",!0);a.rowNumberUpdate&&b.data("require-row-number-update",!0);b.parent().find("a[href='#productEventMatrix']").hasClass("collapsed")?
b.addClass("hide"):b.removeClass("hide")}}}();return{createPECombination:gb,eventChanged:function(a,b){var c=$(this);a=cb(c.parents("div.form-group:first"));b.eventName?(c=c.parents(".pv-section-record:first").find("span.pv-ic-indicator"),u(a,b.eventName,c)):F(a)},disableRechallengeOnNegativeDeChallenge:m,containerDivId:"productEventMatrix",getNonDeletedEventRows:r,updatePEOrderInPEMatrix:function(){J();L();pv.manageTreeView.refreshNodesInPEMatrix(ta.containerDivId)},productAnchorHref:C,getNonDeletedProductRows:w,
addPersistAttrToPECombination:function(){var a=$("#productEventMatrix").find(".productPETemplate");_.each(a,function(a){$(a).attr("data-persisted","true")})},managePEMRefresh:aa,init:function(){0===$("form.fieldDefForm div#productEventMatrix").find("div.productPETemplate").length?z():(V(),W(),J(),L());ba();k();T();Ba||h();aa.setPEMInSync()}}}(),Y=function(){$("form.fceForm");var a=function(a){return a.parents("div.panel-collapse:first").attr("id")},b=function(a){var b=(g(a)?"table tr":"")+".pv-section-record";
return $("#"+a+" .pv-section:first > "+b+":not(.ui-sortable-placeholder)").not(".initial-record")},c=function(a){return b(a).length},g=function(a){return $("#"+a).data("table")},k=function(a){var b=$(a).attr("data-treeNodeId");Z.clearMeddraHierarchyMapEntry(a);var c=Y.getParentSectionId(a);r(a);a.find("div.attachment-error label:first").text("");Ya.updateTitle(c,a,"");pv.manageTreeView.triggerDeleteNode(b,c);pv.manageTreeView.triggerAddNode($(a).attr("id"),c,"")},r=function(a){Z.clearFlagIcons(a);
_.each(a.find("input[type='text']:not('.has-default-val'),input[type='hidden'],input[type='checkbox']:not('.isProtected'),select:not('.has-default-val'), textarea, i"),function(a){a=$(a);a.is(":checkbox")?a.prop("checked",!1).removeAttr("disabled"):a.hasClass("multipleCheckBoxSelect2")&&a.val()?a.multiSelect("clearSelection"):a.hasClass("select2-box")?(Z.resetFlagIcon(a),q(a),a.data("value","")):a.attr("value","").val("")});wa(a)},q=function(a){a.val(null).trigger("change");a.attr("data-tag")&&a.select2({allowClear:!0,
tags:!0,placeholder:a.data("placeholder")})},N=function(a,b){b=!1;a.find("input.primaryReporter").is(":checked")?La(getMessage("warn_primary_reporter_del")):1===a.parent().children().not(".deleted").length&&a.find("input[name$='deleted'][value='']:first").length?k(a):b=!0;return b},H=function(c,l){A(c);wa(c);var e=a(c);_.isEmpty(e)||l||pv.manageTreeView.triggerValidateAndAddNode(c.attr("id"),e);Ma.bindMeddraBrowserEvent(c);Ma.createIndicatorFlag(c.find(".peResult").parents("td:first"));fb.updateNewAccordian(c);
ha.bindSortableForDynInnerRepeatableTable(c);M();"attachment"===e&&(h.setIsProtectedCheckBoxForNewRow(c),sa(c),Ja.setCurrentVersion(c));"reporter"!==e&&"event"!==e||Y.protectAttachments.bindCountryEvents(c,!0);if(e){c=e;l=b(c);e=l.length;c&&(c=c.split("_")[0]);for(var g=0;g<e;g++){var u=$(l[g]),z=u.find(".btn-del-panel > i");z.length||(z=u.find(".table-row-del > i"));(u=z.length?z.attr("class").match(c+"_[0-9]+"):null)?z.removeClass(u[0]).addClass(c+"_"+g):z.addClass(c+"_"+g)}}},A=function(a){pvi.util.loadDataInSelect2Fields(a);
pvi.util.select2Fields(a);G(a,!0);D(a);pvi.util.bindDatePickers(a);Pa.bindEvents(a);Ma.bindBrowserTextAutocomplete(a);pvi.util.bindTextRemaining.init(a)},h=function(){var a=$("#commonDataElements"),b=_.pluck(n.getListReferenceData("countries"),"id"),c=a.data("countries-current-user-privacy-location"),h=a.data("all-countries-in-privacy-location"),f=$.grep(b,function(a){return 0>$.inArray(a,h)}),l=$("#attachment"),g=function(){return!1},u=function(){var a=$("#attachmentPanel").find("tr");_.each(a,function(a){var b=
$(a).find("input[name$='deleted']").eq(0).val().length,c=$(a).find("input[type='checkbox'][name$='isProtected']").eq(0).is(":checked");if(b&&c&&!$(a).find(".pv-pii").length){b=$(a).find(".input-group").eq(0);b=$(b);b.find("input[name$='fileName']").eq(0).hide();b.find(".input-group-btn").eq(0).hide();a=$(a).find(".select2-container").eq(0);var c=$('<input type="text" class="form-control pv-pii" disabled="disabled" value="PII">'),h=$('<input type="text" class="form-control pv-pii" disabled="disabled" value="PII">');
b.append(c);$(a.parent()).append(h);a.hide()}})},z=function(){var a=$("#attachmentPanel").find("tr");_.each(a,function(a){var b=$(a).find(".input-group").eq(0),b=$(b),c=$(a).find(".select2-container").eq(0);b.find("input[name$='fileName']").eq(0).show();b.find(".input-group-btn").eq(0).show();c.show();a=$(a).find("input.pv-pii");_.each(a,function(a){$(a).remove()})})},k=function(a,b){var l=za.getCaseCountry();a=a.find("input[type='checkbox'][name$='isProtected']");_.contains(c,l)||!l||_.contains(f,
l)?(a.parent().removeClass("disabled"),a.off("click",g)):(a.parent().addClass("disabled"),a.on("click",g));if($("#id").val()&&!e||b)_.contains(h,l)?a.prop("checked",!0):a.prop("checked",!1)},t=function(a,b){var c=za.getCaseCountry(),h=a.find("select.country");_.isUndefined(h)||(b&&h.val(c).trigger("change"),h.on("change",function(b){k(a,!1)}),h.on("select2:selecting",function(a){m=a=parseInt(a.params.args.data.id);var b=parseInt($(this).val()),c=za.getCaseCountry();b===c&&a!==b&&a!==c&&(a={},a[getMessage("no_btn_text")]=
function(a){h.val(b).trigger("change");S(a)},a[getMessage("yes_btn_text")]=function(a){S(a)},ka(getMessage("sub_country_change_text"),a));return!0}))};return{init:function(a){_.isUndefined(a)&&(a=$("#attachment"));var b=$("#id").val();_.each(a.find("input[name$='isProtected']"),function(a){var h=$(a),f=h.closest("tr");a=f.find("input.hidden-case-country").val();sa(f);a=a?parseInt(a):za.getCaseCountry();var p=h.parent(),u=f.find("td.attachmentCaseVersion select"),f=za.currentCaseCountryInPrivacyLocation(a),
z=l.hasClass("lastCountryInPrivacyLocation"),k=function(){p.hasClass("disabled")&&p.removeClass("disabled");h.off("click");u.attr("readonly",!1)},E=function(){p.hasClass("disabled")||p.addClass("disabled");h.on("click",g)};e&&f?_.isEmpty(c)&&a&&(!b||b&&e)&&(f?k():E()):f?k():E();e&&(f&&!z?(l.hasClass("lastCountryInPrivacyLocation")||l.addClass("lastCountryInPrivacyLocation"),k()):!f&&z&&l.removeClass("lastCountryInPrivacyLocation"))});$("#v-attachment").on("change",".isProtected",function(){var a=
$(this);a.attr("data-actionperformed",a.find('input[type="checkbox"]').is(":checked"))})},bindCountryEvents:t,addPIILabelsOnAttachementSection:function(){var a=za.getCaseCountry();_.contains(c,a)?z():u()},setIsProtectedCheckBoxForNewRow:function(a){t(a,!0);k(a,!0)}}}(),l=function(a){_.each(a.find("span.row-count"),function(a){a=$(a);a.text(a.parents("div.pv-section:first").children("div.pv-section-record").not(".deleted").length)})},u=function(a){var b=$(this);a.hasOwnProperty("originalEvent")&&(a=
1==b.data("tabular")?b.parents("div.pv-main:first").attr("id"):b.parents("div.rxmain-container-row").siblings("div.pv-main:first").attr("id"));var h=$("#"+a),f=h.data("table"),e=c(a),g=a,b=h.attr("data-templateId"),b=$("#"+b+" .pv-section-record").first().clone(!0).show().removeClass("deleted");r(b);Z.updateIndices(g,b,e);g=b.find(".redactAttachmentSpan");if(g.length){var u=Z.findClassNameStartsWith(g.attr("class").split(" "),"redactAttachment-");g.addClass("hide").removeClass(u).parent().removeClass("pv-redact-box")}f?
(h=h.find("table:not(.datepicker-calendar-days)"),h.append(b),"test"==a?(f=b.attr("id"),h.find("#"+f+" > td > span.new-index").text(h.find("tbody>tr.pv-section-record").not(".deleted").length),w.indexTestNumberOnTestAdd(h)):h.find("tr:last td:first").text(h.find("tbody>tr.pv-section-record").not(".deleted").length)):(h.find("div.pv-section:first").append(b),l(b));h=b.parent(".pv-draggable-list:first");0===h.length&&0<b.parents(".pv-nested-draggable-list:first").length?ha.highlightRowAddDraggable(b):
0<h.length&&ha.showDragButtons(h);H(b);z(b);a===pvi_constants.reporter_section&&(Ya.createRecordTitle(b),a=b.find("a.inner-repeatable").text().split(" ")[1],1===e&&(e=b.prev(".pv-section-record"),h=e.find("a.inner-repeatable").text().trim().split(" "),h.splice(0,1),h=h.join(" "),pv.manageTreeView.updateNodeText(e.attr("data-treenodeid"),h)),pv.manageTreeView.updateNodeText(b.attr("data-treenodeid"),a))},z=function(a){a=$(a).find(".pv-pii");var b=getConfig("maskedText");_.each(a,function(a){$(a).val(b)})};
return{addRecord:u,postAddEvents:H,commonPostAddEvents:A,deleteRecord:function(){var b=$(this).parents(".pv-section-record:first").attr("id"),h=$("#"+b);h.parent();var l=h.attr("data-treeNodeId"),e=a(h),z=g(e),k=$("#"+e+" .pv-section-record").first().siblings().addBack(),m=c(e);if(N(h,m)){var n=_.last(b.split("-"));k.each(function(a,b){b=$(b);a>n&&(b.find("span.row-count").text(b.prevAll("div.pv-section-record").not(".deleted").length),_.isEmpty($(h).find("input[name$='deleted']").val())&&Z.updateIndices(e,
b,a-1),z&&(a=$(this).find("td:first"),a.text(a.text()-1)))});b=h.parent(".pv-draggable-list:first");0===b.length&&(b=h.parent(".pv-nested-draggable-list:first"));_.isEmpty($(h).find("input[name$='deleted']").val())?(Z.clearMeddraHierarchyMapEntry(h),h.empty().remove()):1===h.parent().children().not(".deleted").length?(k=h.closest(".pv-main, .panel-collapse").attr("id"),h.addClass("deleted").hide(),h.find("input[name$=deleted]").val(!0),u(k)):(h.addClass("deleted").hide(),h.find("input[name$=deleted]").val(!0));
ha.showDragButtons(b);pv.manageTreeView.triggerDeleteNode(l,e);M()}},clearInputControls:r,clearRowValues:k,getParentSectionId:a,getRecordsCount:c,getSectionRow:function(a){return $(a).parents(".pv-section-record:first")},getRecords:b,clearSelect2Fields:q,isSectionTabular:g,getRecordCountForTreeView:function(a){var c=b(a).not(".deleted").length;$("input[name='caseState.id']").val()||!g(a)||1!==c||$("#"+a).hasClass("data-changed")||(c=0);return c},protectAttachments:h}}(),Ya=function(){function a(b,
c,f){var e=!1;f=pvi.util.encodeToHTML(f);_.isEmpty(f)&&(b==pvi_constants.reporter_section&&(e=!0),f=c.find("a.inner-repeatable").data("header"));b=c.find("a[data-toggle=collapse]:first");c=b.children();!0===e?b.html(c).append(" Reporter-"+c.text()):Ba||b.html(c).append(" "+f)}var b=function(a,b){b&&_.isEmpty(a)&&(a=b);return a},c={reporter:{watchProps:["title","givenName","middleName","familyName"],keyStartsWith:"reporters[",titleFunc:function(a,b){b&&(a+=b+" ");return a}},literature:{watchProps:["title"],
keyStartsWith:"literatures[",titleFunc:b},patientMedHistory:{watchProps:["medicalHistory.reactionCoded","medicalHistory.reportedReaction"],keyStartsWith:"patient.medicalHistories[",titleFunc:b},patientDrugHistory:{watchProps:["drugName.value"],keyStartsWith:"patient.pastDrugHistories[",titleFunc:b},parentMedHistory:{watchProps:["medicalHistory.reactionCoded","medicalHistory.reportedReaction"],keyStartsWith:"parent.medicalHistories[",titleFunc:b},parentDrugHistory:{watchProps:["drugName.value"],keyStartsWith:"parent.pastDrugHistories[",
titleFunc:b},event:{watchProps:["reactionCoded","reportedReaction"],keyStartsWith:"events[",titleFunc:b},test:{watchProps:["reactionCoded"],keyStartsWith:"tests[",titleFunc:b},product:{watchProps:["license.value"],keyStartsWith:"products[",titleFunc:b},attachment:{watchProps:["fileName"],keyStartsWith:"fileInputBox[",titleFunc:b}},e=function(){_.each(c,function(a,b){var c=$("#"+b);c.data("header-fields",a);_.each(a.watchProps,function(b){c.on("change","input[name^='safetyData."+a.keyStartsWith+"'][name$='"+
b+"']",function(){var a=Y.getSectionRow(this),b=g(a);pv.manageTreeView.triggerUpdateNode($(a).attr("id"),b)})})})},g=function(b){b=$(b);var c=Y.getParentSectionId(b),e="",g=$("#"+c).data("header-fields");g&&(_.each(g.watchProps,function(a){a=Ba?b.find("span.compare-title:not(.old)"):b.find("input[name$='"+a+"']");var c=!0;a.hasClass("pii-secured")&&(c=!1);c&&(Ba?e=a.text():(a=a.val(),g.titleFunc&&(e=g.titleFunc(e,a))))}),a(c,b,e));return e};return{init:function(){e()},createRecordTitle:g,updateTitle:a}}(),
ab=function(){var a=$(this),b=a.data("id");$("#"+b).hasClass("in")?a.text("+"):a.text("-")},Ma=function(){function a(b,c,h){var f;b.autocomplete({source:function(a,b){f=a.term;$.ajax({url:h.url,data:{browserType:c,search_field:h.searchField,search_value:f},dataType:"json",success:function(a){a=h.formatter(a,h.key);a=E(f,a);b(a)}})},search:function(a,b){$(a.target).addClass("ui-autocomplete-loading")},open:function(a,b){Oa(a);b=$(a.target).closest(".test-name-col");$(a.target).removeClass("ui-autocomplete-loading");
0<b.length&&($.each($(".test-name-col"),function(){$(this).removeClass("pv-testzi-plus")}),$(b).addClass("pv-testzi-plus"))},messages:{noResults:"",results:function(){}},minLength:h.minLength,select:function(a,b){var l=$(a.target),l=Ma.getIndexFromString(l.attr("name"));h.select(a,b,c,0<l?l:0,f,h.container,$(a.target));if(c===pvi_browsers.product_browser)return!1},appendTo:b.parent()});b.attr("placeholder",b.data("placeholder"))}var b=$("form.fceForm"),b=b.length?b:$("form#duplicateSearchForm"),c=
/\[([^)]+)\]/,e=function(a){a=c.exec(a);return null===a?-1:a[1]},g=function(){pvb.core.init("product","product-browser","product-browser-container",{typeCount:getConfig("typeAhead.productBrowser")},!1);var a=$("#product-browser-container"),c=function(a,c){return b.find("input[name='safetyData.products["+a+"]."+c+"']")},h=function(a,c){return b.find("select[name='safetyData.products["+a+"]."+c+"']")},f=function(){var a=function(a){return $("#product div.pv-inner-product-substance:eq("+a+")").find("#productIngredients").parents("table:first")},
b=function(b,c){_.each(a(c).find("tbody tr"),function(a,c){a=$(a);c=new Option(b[c].value,b[c].id,!0,!0);a.find('select[name*="ingredients"]').append(c).trigger("change");a.find('select[name*="ingredients"]').trigger({type:"select2:select",params:{data:b}});wa(a)})},c=function(a,b){var c=$(b).find("select[name$='ingredients']"),h=c.attr("name");c.val("[]").trigger("change");_.each(a,function(a,b){a=new Option(a.value,a.id,!0,!0);c.append(a).trigger("change");c.parent().append('<input type="hidden" id="ingredientsInternalRowId_'+
b+'"  name="'+h+"["+b+'].internalRowId" value="" />')});c.trigger({type:"select2:select",params:{data:a}});c.on("change",function(){var a=$("input[id*=ingredientsInternalRowId_]").length,b=c.parent().find("li span").length;if(b<a)for(;b<a;b++)$("#ingredientsInternalRowId_"+b+"").remove();else for(;a<b;a++)c.append('<input type="hidden" id="ingredientsInternalRowId_'+a+'"  name="'+h+"["+a+'].internalRowId" value="" />')})};return{init:function(h,f,l){if(Z.isSpecialFieldExists())c(h,l);else{a(f).find("tr:gt(1)").remove().end().find("tr:eq(1) td input").val("");
for(l=1;l<h.length;l++)Y.addRecord("productSubstances_"+f);b(h,f)}}}}(),l=function(a,b,l,e,g){var p=c(a,"license.value");p.val(b.tradeName).data("browser-value",b.tradeName);c(a,"license.id").val(b.id);b=Y.getSectionRow(p);f.init(e,a,b);c(a,"id").val(l);h(a,"dosageForm.id").val(g.id).change();p.trigger("change",{pemtriggered:!0});p.trigger("pematrix.event.changed")};$("#product .pv-section").on("change","input.productNameBrowser",function(a,b){a=$(this);if(a.data("browser-value")===a.val()&&void 0===
b)return!1;if(m(a,a.val())!=k.coded){var f=e(a.attr("name"));c(f,"license.id").val("");var l=c(f,"id");c(f,"license.value").data("browser-value",null);l.val("");h(f,"dosageForm.id").val(null).change()}x(this);void 0!==b&&b.hasOwnProperty("pemtriggered")||a.trigger("pematrix.event.changed")});a.on("pvb.item.chosen",function(a,b){if("product"===b.browserType&&b.item){a=b.item;var c=_.find(a.licenses,function(a){return a.id==b.id});l(b.browserIndex,c,a.id,a.ingredients,a.dosageForm)}Qa()})},k={empty:1,
coded:2,notCoded:3,codeDescChanged:4},m=function(a,b){var c=k.empty;if(!_.isEmpty(a.val())){b=!_.isEmpty(b);if(c=globalVars.isSafetyCase){var c=!1,h=a.attr("name");h.endsWith("license.value")&&(c=h.replace("license.value","")+"id",c=!!a.siblings("input[name='"+c+"']").val())}if(c)return k.coded;c=(c=a.data("initial-value"))?c:a.data("browser-value");c=b?c!=a.val()?k.codeDescChanged:k.coded:k.notCoded}return c},r=function(){var a=$("#meddra-browser-container"),b=function(a,b){a=a.replace(a.split(/[. ]+/).pop(),
b);return $("form").find("input[name='"+a+"']")},c=function(a,b){a||(a=b);return a};return{init:function(){pvb.core.init("meddra","meddra-browser","meddra-browser-container",{typeCount:getConfig("typeAhead.eventBrowser")},!1);$("form.fceForm").on("focusout","input.meddraBrowser",function(){var a=$(this),c=a.attr("name");e(c);var h=b(c,"eventName").val(),f=m(a,b(c,"lltCode").val()),l=b(a.attr("name"),"reactionCoded"),g=b(a.attr("name"),"reportedReaction");if(f==k.empty||f==k.notCoded)_.isUndefined(h)&&
(h=l.val()),h&&g.val(h),g.is(":visible")?x(g,null,f):x(l,null,f),l.trigger("pematrix.event.changed",{eventName:g.val()});a.data("initial-value")==a.val()||f!=k.codeDescChanged&&f!=k.empty||(a=b(c,"reactionCoded"),h=b(c,"reportedReaction"),b(c,"eventName").data("initial-value",""),b(c,"lltCode").val(""),b(c,"hierarchyStorageId").val(""),b(c,"codedWithSearchString").val(""),a.hasClass("meddraBrowser")?(a.attr("title",a.val()),h.val(a.val())):(a.val("").attr("title",""),h.val("")),Z.setMedDraHierarchyMap(a),
Z.setMedDraHierarchyMap(h),x(a),x(h),h.data("browser-value",null),a.trigger("change"),a.trigger("pematrix.event.changed",{eventName:h.val()}))});a.on("pvb.item.chosen",function(a,h){if("meddra"===h.browserType&&h.item){var f=h.browserInputName;a=h.item;var l=h.codedWithSearchString;h=b(f,"reactionCoded");var e=h.val(),g=b(f,"eventName");h.val(a.value).attr("title",a.value);b(f,"lltCode").val(a.id);var p=h.val(),l=l?l:e;b(f,"codedWithSearchString").val(l);f=b(f,"reportedReaction");_.isEmpty(f.val())&&
(e=c(e,l),f.val(e));l=c(f.val(),l);f.data("initial-value",l);h.data("initial-value",a.value);g.val(p?p:f.val());g.data("initial-value",a.value?a.value:l);h.trigger("change");Z.setMedDraHierarchyMap(f);Z.setMedDraHierarchyMap(h);x(h,a);h.trigger("pematrix.event.changed",{eventName:h.val()})}})},getInputObject:b}}(),q=function(){pvb.core.init("study","study-browser","study-browser-container",{typeCount:getConfig("typeAhead.studyBrowser")},!1);var a=n.getListReferenceData("countries"),b=$("form input[name='safetyData.study.name']"),
c=$("form input[name='safetyData.study.id']"),h=$("form input[name='safetyData.study.number']"),f=$("form select[name='safetyData.study.studyType.id']"),l=$("#studyRegInfo").find("table"),e=$("#study-browser-container"),g=function(){c.val("");b.val("");f.val("");$("form input[name*='registrations']").val("");$("form select[name*='registrations']").val("").trigger("change");h.data("browser-value",null);wa(l)},p=function(b){var c=b.length;if(0<c){for(var h=1;h<c;h++){var f=l.find("tbody tr:first");
f.find("td:nth-child(1)").text(h+1);f.find('input[name*="registrations"]').val("").attr("name").replace("registrations[0]","registrations["+h+"]");f=f.clone(!0);l.append(f)}_.each(b,function(b,c){c=l.find("tbody tr:nth-child("+c+1+")");c.find('input[name$="number"]').val(b.id);c.find('input[name$="country.typeAheadValue"]').val(Z.getTypeAheadValue(b.countryId,a));c.find('select[name$="country.id"]').val(b.countryId).trigger("change");wa(c)})}else l.find("tbody tr").find("input").val("");l.find("tr:gt("+
(c?c:1)+")").remove();$("form input[name='safetyData.study.number']").trigger("change")};h.on("change",function(){var a=$(this);m(a,a.val())!=k.coded&&g();x(this)});e.on("pvb.item.chosen",function(a,l){g();"study"===l.browserType&&l.item&&(a=l.item,b.val(a.value),h.val(a.number),c.val(a.id),f.val(a.studyType).trigger("change"),h.data("browser-value",a.number),a.registrations&&p(a.registrations))})},w=function(a,b,c,h){pvb.core.launch_browser.init(a+"-browser",b,{browserIndex:c,browserInputName:h})},
h=function(a){a=a||$("form.fieldDefForm #product .pv-section, #duplicateSearchForm .sec-searchCase");a.on("click",".productLicense .btn-open-medrab",function(a){var b=$("form.fieldDefForm"),c=$(this).siblings("input");a=e(c.attr("name"));var c=c.val(),h=b.find("input[name='safetyData.products["+a+"].id']").val(),b=b.find("input[name='safetyData.products["+a+"].license.id']").val(),f={};void 0!==h&&(f={"licenses.value":b,name:h});void 0!==c&&(f.finalValue=c);w("product",f,a)})},l=function(a){a=a||
$("form.fieldDefForm");a.find("input.meddraBrowser").parent("div.internal").on("click",".btn-open-medrab",function(a){a=$(this).parents(".internal:first").find("input").attr("name");var b=r.getInputObject(a,"reactionCoded"),c=r.getInputObject(a,"reportedReaction"),h=r.getInputObject(a,"codedWithSearchString").val(),h=_.isEmpty(h)?c.val():h,h={codedWithSearchString:h};h.llt=r.getInputObject(a,"lltCode").val();h.finalValue=b.val()?b.val():c.val();b=e(b.attr("name"));w("meddra",h,b,a)})},u=function(a){a=
a||$("form.fieldDefForm");a.find("span[name='safetyData.study.search']").on("click",function(a){var b=$("form.fieldDefForm");a=b.find("input[name='safetyData.study.number']").val();var c={},b=b.find("input[name='safetyData.study.id']").val();void 0!==b&&(c={number:b});void 0!==a&&(c.finalValue=a);w("study",c)})},z={product:{container:$("#product-browser-container"),formatter:function(a,b){var c=[];_.each(a,function(a){var h=$.map(a[b],function(b,c){return{id:b.id,value:b.value,data:a}});c=c.concat(h)});
return c},select:function(a,b,c,h,f,l){l.trigger("pvb.item.chosen",{browserType:c,item:b.item.data,id:b.item.id,browserIndex:h,codedWithSearchString:f})},searchField:"licenses.value",url:pvi_urls.browser_search_url,key:"licenses",minLength:getConfig("typeAhead.productBrowser")},meddra:{container:$("#meddra-browser-container"),formatter:function(a,b){a=pvb.core.parseMeddraList(null,a,{});return $.map(a[b],function(a,b){return{id:a.id,value:a.value,data:a}})},select:function(a,b,c,h,f,l,e){a.preventDefault();
a=p(b.item.data);r.getInputObject(e.attr("name"),"reportedReaction").val(f);b={browserType:c,item:a[this.key][0],id:b.item.lltCode,browserIndex:h,browserInputName:e.attr("name"),codedWithSearchString:f};l.trigger("pvb.item.chosen",b)},searchField:"llt",url:pvi_urls.browser_meddra_search_url,key:"llt",minLength:getConfig("typeAhead.eventBrowser")},study:{container:$("#study-browser-container"),formatter:function(a,b){return $.map(a,function(a,b){return{id:a.id,value:a.number,data:a}})},select:function(a,
b,c,h,f,l){l.trigger("pvb.item.chosen",{browserType:c,item:b.item.data,id:b.item.id,browserIndex:h,codedWithSearchString:f})},searchField:"number",url:pvi_urls.browser_search_url,key:"project",minLength:getConfig("typeAhead.studyBrowser")}},p=function(a){a=pvb.core.buildMeddraPath(a);_.isArray(a)||(a=[a]);return _.each(pvb.core.prepareMeddraDataForDisplay(a,{}),function(a,b){_.sortBy(a,"value")})},E=function(a,b){a=$.ui.autocomplete.escapeRegex(a);var c=new RegExp(a,"i");return $.grep(b,function(a){return c.test(a.value)})},
P=function(b){$(b?b:"form.fieldDefForm").find("input[data-browser-type]").filter(function(){return""!==$(this).data("browser-type")}).each(function(){var b=$(this),c=b.data("browser-type");a(b,c,z[c]);c=O(b);B(c);x(b)})},O=function(a){var b=$(a).data("flag-target");b&&(a=Y.getSectionRow(a).find("input[data-field-id="+b+"]"));return $(a).parent()},U=function(a){return a.prop("tagName")&&"TD"===a.prop("tagName").toUpperCase()?a.find("span.pv-ic-indicator").length:0<a.siblings().closest("label").length?
a.siblings().closest("label").find("span.pv-ic-indicator").length:a.siblings("span.pv-ic-indicator").length},A=function(a,b,c){0<a.find("div.internal").length&&!U(a)?a.find("div.internal").append(b):c&&!U(a)?a.hasClass("input-group")?a.after(b):a.append(b):c||U(a)||a.after(b)},B=function(a){a.prop("tagName")&&"TD"===a.prop("tagName").toUpperCase()?A(a,"<span class='pv-ic-indicator'><i class='fa hide white-tooltip icon-result'></i></span>",!0):0<a.siblings().closest("label").length?A(a.siblings().closest("label"),
"<span class='pv-ic-indicator'><i class='fa hide white-tooltip icon-result'></i></span>",!0):A(a,"<span class='pv-ic-indicator'><i class='fa hide white-tooltip icon-result'></i></span>",!0)},x=function(a,b,c){var h=O(a),f=0<$(a).siblings(".hidden-id:first").length?$(a).siblings(".hidden-id:first").val():Y.getSectionRow(a).find(".hidden-id").val();c=c?c:m($(a),f);$(a).val()?h.hasClass("input-group")?h.parent().addClass("indicator-tabular"):h.addClass("indicator-tabular"):h.hasClass("input-group")?
h.parent().removeClass("indicator-tabular"):h.removeClass("indicator-tabular");c==k.coded?Z.showCodedFlag(h,a,b):c==k.notCoded||c==k.codeDescChanged?Z.showNonCodedFlag(h):Z.resetFlagIcon(h)};return{init:function(){g();r.init();q();h();l();u();P()},meddraBrowser:r,bindMeddraBrowserEvent:l,getIndexFromString:e,bindBrowserTextAutocomplete:P,reactionCodedFieldName:"reactionCoded",createIndicatorFlag:B,getInputObject:r.getInputObject}}(),Da=function(){var a=$(".configureFields"),b={};a.find("input:checkbox").each(function(){var a=
$(this),c=a.data("id"),f=a.data("class");b[c]&&-1<f.indexOf(pvi_constants.duplicateFieldIdClass)?b[c+"-"+pvi_constants.duplicateFieldIdClass]=a:b[c]=a});var c=function(){return!$(this).parents(".template-control:first").hasClass("hide")},e=function(){_.each(a,function(a){a=$(a);Ba&&!a.hasClass("always-visible")&&a.addClass("hide")});g();var e="form";0<$("form.fceForm").length&&(e+=".fceForm");$(e).find("input, select, textarea,div.fileupload").filter(c).each(function(){var a=$(this).parents(".internal:first").data("id");
if(void 0!==a&&(a=b[a])){a.attr("checked",!0);var c=a.parents(".field-visible:first");c.data("mandatory")&&(c.addClass("click-disabled"),a.attr("disabled",!0))}})},g=function(){var a=browserStorage.utils.getFromStorage("configureFields"),a=a?JSON.parse(a):{},c;for(c in b){var f,e=a[c];b[c].length&&(f=b[c][0]);var h;h=-1<b[c].data("class").indexOf(pvi_constants.duplicateFieldIdClass)?pvi.util.includeDuplicateFields(b[c].data("id")):pvi.util.excludeDuplicateField(b[c].data("id"));e=_.isUndefined(e)?
!h.hasClass("hide"):e;f.checked=e}},k=function(a,b){if(a){var c=-1<$(a).data("class").indexOf(pvi_constants.duplicateFieldIdClass);a.checked?c?(pvi.util.includeDuplicateFields(b).removeClass("hide"),$("#header-"+b).filter("[data-class*='"+pvi_constants.duplicateFieldIdClass+"']").removeClass("hide")):(pvi.util.excludeDuplicateField(b).removeClass("hide"),$("#header-"+b).not("[data-class*='"+pvi_constants.duplicateFieldIdClass+"']").removeClass("hide")):c?(pvi.util.includeDuplicateFields(b).addClass("hide"),
$("#header-"+b).filter("[data-class*='"+pvi_constants.duplicateFieldIdClass+"']").addClass("hide")):(pvi.util.excludeDuplicateField(b).addClass("hide"),$("#header-"+b).not("[data-class*='"+pvi_constants.duplicateFieldIdClass+"']").addClass("hide"))}};return{init:function(){e();$(".dropdown-toggle").dropdown();$("li.field-visible").on("click",ua);_.each($("li.field-visible"),function(a){var b=$(a);a=b.find(":checkbox")[0];b=b.data("id");k(a,b)})},initializeAdditionalFields:e,saveSelectedState:function(){var a=
{},c;for(c in b)a[c]=b[c].is(":checked");browserStorage.utils.addToStorage("configureFields",JSON.stringify(a))},toggleVisible:k}}(),ua=function(a){var b=$(this);if(!b.hasClass("click-disabled")){var c=b.find(":checkbox")[0],b=b.data("id");a.target!=c&&(c.checked=!c.checked);Da.toggleVisible(c,b)}Da.saveSelectedState();a.stopPropagation()},$a=function(a){if(13===a.keyCode){var b=a.srcElement||a.target;b.tagName&&"textarea"!==b.tagName.toLowerCase()&&(a.preventDefault?a.preventDefault():a.returnValue=
!1)}},J=function(){var a,b,c=$("form.fceForm"),e=$("input[type=submit]"),g=function(e,g){Ea();ea.setDeletedValue();Qa();b=g||function(){};a=e||function(){};globalVars.onlyEditableFieldsAllowed&&Fa.enableFormElements(c);ta.managePEMRefresh.isPEMOutdated()&&$("form.fieldDefForm div#v-productEventMatrix i#pemRefresh").trigger("case.data.submit");c.submit()},k=function(){var a=function(){if($("#id").val()){$("button.submitBtn").removeClass(pvi_case_state_names.ACTIVE);ma.successMessage=J.formSubmitSuccessMessage;
var a=$("ul.action-list>li.action.valid");ma.executeAction(a)}J.showSuccessMessage=!0};return{init:function(){J.showSuccessMessage=!1;g(a)}}}();c.ajaxForm({beforeSubmit:function(){e.attr("disabled","disabled");pvui.common.showPVLoader()},success:function(a){_.has(a,"isLoggedIn")&&!a.isLoggedIn&&location.reload(!0);a=JSON.parse(a);var f=$.parseJSON(a.kaseData);Ka().init(f);$("#alertContainer").addClass("hide");$(".border-red").removeClass("border-red");$(".error-box").removeClass("error-box");f.caseState.id!==
pvi_case_state.FINAL&&f.caseState.id!==pvi_case_state.TRANSMITTED&&x.removeDisable();A();R();"goBack"==$("div.fullcase-page-bot .btn-create").data("destinationURL")&&setTimeout(function(){window.history.back()},2E3);Fa.init(c);pvui.common.hidePVLoader();J.formSubmitSuccessMessage=a.message;J.showSuccessMessage&&pvi.util.showFloatingNotification.successMessage(a.message);$("#templateId").val(f.templateId);b&&b();ta.addPersistAttrToPECombination()},error:function(a){403===a.status?location.assign(pvi_urls.forbidden_action_url):
500<=a.status?pvi.util.defaultAjaxErrorHandling(a):(a=JSON.parse(a.responseText),Wa(a.errors),Aa(a.errorFields),e.removeAttr("disabled"),Fa.init(c),pvui.common.hidePVLoader())},complete:function(){a&&a();J.showSuccessMessage=!0}});return{init:function(){$("button.submitBtn").on("click",function(){$(this).hasClass(pvi_case_state_names.ACTIVE)?k.init():g()})},submitFormAction:g,showSuccessMessage:!0,formSubmitSuccessMessage:void 0}}(),Ka=function(){var a=function(){var a=function(a){return a===Object(a)},
b=function(c,h,f){h=h||new FormData;Object.keys(c).forEach(function(e){var g=f?f+"."+e+"":e;!a(c[e])||Array.isArray(c[e])||c[e]instanceof File?Array.isArray(c[e])?c[e].forEach(function(c,f){f=2<g.length&&g.lastIndexOf("[]")===g.length-2?g:g+"["+f+"]";!a(c)||c instanceof File?(null==c&&(c=""),h.append(f,c)):b(c,h,f)}):null==c[e]?h.append(g,""):h.append(g,c[e]):b(c[e],h,g)});return h};return{objectToFormData:b}},b=function(a){var b=$(a).find("input[type='file']");$.each(b,function(){$(this).val("")});
var c=["templateId"],h=function(a){return _.find(c,function(b){return b==a})};a=$(a).find("input[type='hidden']").not("input[name$='internalRowId']");$.each(a,function(){h(this.name)||$(this).val("")});$("#attachmentUploadModel").find("form")[0].reset()},c=function(b){var c={};a().objectToFormData(b).forEach(function(a,b){c[b]=a});return c},e=function(a){var b=-1;_.each(a,function(a){a=$(a);a.hasClass("deleted")?a.remove():(_.each(a.find('[name^="safetyData."]'),function(a){a=$(a);var c=a.attr("name");
_.isEmpty(c)||(c=Z.updateNameAttr(c,[b+1]),a.attr("name",c).attr("id",c))}),b++)})},g=function(a,b){var f=c(a),h=$(".page-head-lt");e($("#attachmentPanel tr"));e($("#pvDragRecordLiterature .pvi-literature"));Object.keys(f).forEach(function(a){var c=f[a];if(a=b.elements.namedItem(a)){if("undefined"===typeof c||null===c||"null"===c)c="";"hidden"===(a.type||a[0].type)&&$(a).val(c)}});$(b).attr("action")!=pvi_urls.case_form_update&&($(".submitBtn").html("Update"),pvi.util.updateWindowURL("/",a.id),$(".fceForm").attr("action",
pvi_urls.case_form_update));hb.init(a.id);h.find("#intakeCaseNumber").html(a.intakeCaseNum);0===a.allVersionWithId.length&&h.find("#caseVersion").text(a.displayCaseVersion);a.caseVersionType.id===pvi_constants.initial_case_version_id?x.setCaseVersionAttribute(pvi_case_version_code.INITIAL):a.caseVersionType.id===pvi_constants.follow_up_case_version_id&&x.setCaseVersionAttribute(pvi_case_version_code.FOLLOW_UP);x.setCaseVersion(a.caseVersionType.id);a.caseVersionType.id==pvi_constants.follow_up_case_version_id&&
Ra.setFirstAndRecentDate(a.safetyData.receiptDate);Ra.setDueDate(a.dueDate,a.dueDateJustification,a.dueDateManual);$("input[name='id']").val(a.id);h.find("#caseStateName").html(a.caseState.name);$("input[name='caseState']").val(a.caseState.name);$("input[name='caseState.id']").val(a.caseState.id);$("input[name='sourceDatabaseId']").val(a.sourceDb);Q();k(a.caseVersionType.id);var l=a.safetyData.attachments;_.each(l,function(a,b){$('input[name="safetyData.attachments['+b+'].id"]').siblings(".form-control").val(l[b].fileName)});
var g=a.safetyData.events;_.each(g,function(a,b){$('select[name="safetyData.events['+b+'].seriousnesses.id"]').val(_.pluck(g[b].seriousnesses,"id")).trigger("change")});$("#safetyData\\.classifications\\.id").val(_.pluck(a.safetyData.classifications,"id")).trigger("change");var z=a.safetyData.reporters;_.each(z,function(a,b){$('select[name="safetyData.reporters['+b+'].contactTypes.id"]').val(_.pluck(z[b].contactTypes,"id")).trigger("change")});$(".new-file").removeClass("new-file")},k=function(a){if(a==
pvi_constants.initial_case_version_id){a=$('div[data-id="mostRecentReceiptDate"]');var b=a.find('input[type="text"]:first').val();a.find('input[type="hidden"]:first').val(b)}else a==pvi_constants.follow_up_case_version_id&&(a=$('div[data-id="safetyDataReceiptDate"]'),b=a.find('input[type="text"]:first').val(),a.find('input[type="hidden"]:first').val(b))},m=function(a){var b="",c=null,h=$("#priorityLog");a.priority&&(c=a.priority.id,_.each(priorities,function(a){a.id===c&&(b=a.value)}));$("span .pv-ic-priority").attr("data-priority-select-id",
a.id).html(b?b:"-");h.removeClass("hide").attr("data-content",pvi.util.encodeToHTML(a.priorityJustification));$("i.pv-priority-log").webuiPopover("destroy").webuiPopover({trigger:"hover",content:h.data("content")});$("#priorityBtn").removeClass().addClass("btn badge pop-ic"+b)};return{init:function(a){m(a);var c=document.getElementsByClassName("fceForm");b(c[0]);g(a,c[0]);x.removeDisable();r.init()}}},hb=function(){var a=$(".attachmentPanelDiv"),b=$("a.download-all"),c=$("a.expand-all"),e=c.find("i"),
g=0,k=0,m=function(a){var b=a.find("input[type='checkbox'][name$='isProtected']");a=a.find("input[type='hidden'][name$='isProtected']");var c=!1;b.length&&b.parent().hasClass("disabled")?c=b.prop("checked"):a.length&&(c=a.val());return c},n=function(b){_.each(b,function(b,c){c=$("#attachmentViewerRightPanel").clone().html();c=$(c);c.find(".actualViewerPanelHeader").addClass("pv-pii-txtbox");var h=c.find(".attachmentFile"),e=c.find(".redactAttachmentLink"),E=c.find(".attachmentRow"),n=c.find(".actualViewerAttachmentDiv"),
r,v,t="",w;b=$(b);if(!_.isEmpty(b)){var A=b.find('[type="hidden"]');if(A&&0<A.length&&(r=q(A,"fileName").value,v=q(A,"id").value,w=$(q(A,"id")),r&&v)){var A=m(b),B=b.find(".redactAttachmentSpan").hasClass("hide");b.find(".pv-ic-redact.hide").removeClass("redactAttachment-").addClass("redactAttachment-"+v);w.find(".redactAttachmentSpan").removeClass("redactAttachment-").addClass("redactAttachment-"+v);w=b.find("#attachmentFileType").find("select");_.isEmpty(w.val())||(t=w.find('option[value="'+w.val()+
'"]').text());b=b.find("td.attachmentCaseVersion").find("select");b=b.find('option[value="'+b.val()+'"]').text();w=$("#attachmentViewerProvider").val();g+=1;var x="attachment"+g,H=getConfig("maskedText");"true"===String(A)?(k+=1,h.attr("href","#"),h.addClass("pii pv-pii badge"),h.find("span").text(H),E.addClass("pii"),B&&h.parent(".actualViewerPanelHeader").find(".glyphicon.pii").removeClass("hide")):(h.attr("data-id",x),h.attr("aria-controls",x),h.attr("href","#"+x),h.attr("data-filename",r),h.attr("data-storageid",
v),E.find("i").attr("title",getMessage("attachment_panel_export_icon")));n.attr("id",x);w===pvi_constants.basic_attachment_viewer_provider&&(n.find(".loaderViewerContent").attr("id","viewer-"+x),n.find(".dicomAttachmentContent").attr("id","dicom_"+x+"_content"));E.attr("data-filename",r);E.attr("data-storageid",v);e.attr("href","#attachment"+v);e.attr("data-id",x);e.attr("data-storageId",v);e.attr("data-fileName",r);"Choose"===t?h.find("span").text("("+r+")"+(b?" - "+b:"")):h.find("span").text(t+
"("+r+")"+(b?" - "+b:""));e.addClass("redactAttachment-"+v);e.attr("title",getMessage("attachment_panel_redact_version"));a.append(c)}}});r()},r=function(){_.each($(".redactAttachmentSpan").not(".hide"),function(a,b){a=$(a);0<a.length&&(a=Z.findClassNameStartsWith(a.attr("class").split(" "),"redactAttachment-"),$("."+a).removeClass("hide"))})},q=function(a,b){return _.find(a,function(a){return a.name.endsWith(b)})};return{init:function(h){_.isEmpty(a)||(a.html(""),pvi.caseEntry.manageMultipleRecords.protectAttachments.init(),
n($("#attachmentPanel tr").not(".deleted")),n($("#pvDragRecordLiterature .pv-literature").not(".deleted")),0<g&&(b.removeClass("hide"),c.removeClass("hide")),e.hasClass("md-remove")&&(e.addClass("md-add"),e.removeClass("md-remove")),_.isEmpty([h])||b.hasClass("id-added")||(b.attr("href",b.attr("href")+"/"+h),b.addClass("id-added")),g===k&&m($("input[name$='isProtected']").parents("tr:first"))?(b.addClass("all-protected"),e.addClass("all-protected")):(b.removeClass("all-protected"),e.removeClass("all-protected")))}}}(),
fb=function(){var a=function(a,b,c){if(!a)return!1;a=ta.managePEMRefresh.isPEMOutdated();b=b.parents(".rxmain-container-header").find("i.pemRefresh");a&&(c?b.removeClass("hide"):b.addClass("hide"))},e=function(h){var e=$(h.attr("href"));h.removeClass("collapsed").attr("aria-expanded","true");e.addClass("in").attr("aria-expanded","true").attr("style","");h.trigger("shown.bs.collapse",{href:h.attr("href")});if(e.hasClass("product-sec")){var g=0<e.parents(".pv-nested-draggable-list").length?e.parents(".pv-nested-draggable-list"):
e.find('.pv-section-record a[aria-expanded="true"]').parents(".pv-section-record:first"),p=g.find(".curr-record");ha.highlightRowAddDraggable(p.length?p:g)}e.hasClass("inner-accordion")&&ha.removeHighlightingAndArrows(e);e.hasClass("pv-grid-sec")&&((g=e[0].id,"taskSection"!==g||c)?"fuqSection"!==g||b||(pvi.dataGrid.manageGridRefresh.refreshGridData(pvi_constants.fuq_section),b=!0):(c=!0,pvi.dataGrid.manageGridRefresh.refreshGridData(pvi_constants.task_section)));a(e.hasClass("pem-refresh"),h,!0)},
g=function(b){var c=$(b.attr("href"));b.addClass("collapsed").attr("aria-expanded","false");c.removeClass("in").attr("aria-expanded","false").attr("style","height: 0");b.trigger("hidden.bs.collapse",{href:b.attr("href")});a(c.hasClass("pem-refresh"),b,!1);pvi.util.updateScrollbar(q)},k=function(a){a.hasClass("collapsed")?e(a):g(a)},m=function(a){var b=a.find(".panel-heading > .panel-title > a.inner-repeatable");a.hasClass("productPETemplate")&&(b=$(ha.filterInnerSectionTable(b,".relatednessAssesment")));
0<b.length&&n(b,!0,!0);a.hasClass("panel")&&a.addClass("curr-record");ha.showDragButtons(a.parent(".pv-draggable-list:first"));pvi.util.updateScrollbar(q)},n=function(a,b,c){var h=$("a[data-parent='"+a.attr("data-parent")+"']:visible").not("[href='"+a.attr("href")+"']").not(".collapsed").not(".jstree-anchor");b&&(b=Y.getParentSectionId(a),h=$("#"+b).find("a[data-parent='"+a.attr("data-parent")+"'].inner-repeatable").not("[href='"+a.attr("href")+"']").not(".collapsed"));$.each(h,function(a,b){c&&g($(b));
0===$(b).parents(".innerSectionTable:first").length&&$(b).parents(".pv-section-record:first").removeClass("curr-record")})},r=function(){$(".panel-heading").not(".attachment-panel-heading").on("click","a[data-toggle]",function(a){a.stopPropagation();a.preventDefault();a=$(a.target).hasClass("inner-repeatable");A($(this),a)})},w=function(){$(".rxmain-container-top > .rxmain-container-row > .rxmain-container-header-label:visible").on("click","> a",function(a){a.stopPropagation();a.preventDefault();
a=$(this);A(a)})},A=function(a,b){k(a);if(void 0===b){var c=$(a.attr("href"));c.hasClass("pv-main")&&(c=c.find(" .pv-section-record").not(".deleted"),(c=$(ha.filterInnerSectionTable(c,".pv-relatedness")))&&(_.some(c,function(a){var b=$(ha.filterInnerSectionTable($(a).find("a.inner-repeatable"),".relatednessAssesment"));if("true"==b.attr("aria-expanded"))return m($(a)),pv.manageTreeView.openNodeWithHref(b.attr("href").slice(1)),ha.showDragButtons($(a).parent(".pv-draggable-list:first")),!0})||$(ha.filterInnerSectionTable(c.first().find("a.inner-repeatable"),
".relatednessAssesment")).click()));n(a,b,!0)}else{a.hasClass("productNameHeaderPE")&&a.parents(".pv-section-record:first").addClass("curr-record");ha.showDragButtons($(a.attr("href")).parents(".pv-draggable-list:first"));c=!1;if("Product-Section"==a.data("header")||"Study-Section"==a.data("header"))c=!0;n(a,b,c)}pv.manageTreeView.scrollPage(a.attr("href"))},B=function(){$(".fceForm").find(".panel-title > a").each(function(a,b){e($(b))});$(".fceForm").find(".panel-title").on("click","> a",function(a){a.stopPropagation();
a.preventDefault();k($(this))})},h=function(){$(".rxmain-container-top > .rxmain-container-row > .rxmain-container-header-label > a").each(function(a,b){e($(b))});$(".rxmain-container-top > .rxmain-container-row > .rxmain-container-header-label").on("click","> a",function(a){a.stopPropagation();a.preventDefault();k($(this))})};return{init:function(){"true"===$("#showAllAccordion").val()?h():(r(),w(),ba());Ba&&B()},updateNewAccordian:m}}(),ha=function(){var a=function(a){var b=Y.getParentSectionId(a),
c=0;_.each(a.children(".pv-section-record"),function(a,f){a=$(a);if(!a.hasClass("deleted")){var e=c+1;if(a.hasClass("row-table")){var g=a.find("td.new-index:first");g.length?g.text(e):a.find("span.new-index:first").text(e)}else a.hasClass("row-table-test")?a.find("td span.new-index:first").text(e):a.find("span.row-count:first").text(e);c++}Z.updateIndices(b,a,f)});pv.manageTreeView.refreshNodesInSection($("#"+b));n(a);"event"===b?ta.managePEMRefresh.setPEMOutdated({reorderEvents:!0}):"product"===
b&&ta.managePEMRefresh.setPEMOutdated({reorderProducts:!0})},b=function(a,b){$(a).sortable({update:function(a,c){b($(this))}}).disableSelection()},c=function(a){a.hasClass("curr-record")||($("#accordion-case").find(".curr-record").removeClass("curr-record"),a.hasClass("ui-sortable-handle")&&a.addClass("curr-record"))},e=function(a){a=$(a);c(a);n(a.parent())},g=function(){var b=$(".content-box");b.on("click",".pv-draggable-list .ui-sortable-handle:visible",function(a){a=$(a.target);if(0===a.parents(".innerSectionTable:first").length||
0<a.length&&!a.hasClass("ion-calendar")){var b=$(this);n(b);e(b);0<a.parents(".innerSectionTable:first").length&&(a=$("#v-products > .rxmain-container-header .pv-reorder-sec"),a.find(".btn-row-up").addClass("hide"),a.find(".btn-row-down").addClass("hide"))}});b.on("click",".pv-nested-draggable-list .ui-sortable-handle .ui-nested-sortable-handle:visible",function(a){0===$(a.target).parents(".innerSectionTable").length&&(a=$(this),n(a),e(a.parents(".ui-sortable-handle:first")))});b.on("click",".rxmain-container",
function(a){if(!$(a.target).is("i.md.md-add")&&0===$(a.target).parents(".ui-sortable").length||!$(a.target).hasClass("fa-plus-square-o")&&$(a.target).parents("thead:first").hasClass("unhighlightSection"))a=$(this),c(a),n(a)});b.on("click",".btn-row-up:visible",function(b){b.stopPropagation();b.preventDefault();b=$(this);b=k(b);b=$(b);var c=b.find(".curr-record");c.prev().before(c);a(b)});b.on("click",".btn-row-down:visible",function(b){b.stopPropagation();b.preventDefault();b=$(this);b=k(b);b=$(b);
var c=b.find(".curr-record");c.next().after(c);a(b)})},k=function(a){var b=a.data("target");(a=a.data("anchordiv"))&&(b=a+" "+b);return b},m=function(a,b,c){return _.filter(a,function(a){a=$(a).parents(b).length;return c?0<a:0===a})},n=function(a){a=$(a);var b=a.closest(".panel").find(".panel-heading"),c=$(m(a.closest(".panel").find(".panel-heading"),".innerSectionTable",0<b.first().parents(".innerSectionTable").length)),b=c.find(".pv-reorder-sec"),c=c.siblings().find(".pv-reorder-sec"),f=m(a.find(".ui-sortable-handle"),
".innerSectionTable",0<a.find(".ui-sortable-handle").first().parents(".innerSectionTable").length).length;a=a.find(".curr-record").index();c.addClass("hide");1<f&&-1<a?(b.removeClass("hide"),0===a?(b.find(".btn-row-up").addClass("hide"),b.find(".btn-row-down").removeClass("hide")):(a===f-1?b.find(".btn-row-down").addClass("hide"):b.find(".btn-row-down").removeClass("hide"),b.find(".btn-row-up").removeClass("hide"))):b.addClass("hide")};return{init:function(){var c=function(){$(".sectionTitle").unbind("click",
c);setTimeout(function(){b(".pv-draggable-list:not('.notSortableInnerTable .pv-draggable-list'),.pv-nested-draggable-list",a);g()},1)};$(".sectionTitle").one("click",c)},orderRecords:a,bindSortableForDynInnerRepeatableTable:function(c){b(c.find(".pv-draggable-list:not('.notSortableInnerTable .pv-draggable-list'),.pv-nested-draggable-list"),a)},showDragButtons:n,highlightRowAddDraggable:e,highlightRow:c,removeHighlightingAndArrows:function(a){var b=a.parents(".inner:first");a.find(".curr-record").removeClass("curr-record");
b.find(".btn-row-up").addClass("hide");b.find(".btn-row-down").addClass("hide")},filterInnerSectionTable:m}}(),Z=function(){var a=function(a,b){var c=[];_.each($("#"+a).parents(".pv-section-record"),function(a){a=$(a).attr("id");void 0!==a&&c.push(a.substring(a.lastIndexOf("-")+1))});c.push(b);return c},b=function(a,b){var c="_"+b.join("_");_.each(a.find(".inner-repeatable"),function(a){a=$(a);var h=a.attr("id");_.isEmpty(h)||(h=h.replace(/\d/,b.join("_")),a.attr("id",h));"A"===a.prop("tagName")&&
(a.is(".btn-row-up",".btn-row-down")?(e(a,c,"data-target"),e(a,c,"data-anchordiv"),e(a.siblings("a.btn-row-down"),c,"data-target"),e(a.siblings("a.btn-row-down"),c,"data-anchordiv")):e(a,c,"href"))})},c=function(a,b){var c=0;return a=a.replace(/\[[0-9]*\]/g,function(a){return b.length<=c?a:"["+b[c++]+"]"})},e=function(a,b,c){var h=a.attr(c);_.isEmpty(h)||(h=h.substr(0,h.indexOf("_")),b=h+b,h?a.data("parent",b).attr(c,b):"")},k=function(a,b){return a+"-section-"+b},m=function(a){a=$(a);var b=a.siblings().closest("label").find("span.pv-ic-indicator");
1>b.length&&(b=a.find("span.pv-ic-indicator"),b=b.length?b:a.siblings("span.pv-ic-indicator"));b.find("i").remove();b.append("<i></i>");return b.find("i").addClass("fa hide white-tooltip icon-result")},n=function(a){m(a).removeClass("hide").addClass("fa-exclamation-circle text-red")},r=function(a,b,c,h){c=$(b).siblings(".hidden-id").val();_.isEmpty(c)||_.isEmpty(a)||!_.isArray(a)||(a=_.findWhere(a,{lltCode:parseInt(c)}));c=a;h=_.isEmpty(c.meddraVersion)||c.meddraVersion==pvi.util.commonDataMap.currentMeddaVersion?
h:h.removeClass("text-success").addClass("text-warning");b=$(b).attr("name");c=Ma.getInputObject(b,"codedWithSearchString").val();b="<ul class='list-group m-b-0'>"+("<li class='list-group-item'><span class='text-nowrap popover-lbl'><strong>Reported Description:</strong></span><span class='popover-text'>"+Ma.getInputObject(b,"reportedReaction").val()+"</span></li>")+("<li class='list-group-item'><span class='popover-lbl'><strong>Coded Description:</strong></span><span class='popover-text'>"+c+"</span></li>");
b+="<li class='list-group-item'><span class='popover-lbl'><strong>SOC:</strong></span><span class='popover-text'>"+a.socName+" ("+a.socCode+")</span></li>";b+="<li class='list-group-item'><span class='popover-lbl'><strong>HLGT:</strong></span><span class='popover-text'>"+a.hlgtName+" ("+a.hlgtCode+")</span></li>";b+="<li class='list-group-item'><span class='popover-lbl'><strong>HLT:</strong></span><span class='popover-text'>"+a.hltName+" ("+a.hltCode+")</span></li>";b+="<li class='list-group-item'><span class='popover-lbl'><strong>PT:</strong></span><span class='popover-text'>"+
a.ptName+" ("+a.ptCode+")</span></li>";b+="<li class='list-group-item'><span class='popover-lbl'><strong>LLT:</strong></span><span class='popover-text'>"+a.lltName+" ("+a.lltCode+")</span></li>";b+="<li class='list-group-item'><span class='popover-lbl'><strong>MedDRA version:</strong></span><span class='popover-text'>"+a.meddraVersion+"</span></li>";b+="</ul>";h.attr("data-content",b);pvui.utils.showPopover(b,h)},w=function(a,b,c){a=m(a).removeClass("hide").addClass("fa-check-circle text-success");
var h=Y.getSectionRow(b);if((h.find("input[data-browser-type='meddra']").length||b&&"meddra"==$(b).data("browser-type"))&&c){var f=c.parent,e=f.parent,g=e.parent,k=g.parent;r({lltCode:c.id,lltName:c.value,ptCode:f.id,ptName:f.value,hltCode:e.id,hltName:e.value,hlgtCode:g.id,hlgtName:g.value,socCode:k.id,socName:k.value,meddraVersion:pvi.util.commonDataMap.currentMeddaVersion},b,h,a)}},A=function(a,b,c,h){void 0!==a&&void 0!==b&&void 0!==c&&(g[c+"-"+b]={lltcode:a,isUpdated:h});$("form.fieldDefForm #medDraHierarchyMap").val(JSON.stringify(g))},
h=function(a){a=JSON.parse(a);g={};_.each(a,function(a){A(a.lltCode,a.rowId,a.fieldId,!1);var b=$("form input[value='"+a.rowId+"'][name$='internalRowId']"),b=Y.getSectionRow(b),c=b.find("input[data-fieldid='"+a.fieldId+"']"),h=$(c).data("flag-target"),h=h?b.find("input[data-field-id='"+h+"']"):c,f;0<h.siblings("span.pv-ic-indicator:first").length?f=h.siblings("span.pv-ic-indicator"):0<h.parent().siblings("label:first").find("span.pv-ic-indicator").length?f=h.parent().siblings("label:first").find("span.pv-ic-indicator"):
0<h.parent().siblings("span.pv-ic-indicator").length&&(f=h.parent().siblings("span.pv-ic-indicator"));_.isEmpty(f)||r(a,c,b,f.find("i"))})};return{updateIndices:function(h,e,g){var p=a(h,g);_.each(e.find("input, select, textarea,i"),function(a){a=$(a);var b=a.attr("name");_.isEmpty(b)||(b=c(b,p),a.attr("name",b).attr("id",b))});b(e,p);e.attr("id",k(h,g))},updateNameAttr:c,setComplexFieldFlag:function(a,b){a=b?$(b):$(this);b=a.val();""==b||isNaN(b)?b?n(a):m(a):w(a)},bindAutoComplete:function(a,b,c){a.autocomplete({minLength:b,
source:c,appendTo:a.parent(),placeholder:"Type Keyword",messages:{noResults:"",results:function(){}},select:function(b,c){a.data("initial-value",c.item.value)}})},generateSectionRowId:k,updateDivsAnchorIndices:b,isSomeValueExist:function(a){return 0<$(a).find(":input:not(:checkbox):not([type='hidden']):not('.has-default-val')").filter(function(a,b){return $(b).val()}).length||$(a).hasClass("followup-record")},showCodedFlag:w,showNonCodedFlag:n,resetFlagIcon:m,clearFlagIcons:function(a){a.find("input[name$='lltCode']").each(function(){for(key in g)g[key]==
$(this).val()&&delete g[key]});$("form.fieldDefForm #medDraHierarchyMap").val(JSON.stringify(g));_.each(a.find("span i"),function(a){a=$(a);(a.hasClass("fa-check-circle text-success")||a.hasClass("fa-exclamation-circle text-red")||a.hasClass("fa-check-circle text-warning"))&&a.removeClass().addClass("fa hide white-tooltip icon-result")})},getMedDraHierarchyMap:function(a){$.ajax({url:pvi_urls.hierarchy_stored_url,data:{id:a},async:"false",success:function(a){h(a)},error:function(a){pvi.util.defaultAjaxErrorHandling(a);
g={}}})},generateMedDraHierarchyMap:function(a){$.ajax({url:pvi_urls.hierarchy_generate_url,method:"POST",data:{medDraHierarchyMapJson:a},success:function(a){h(a)},error:function(a){pvi.util.defaultAjaxErrorHandling(a);console.log("Failed to generate Meddra Hierarchy for the case",a);g={}}})},setMedDraHierarchyMap:function(a){var b=$(a).data("fieldid"),c=Y.getSectionRow(a).find("input[name$='internalRowId']").val();a=$(a).siblings("input[name$='lltCode']").val();A(a,c,b,!0)},clearMeddraHierarchyMapEntry:function(a){a=
$(a);var b=a.find("input[name$='internalRowId']").val();a.find("input[data-browser-type]").filter(function(){return""!==$(this).data("browser-type")}).each(function(a,c){a=$(c).data("fieldid");A("",b,a,!0)})},getTypeAheadValue:function(a,b){return _.find(b,function(b){return b.id==a}).value},scrollToElement:function(a){a.scrollIntoView({behavior:"smooth"})},isSpecialFieldExists:function(){return 0<$("form select[data-source-field-path]").length},findClassNameStartsWith:function(a,b){return _.find(a,
function(a){return a.startsWith("redactAttachment-")})},initPerfectScrollbar:function(){$(".pv-custom-scrollbar>.ui-layout-center").length&&(q=new PerfectScrollbar(".pv-custom-scrollbar>.ui-layout-center"))}}}(),ba=function(){0===$("#accordion-case").find("a[data-parent=\\#accordion-case]").not(".collapsed").length&&$("a[href='#generalCaseInfo']").not(".jstree-anchor").click()},Pa=function(){var a=function(a,b){return isNaN(b)?b:_.find(n.getListReferenceData(a),function(a){return a.id==b})},b=function(a,
b,c){_.isObject(a)?($(b).val(a.value),c.data("initial-value",a.value)):$(b).val(a)},c=function(a){e(a);g(a);m(a)},e=function(c){c.find("input.pv-autocomplete").not(".typeAhead").not(".ajax").each(function(){var c=$(this),h=c.data("source"),e=a(h,c.val()),l=c.attr("name").replace("idOrValue","id"),l=Y.getSectionRow(c).find("input[name='"+l+"']"),g=parseInt(getConfig("typeAhead.freetext"));b(e,this,l);q(n.getListReferenceData(h),g,c,l,!0)})},g=function(c){c.find("input.pv-autocomplete.typeAhead").each(function(){var c=
$(this),h=c.data("source"),e=k(c),l=a(h,e.val()),g=parseInt(getConfig("typeAhead.nofreetext"));b(l,this,e);q(n.getListReferenceData(h),g,c,e,!1)})},k=function(a){var b="id";a.attr("name").includes("fileType")&&(b="");a=a.attr("name").replace("typeAheadValue",b);return $("form input[name='"+a+"']")},m=function(a){a=$(a).find("input.pv-autocomplete.ajax");_.each(a,function(a){a=$(a);var b=k(a),c=w,h=parseInt(getConfig("typeAhead.substance"));q(c,h,a,b,!1)})},r=function(a,b){var c=new RegExp("^"+$.ui.autocomplete.escapeRegex(b.term),
"i"),h=$.grep(a,function(a){return c.test(a.value)});return a.length&&a[0].code?(a=a.filter(function(a){if(a.code)return a.code.toLowerCase()===b.term.toLowerCase()?a:null}),a=a.concat(h),_.uniq(a,function(a){return a})):h},q=function(a,b,c,h,f){c.autocomplete({source:function(b,h){$.isFunction(a)?h(a(b,h,c)):h(r(a,b))},minLength:b,select:function(a,b){c.val(b.item.value);h.val(b.item.id).data("initial-value",b.item.value).trigger("change");$(this).removeClass("ui-autocomplete-loading");return!1},
autoFocus:!f,appendTo:c.parent(),placeholder:"Type Keyword",open:function(a,b){Oa(a);$(this).parent().find(".ui-autocomplete").css("width",$(this).outerWidth())}});c.on("focusout",function(){var a=$(this),b=a.val()!=h.data("initial-value");!f&&b&&a.val("");a.val()&&!b||h.val("").data("initial-value",null)});c.attr("placeholder","Type Keyword")},w=function(a,b,c){$.ajax({url:c.data("url"),data:{search_term:a.term},dataType:"json",success:function(a){$(c).removeClass("ui-autocomplete-loading");return b(a)}})},
h=function(a){var b=$(a).find('select[name$="ingredients"]');1>b.length&&(b=$(a).find('select[name*="ingredients"][name$="id"]'));a=!!b.data("source-field-path");var c={};_.each(b,function(a,b){(a=$(a).data("value"))&&(c[b]=a)});z(pvi_urls.ingredient_url,b,c,a)},l=function(a,b){var c=getConfig("messages.deprecated");_.each(b,function(b,h){(h=_.find(a,function(a){return a.id==$(b).data("value")}))&&h.value!==c&&(h=new Option(h.value,h.id,!0,!0),$(b).append(h).trigger("change"),$(b).trigger({type:"select2:select",
params:{data:a}}))})},u=function(a,b){_.each(b,function(b,c){_.each(a[c],function(a){_.each(a,function(a){a=new Option(a.value,a.id,!0,!0);$(b).append(a).trigger("change")})});$(b).trigger({type:"select2:select",params:{data:a}})})},z=function(a,b,c,h){void 0!==c&&$.ajax({type:"GET",url:a,traditional:!0,dataType:"json",data:{mapOfIds:JSON.stringify(c),isSpecialField:h},success:function(a){h?u(a,b):l(a,b)}})};return{init:function(a){a=a?$(a):$("form");c(a);h(a)},bindEvents:c,getHiddenElement:k}}(),
Oa=function(a){a=$(a.target);var b=a.autocomplete("widget"),c=parseInt(b.outerHeight()),e=parseInt(a.outerHeight()),g=b.parent(),k=g.parent(),e=parseInt(k.outerHeight())-e,g=g.hasClass("input-group")||"td"===g.prop("tagName").toLowerCase();pvui.utils.isPositionBottom(a)&&(240<=c?g?b.css("top","-250px"):b.css("top",-c+e-1+"px"):g?b.css("top",-c+"px"):b.css("top",-c+e+1+"px"))},Fa=function(){var a=function(){var a=$("input[name='caseState.id']").val(),b=[];_.each(getConfig("case.notEditableCaseStates").split(","),
function(a){b.push(parseInt(a))});return _.contains(b,parseInt(a))},b=function(a){a=a.find("input,select,textarea,checkbox,button.browse");globalVars.isLocked||(a=a.filter(function(a){a=$(this);return globalVars.onlyEditableFieldsAllowed&&!a.hasClass("allowEdit")}));a.prop("disabled",!0);$("input[name=id],input[name=templateId]").prop("disabled",!1)},c=function(a){_.each(a.find("div.rxmain-container-top"),function(a){a=$(a);var b=0!==a.find("#attachment").length;if(globalVars.onlyEditableFieldsAllowed&&
0===a.find("#references").length&&!b||globalVars.isLocked)a.find("span i,a i,.btn-addrow-top,.btn-add-panel, .table-row-del, .add_row_attach, .pvi-add-test-date, .table-column-del, .add-table-row, .add-test-ic, .edit-lock").on("click keydown",function(a){var b=$(a.target);if((b.hasClass("allowEdit")||b.parent().hasClass("allowEdit"))&&!globalVars.isLocked)return!0;a.stopPropagation();a.preventDefault();return!1})})},e=function(a){a=a.find("div.datepicker");globalVars.isLocked||(a=a.filter(function(a){a=
$(this);return globalVars.onlyEditableFieldsAllowed&&0===a.find("input.allowEdit").length}));a.find("i,span").addClass("hide")},g=function(g){var k=globalVars.isSafetyCase;g=g||$("form.fceForm");var m=k||va.isLocked;globalVars.isLocked=m;globalVars.onlyEditableFieldsAllowed=a();if(m||globalVars.onlyEditableFieldsAllowed){if(m){m=$("#pvi-readOnly-indicator");m.removeClass("hide");if(!k){var n=getMessage("case_edit_lock_message",{userName:va.lockedByUser});m.off("mouseover").on("mouseover",function(){$(".notifyjs-metro-base").hide();
pvi.util.showFloatingNotification.warningMessage(n)});$(".notifyjs-metro-base").hide();pvi.util.showFloatingNotification.warningMessage(n)}$("button.submitBtn").addClass("hide");$("#assigneeIdLink").css("pointer-events","none")}c(g);e(g);b(g)}};return{init:function(a){g(a)},enableFormElements:function(a){a=a||$("form.fceForm");a.find("input,select,textarea,checkbox,button.browse").prop("disabled",!1)}}}(),Xa=function(){var a=function(){globalVars.isSafetyCase&&$.ajax({url:pvi_urls.fetch_auto_merged_fields+
$("#id").val(),method:"GET",dataType:"json",success:function(a){if(a=a.data)a=a.split(","),_.each(a,function(a){var b=a.lastIndexOf("[");b+3===a.length&&(a=a.substring(0,b));a.includes("classifications")&&(a=a.replace("[0]",""));a.includes("contactTypes")&&(a=a.replace(/contactTypes\[\d\]/,"contactTypes"));a=$("[name*='"+a+"']","form.fceForm");$(a).addClass("pv-automerge-field")})}})};return{init:function(){a()}}}(),Wa=function(a){for(var b="",c=a.length,e=0;e<c;e++)b+="<li>"+a[e]+"</li>";$("#alertContainer").removeClass("hide alert-success").addClass("alert-danger").html("<ul>"+
b+"</ul>")},Aa=function(a){$(".border-red").removeClass("border-red");$(".error-box").removeClass("error-box");var b=$("form.fceForm"),c=document.getElementById("alertContainer");_.each(a,function(a){a=a.split("-");var c=b.find("."+a[0]+":eq("+a[1]+")");a=c.find(".form-control");0===a.length&&(a=c.parents("div.pv-section:first").find(".internal").children());c=a.parent();c.hasClass("checkbox")?c.addClass("error-box"):a.hasClass("select2-box")&&(a=a.parent().siblings("input").length?$(a).parent().siblings("input").addClass("border-red"):
$(a).siblings("span.select2.select2-container").addClass("border-red"),a.addClass("border-red"))});Z.scrollToElement(c)},Ta=function(){$.ajax({url:pvi_urls.fetch_templates_url,data:{templateId:$("#templateId").val()},cache:!0,success:function(a){$(document.body).append(a)}})},Ba="true"===$("#isDiffViewMode").val();return{managePageLayout:Sa,manageBrowsers:Ma,select2AjaxFields:D,setSelect2Values:G,globalBindEvents:ra,managePEMatrix:ta,checkAndSetPrimaryReporterDefault:jb,manageDateFields:Ra,manageAgeGroup:V,
populateComplexData:function(){_.each($(".combinedComplexField"),function(a){a=$(a);var b=a.val();if(void 0!==b){var c=L(a),e=_.find(K(a),function(a){return void 0!==c&&a.id==c.val()});void 0!==e&&(e=e.value,b.includes(" "+e)||a.val(b+" "+e))}})},manageCombineTypeahead:da,addAjaxFormSupport:J,manageSoftDelete:ea,checkMaxFileSize:function(){$("form.fceForm").on("change","input.file",function(){if(this.files[0].size>k){var a=parseInt(getConfig("fileUpload.maxAllowedFileSize"));if(void 0!==a||0!==a)a/=
1E6;isNaN(a)&&(a=0);La("File limit exceeded. Please select file less than or equal to "+a+"MB");$(this).val("")}})},markRequiredFields:function(){_.each($("form").find("input[type='text'],input[type='hidden'],select, textarea"),function(a){a=$(a);a.data("mandatory")&&a.parents("div.template-control").addClass("required");a.data("mandatoryset")&&a.parents("div.template-control").addClass("required-set")})},manageRepeatableSectionHeader:Ya,manageTestSection:w,manageRepeatableSectionOrder:ha,showGeneralSection:ba,
bindTextAutocomplete:Pa,addRequiredClass:function(){_.each($(".section-header"),function(a){a=$(a);(a.find(".required").length||a.find(".required-set").length)&&a.find("a.sec-display-txt:first").append("<span class='lbl-required'><span></span></span>")})},showLabelAndDataOnHover:function(){$("form.fceForm").on("mouseover","label,input",function(a){a=$(a.target);var b;a.is(":checkbox")?b=a.prop("checked"):a.is(":input")?b=a.val():"LABEL"===a.prop("tagName")&&(b=a.text());a.attr("title",b)})},accordianToggle:fb,
commonFunctions:Z,loadCaseActionsViews:r,setInternalRowId:wa,manageTransReaction:C,bindBackAndCancelButtons:R,bindActionButton:T,isCaseSaved:B,manageAdditionalFields:Da,manageMultipleRecords:Y,manageCaseVersion:x,bindVersionTypeDropdownToggle:F,initiateFormValue:A,afterInit:function(){Q();Ta();R();A()},actions:ma,manageDisableForm:Fa,toggleAttachmentSection:function(){var a=function(){return _.some($("form input[name='safetyData.fileInputBox[-1].fileName']"),function(a){return $(a).val()})};pvi.util.getVariableFromUrl("openAccordion")&&
a()&&($("#eastPanelToggle").prop("checked",!0).trigger("change"),1===$("#accordion-attachment .attachmentPanelDiv .panel.panel-default").length&&(a=$("#accordion-attachment .attachmentPanelDiv .panel.panel-default:first a.attachmentFile"),a.hasClass("pii")?null:a.trigger("click")))},manageEditLock:va,listErrors:Wa,populateErrors:Aa,populateSpecialFields:Qa,bindCaseCountry:za,initAttachmentVersion:Ja,initAttachmentValues:sa,fetchAllTemplates:Ta,markDeprecatedDropdowns:function(){var a=getConfig("messages.deprecated"),
b=$("select");_.each(b,function(b){b=$(b);var c=b.data("value");!_.isEmpty(b.val())||!c||_.isArray(c)&&0===c.length||(b.addClass("mark-deprecated"),b.prepend("<option value='"+c+"' class='deprecated'>"+a+" !</option>").attr("selected","true"),c=b.siblings("span").find(".select2-selection__rendered"),c.length&&(c.addClass("text-deprecated"),b.hasClass("multiSelectSelect2Field")&&(c.html("<span class='text-danger'>"+a+" !</span>"),c.attr("title",a))))});$("select.mark-deprecated").on("change",function(){var a=
$(this);a.removeClass("mark-deprecated");a.siblings("span").find(".select2-selection__rendered").removeClass("text-deprecated");a.find("option.deprecated").remove()})},showCustomSweetAlertPopup:na,setStudyAndPatientVisibility:db,hideAlertAndBckDrp:S,makeFormNonDirty:Q,bindSourceTypeChange:function(){$("#safetyDataSourceType").on("change focusout",db)},isFormDirty:function(){return $("div.page-bot-rt > .btn-back").data("changed")},bindViewButtons:function(){$(document).on("click","ul.view-list li",
function(a){a.preventDefault();a=$(this);var b=a.find("a");0<b.length&&(a=aa(a,b,!1))&&a()})},initDefaultReporterType:Za,manageAutoMergeHighlight:Xa}}();pvi=pvi||{};
pvi.duplicateSearch=function(){var a=function(){var a=[],e=function(){var c=$("form select[name='safetyData.sourceType.id']").val(),b=$("input[name^='safetyData.study']").closest(".template-control");0<=a.indexOf(parseInt(c))?(b.removeClass("hide"),$("#studyName").addClass("hide"),$("#patientPatientId").removeClass("hide").find("input").removeClass("hide"),pvi.caseEntry.manageAdditionalFields.initializeAdditionalFields()):(b.addClass("hide"),pvi.caseEntry.commonFunctions.isSomeValueExist(b)&&pvi.caseEntry.manageMultipleRecords.clearInputControls(b),
$("#patientPatientId").addClass("hide").find("input").addClass("hide").val(""))};return{init:function(){a=pvi.referenceDataUtil.manageReferenceData.getListReferenceData("clinical-trials");$("#safetyDataSourceType").on("change focusout",e);e()}}}(),e=function(){return{init:function(){$("ul.action-list>li.action").click(function(a){a.preventDefault();var e=$(this),c=e.find("a");a=c.data("intake-case-num");var b=c.data("case-version"),g=c.data("action"),k=pvi_urls.case_state_change,c={id:c.data("case-id"),
toStateId:g},C={url:k,actionPerformed:g,actionParams:c},w=$("#id").val(),k=$(".list-row-checkbox:checked"),c=k.data("id");if(g===activeStateId&&e.hasClass("followUp")){var K=$("#intakeCaseNumber").html(),F={};F.initialCaseId=k.data("intake-case-num");F.safetyCaseNum=k.data("safety-case-num");1===k.length?pvi.util.checkEditLock(c,function(){K?(F.url=pvi_urls.follow_up_url,F.followUpCaseId=w,followUpFromList(F)):(F.url=pvi_urls.create_follow_up_url,F.accept=!0,manageCreateFollowUpModal.createFollowUpAjax(F))}):
0===k.length?pvi.util.showMessageAndCallback(getMessage("select_case_follow_up")):1<k.length&&pvi.util.showMessageAndCallback(getMessage("select_single_case"))}else e.hasClass("task")?0<w.length?(e=$("#caseCountryId").val(),g=$("#vendorid").val(),taskAction.commonMethod.addTask(w,a,b,null,e,g)):swal("",getMessage("no_action_on_index")):e.hasClass("followUpQuery")?0<w.length?followUpQuery.commonMethod.addFollowUpQuery(w,a,b):swal("",getMessage("no_action_on_index")):g===activeStateId?(a=function(){C.callback=
function(){setTimeout(function(){pvi.util.gotoURL(pvi_urls.show_case_url+w);pvui.common.showPVLoader()},2E3)};pvi.caseEntry.actions.actionAjax(C,{})},w?pvi.util.checkEditLock(w,a):($("#duplicateSearchForm").unbind().trigger("submit"),pvui.common.showPVLoader())):g===rejectedStateId&&(a=function(){C.callback=function(){setTimeout(function(){pvi.util.gotoURL(pvi_urls.intake_queue_url);pvui.common.showPVLoader()},2E3)};pvi.util.justificationModule().showJustificationModal("mark_reject",C,pvi.caseEntry.actions.actionAjax)},
w?pvi.util.checkEditLock(w,a):(pvi.caseEntry.manageMultipleRecords.clearInputControls($("#dupSearchRight")),$("#caseListContainer").trigger("list.data.table.clear.rows"),pvi.util.showFloatingNotification.warningMessage(getMessage("dup_search_reject_action"))))})}}}(),k=function(){return{init:function(){pvi.caseEntry.loadCaseActionsViews.renderActionsAndViews();pvi.caseEntry.bindViewButtons();var a=$("li.pdfView").find("a"),g=a.attr("href");a.attr("href",pvi.util.updateUrlQueryStringParameter(g,"templateId",
2));e.init()}}}();pvi.util.select2Fields();pvi.caseEntry.setSelect2Values();var g=function(){var a=$(".field-config");a.css("max-height",$(window).height()-a.offset().top-150+"px")}();return{manageGlobalEvents:a,manageAgeGroup:function(){pvi.caseEntry.manageAgeGroup.setSupportOnlyAgeInUnits(!0);pvi.caseEntry.manageAgeGroup.init({invalidAgeMessage:"invalid_age"})},manageActionsAndViews:k,options:{},setDropDownHeight:g,initSelect2Fields:void 0}}();
var initDuplicateSearch=function(){pvi.util.loadCommonData();pvi.caseEntry.managePageLayout.init();pvi.caseEntry.manageBrowsers.init();pvi.duplicateSearch.manageAgeGroup();pvi.caseEntry.populateComplexData();pvi.caseEntry.manageCombineTypeahead.init();pvi.caseEntry.bindTextAutocomplete.init();pvi.caseEntry.showLabelAndDataOnHover();pvi.duplicateSearch.manageGlobalEvents.init();pvi.caseEntry.manageAdditionalFields.init();var a=$("#id").val();a&&pvi.caseEntry.commonFunctions.getMedDraHierarchyMap(a);
pvi.duplicateSearch.manageActionsAndViews.init();pvi.caseEntry.setInternalRowId()},dupRightPanel=function(a,e,k){k.animate({left:"-100%"},800);e.animate({left:"-50%"},800);a.css({"text-align":"center"})},dupLeftPanel=function(a,e,k){e.animate({left:"50%"},800);k.animate({left:"0%"},800);a.css({"text-align":"center"})},toggleDupSection=function(a){var e=a.data("target"),k=$("#dupSearchLeft").parent(),g=$("#dupSearchRight").parent();"dupSearchRight"===e?(k.find("#simpleSearchField").addClass("visible"),
dupLeftPanel(a,g,k)):(k.find("#simpleSearchField").removeClass("visible"),dupRightPanel(a,g,k))},initSliderEvents=function(){$(".icon-dupsearch").click(function(){var a=$(this);toggleDupSection(a)})},initToggleDup=function(){var a=_.isEmpty($("#simpleSearchField").val())?"Left":"Right";toggleDupSection($('.icon-dupsearch[data-target="dupSearch'+a+'"]'));setTimeout(function(){$("#sec-DuplicateCaseSearch").css("opacity",1)},500)},toggleAttachmentSection=function(){var a=$(".actualViewerBar").length;
0<a&&($("#eastPanelToggle").prop("checked",!0).trigger("change"),1===a&&(a=$(".actualViewerBar:first a.attachmentFile"),a.hasClass("pii")||a.trigger("click")))};$(document).ready(function(){pvi.duplicateSearch.options.caseIdAvailable=$("input[name='id']").val();pvi.list.dataGrid("caseListContainer","case-list-table","caseListColumnsBarId",pvi_forms.duplicate_search,pvi.duplicateSearch.options);pvi.referenceDataUtil.init(initDuplicateSearch);initSliderEvents();initToggleDup()});$(window).load(function(){toggleAttachmentSection()});
(function(a){var e=Math.min,k=Math.max,g=Math.floor,n=function(c){return"string"===a.type(c)},q=function(c,b){if(a.isArray(b))for(var e=0,g=b.length;e<g;e++){var k=b[e];try{n(k)&&(k=eval(k)),a.isFunction(k)&&k(c)}catch(q){}}};a.layout={version:"1.4.4",revision:1.0404,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},
west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},
resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",
background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},
center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(c){c=a(c);if(c=c.data("layout")||c.data("parentLayout")){c=c.container;if(c.data("layoutPane"))return c;c=c.closest("."+a.layout.defaults.panes.paneClass);if(c.data("layoutPane"))return c}return null},getParentPaneInstance:function(c){return(c=a.layout.getParentPaneElem(c))?c.data("layoutPane"):null},getParentLayoutInstance:function(c){return(c=a.layout.getParentPaneElem(c))?
c.data("parentLayout"):null},getEventObject:function(a){return"object"===typeof a&&a.stopPropagation?a:null},parsePaneName:function(c){var b=a.layout.getEventObject(c);b&&(b.stopPropagation(),c=a(this).data("layoutEdge"));c&&!/^(west|east|north|south|center)$/.test(c)&&(a.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+c+'"'),c="error");return c},plugins:{draggable:!!a.fn.draggable,effects:{core:!!a.effects,slide:a.effects&&(a.effects.slide||a.effects.effect&&a.effects.effect.slide)}},onCreate:[],
onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||a.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||a.layout.getScrollbarSize("height")},getScrollbarSize:function(c){var b=a('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; border: 0; overflow: scroll;"></div>').appendTo("body"),e={width:b.outerWidth-b[0].clientWidth,height:100-b[0].clientHeight};
b.remove();window.scrollbarWidth=e.width;window.scrollbarHeight=e.height;return c.match(/^(width|height)$/)?e[c]:e},disableTextSelection:function(){var c=a(document);a.fn.disableSelection&&(c.data("textSelectionInitialized")||c.on("mouseup",a.layout.enableTextSelection).data("textSelectionInitialized",!0),c.data("textSelectionDisabled")||c.disableSelection().data("textSelectionDisabled",!0))},enableTextSelection:function(){var c=a(document);a.fn.enableSelection&&c.data("textSelectionDisabled")&&c.enableSelection().data("textSelectionDisabled",
!1)},showInvisibly:function(a,b){return a&&a.length&&(b||"none"===a.css("display"))?(b=a[0].style,b={display:b.display||"",visibility:b.visibility||""},a.css({display:"block",visibility:"hidden"}),b):{}},getElementDimensions:function(c,b){var e={css:{},inset:{}},g=e.css,n={bottom:0},q=a.layout.cssNum,K=Math.round,F=c.offset(),x,G,D;e.offsetLeft=F.left;e.offsetTop=F.top;b||(b={});a.each(["Left","Right","Top","Bottom"],function(k,q){x=g["border"+q]=a.layout.borderWidth(c,q);G=g["padding"+q]=a.layout.cssNum(c,
"padding"+q);D=q.toLowerCase();e.inset[D]=0<=b[D]?b[D]:G;n[D]=e.inset[D]+x});g.width=K(c.width());g.height=K(c.height());g.top=q(c,"top",!0);g.bottom=q(c,"bottom",!0);g.left=q(c,"left",!0);g.right=q(c,"right",!0);e.outerWidth=K(c.outerWidth());e.outerHeight=K(c.outerHeight());e.innerWidth=k(0,e.outerWidth-n.left-n.right);e.innerHeight=k(0,e.outerHeight-n.top-n.bottom);e.layoutWidth=K(c.innerWidth());e.layoutHeight=K(c.innerHeight());return e},getElementStyles:function(a,b){var e={};a=a[0].style;b=
b.split(",");var g=["Top","Bottom","Left","Right"],k=["Color","Style","Width"],n,q,F,x,G,D;for(x=0;x<b.length;x++)if(n=b[x],n.match(/(border|padding|margin)$/))for(G=0;4>G;G++)if(q=g[G],"border"===n)for(D=0;3>D;D++)F=k[D],e[n+q+F]=a[n+q+F];else e[n+q]=a[n+q];else e[n]=a[n];return e},cssWidth:function(c,b){if(0>=b)return 0;var e=a.layout.browser,e=e.boxModel?e.boxSizing?c.css("boxSizing"):"content-box":"border-box",g=a.layout.borderWidth,n=a.layout.cssNum;"border-box"!==e&&(b-=g(c,"Left")+g(c,"Right"));
"content-box"===e&&(b-=n(c,"paddingLeft")+n(c,"paddingRight"));return k(0,b)},cssHeight:function(c,b){if(0>=b)return 0;var e=a.layout.browser,e=e.boxModel?e.boxSizing?c.css("boxSizing"):"content-box":"border-box",g=a.layout.borderWidth,n=a.layout.cssNum;"border-box"!==e&&(b-=g(c,"Top")+g(c,"Bottom"));"content-box"===e&&(b-=n(c,"paddingTop")+n(c,"paddingBottom"));return k(0,b)},cssNum:function(c,b,e){c.jquery||(c=a(c));var g=a.layout.showInvisibly(c);b=a.css(c[0],b,!0);e=e&&"auto"==b?b:Math.round(parseFloat(b)||
0);c.css(g);return e},borderWidth:function(c,b){c.jquery&&(c=c[0]);b="border"+b.substr(0,1).toUpperCase()+b.substr(1);return"none"===a.css(c,b+"Style",!0)?0:Math.round(parseFloat(a.css(c,b+"Width",!0))||0)},isMouseOverElem:function(c,b){var e=a(b||this),g=e.offset();b=g.top;var g=g.left,k=g+e.outerWidth(),e=b+e.outerHeight(),n=c.pageX;c=c.pageY;return a.layout.browser.msie&&0>n&&0>c||n>=g&&n<=k&&c>=b&&c<=e},msg:function(c,b,e,g){a.isPlainObject(c)&&window.debugData?("string"===typeof b?(g=e,e=b):
"object"===typeof e&&(g=e,e=null),e=e||"log( <object> )",g=a.extend({sort:!1,returnHTML:!1,display:!1},g),!0===b||g.display?debugData(c,e,g):window.console&&console.log(debugData(c,e,g))):b?alert(c):window.console?console.log(c):(b=a("#layoutLogger"),b.length||(b=a('<div id="layoutLogger" style="position: '+(a.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),
b.css("left",a(window).width()-b.outerWidth()-5),a.ui.draggable&&b.draggable({handle:":first-child"})),b.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+c.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};(function(){var c=navigator.userAgent.toLowerCase(),b=/(chrome)[ \/]([\w.]+)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||0>c.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(c)||
[],c=b[1]||"",b=b[2]||0,e="msie"===c,g=document.compatMode,k=a.support,n=void 0!==k.boxSizing?k.boxSizing:k.boxSizingReliable,q=!e||!g||"CSS1Compat"===g||k.boxModel||!1,F=a.layout.browser={version:b,safari:"webkit"===c,webkit:"chrome"===c,msie:e,isIE6:e&&6==b,boxModel:q,boxSizing:!("function"===typeof n?!n():!n)};c&&(F[c]=!0);q||g||a(function(){F.boxModel=k.boxModel})})();a.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,
resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:2,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",
centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",
contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,
resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:a.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},
showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,
onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};a.layout.optionsMap=
{layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onload_start onload_end onunload onunload_start onunload_end".split(" "),center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),
noDefault:["paneSelector","resizerCursor","customHotkey"]};a.layout.transformData=function(c,b){b=b?{panes:{},center:{}}:{};var e,g,k,n,q,F,x;if("object"!==typeof c)return b;for(g in c)for(e=b,q=c[g],k=g.split("__"),x=k.length-1,F=0;F<=x;F++)n=k[F],F===x?a.isPlainObject(q)?e[n]=a.layout.transformData(q):e[n]=q:(e[n]||(e[n]={}),e=e[n]);return b};a.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",
resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain",
"cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(c){function b(a,b){a=a.split(".");for(var e=a.length-1,g={branch:c,key:a[e]},k=0,n;k<e;k++)n=a[k],g.branch=void 0==g.branch[n]?b?g.branch[n]={}:{}:g.branch[n];return g}var e=a.layout.backwardCompatibility.map,
g,k,n,q;for(q in e)g=b(q),n=g.branch[g.key],void 0!==n&&(k=b(e[q],!0),k.branch[k.key]=n,delete g.branch[g.key])},renameAllOptions:function(c){var b=a.layout.backwardCompatibility.renameOptions;b(c);c.defaults&&("object"!==typeof c.panes&&(c.panes={}),a.extend(!0,c.panes,c.defaults),delete c.defaults);c.panes&&b(c.panes);a.each(a.layout.config.allPanes,function(a,e){c[e]&&b(c[e])});return c}};a.fn.layout=function(c){function b(b){if(!b)return!0;var c=b.keyCode;if(33>c)return!0;var e={38:"north",40:"south",
37:"west",39:"east"},f=b.shiftKey,g=b.ctrlKey,k,n,m,q;g&&37<=c&&40>=c&&A[e[c]].enableCursorHotkey?q=e[c]:(g||f)&&a.each(w.borderPanes,function(a,b){k=A[b];n=k.customHotkey;m=k.customHotkeyModifier;if((f&&"SHIFT"==m||g&&"CTRL"==m||g&&f)&&n&&c===(isNaN(n)||9>=n?n.toUpperCase().charCodeAt(0):n))return q=b,!1});if(!q||!v[q]||!A[q].closable||B[q].isHidden)return!0;ab(q);b.stopPropagation();return b.returnValue=!1}function m(b){if(V()){this&&this.tagName&&(b=this);var c;n(b)?c=v[b]:a(b).data("layoutRole")?
c=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return c=a(this),!1});if(c&&c.length){var e=c.data("layoutEdge");b=B[e];b.cssSaved&&r(e);if(b.isSliding||b.isResizing||b.isClosed)b.cssSaved=!1;else{var f={zIndex:A.zIndexes.resizer_normal+1},g={},k=c.css("overflow"),m=c.css("overflowX"),q=c.css("overflowY");"visible"!=k&&(g.overflow=k,f.overflow="visible");m&&!m.match(/(visible|auto)/)&&(g.overflowX=m,f.overflowX="visible");q&&!q.match(/(visible|auto)/)&&(g.overflowY=m,f.overflowY=
"visible");b.cssSaved=g;c.css(f);a.each(w.allPanes,function(a,b){b!=e&&r(b)})}}}}function r(b){if(V()){this&&this.tagName&&(b=this);var c;n(b)?c=v[b]:a(b).data("layoutRole")?c=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return c=a(this),!1});if(c&&c.length){b=c.data("layoutEdge");b=B[b];var e=b.cssSaved||{};b.isSliding||b.isResizing||c.css("zIndex",A.zIndexes.pane_normal);c.css(e);b.cssSaved=!1}}}var C=a.layout.browser,w=a.layout.config,K=a.layout.cssWidth,F=a.layout.cssHeight,
x=a.layout.getElementDimensions,G=a.layout.getElementStyles,D=a.layout.getEventObject,I=a.layout.parsePaneName,A=a.extend(!0,{},a.layout.defaults);A.effects=a.extend(!0,{},a.layout.effects);var B={id:"layout"+a.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},Q={north:null,south:null,east:null,west:null,center:null},
M={data:{},set:function(a,b,c){M.clear(a);M.data[a]=setTimeout(b,c)},clear:function(a){var b=M.data;b[a]&&(clearTimeout(b[a]),delete b[a])}},T=function(b,c,e){var f=A;(f.showErrorMessages&&!e||e&&f.showDebugMessages)&&a.layout.msg(f.name+" / "+b,!1!==c);return!1},R=function(b,c,e){var f=c&&n(c),g=f?B[c]:B,k=f?A[c]:A,m=A.name,q=b+(b.match(/_/)?"":"_end"),r=q.match(/_end$/)?q.substr(0,q.length-4):"",w=k[q]||k[r],x="NC",F=[],C=f?v[c]:0;if(f&&!C)return x;f||"boolean"!==a.type(c)||(e=c,c="");if(w)try{n(w)&&
(w.match(/,/)?(F=w.split(","),w=eval(F[0])):w=eval(w)),a.isFunction(w)&&(x=F.length?w(F[1]):f?w(c,v[c],g,k,m):w(X,g,k,m))}catch(D){T(A.errors.callbackError.replace(/EVENT/,a.trim((c||"")+" "+q)),!1),"string"===a.type(D)&&string.length&&T("Exception:  "+D,!1)}e||!1===x||(f?(k=A[c],g=B[c],C.triggerHandler("layoutpane"+q,[c,C,g,k,m]),r&&C.triggerHandler("layoutpane"+r,[c,C,g,k,m])):(t.triggerHandler("layout"+q,[X,g,k,m]),r&&t.triggerHandler("layout"+r,[X,g,k,m])));f&&"onresize_end"===b&&Wa(c+"",!0);
return x},Ia=function(a){if(!C.mozilla){var b=v[a];"IFRAME"===B[a].tagName?b.css(w.hidden).css(w.visible):b.find("IFRAME").css(w.hidden).css(w.visible)}},W=function(a){var b=v[a];a=w[a].dir;b={minWidth:1001-K(b,1E3),minHeight:1001-F(b,1E3)};"horz"===a&&(b.minSize=b.minHeight);"vert"===a&&(b.minSize=b.minWidth);return b},ka=function(b,c,e){var f=b;n(b)?f=v[b]:b.jquery||(f=a(b));b=F(f,c);f.css({height:b,visibility:"visible"});0<b&&0<f.innerWidth()?e&&f.data("autoHidden")&&(f.show().data("autoHidden",
!1),C.mozilla||f.css(w.hidden).css(w.visible)):e&&!f.data("autoHidden")&&f.hide().data("autoHidden",!0)},na=function(b,c,e){e||(e=w[b].dir);n(c)&&c.match(/%/)&&(c="100%"===c?-1:parseInt(c,10)/100);if(0===c)return 0;if(1<=c)return parseInt(c,10);var f=A,p=0;"horz"==e?p=N.innerHeight-(v.north?f.north.spacing_open:0)-(v.south?f.south.spacing_open:0):"vert"==e&&(p=N.innerWidth-(v.west?f.west.spacing_open:0)-(v.east?f.east.spacing_open:0));if(-1===c)return p;if(0<c)return g(p*c);if("center"==b)return 0;
e="horz"===e?"height":"width";f=v[b];b="height"===e?ia[b]:!1;var p=a.layout.showInvisibly(f),k=f.css(e),m=b?b.css(e):0;f.css(e,"auto");b&&b.css(e,"auto");c="height"===e?f.outerHeight():f.outerWidth();f.css(e,k).css(p);b&&b.css(e,m);return c},S=function(a,b){var c=v[a],e=A[a],f=B[a],g=b?e.spacing_open:0,e=b?e.spacing_closed:0;return!c||f.isHidden?0:f.isClosed||f.isSliding&&b?e:"horz"===w[a].dir?c.outerHeight()+g:c.outerWidth()+g},la=function(a,b){if(V()){var c=A[a],f=B[a],g=w[a],n=g.dir;g.sizeType.toLowerCase();
b=void 0!=b?b:f.isSliding;var g=c.spacing_open,m=w.oppositeEdge[a],q=B[m],r=v[m],t=!r||!1===q.isVisible||q.isSliding?0:"horz"==n?r.outerHeight():r.outerWidth(),m=(!r||q.isHidden?0:A[m][!1!==q.isClosed?"spacing_closed":"spacing_open"])||0,q="horz"==n?N.innerHeight:N.innerWidth,r=W("center"),r="horz"==n?k(A.center.minHeight,r.minHeight):k(A.center.minWidth,r.minWidth);b=q-g-(b?0:na("center",r,n)+t+m);n=f.minSize=k(na(a,c.minSize),W(a).minSize);b=f.maxSize=e(c.maxSize?na(a,c.maxSize):1E5,b);f=f.resizerPosition=
{};g=N.inset.top;t=N.inset.left;m=N.innerWidth;q=N.innerHeight;c=c.spacing_open;switch(a){case "north":f.min=g+n;f.max=g+b;break;case "west":f.min=t+n;f.max=t+b;break;case "south":f.min=g+q-b-c;f.max=g+q-n-c;break;case "east":f.min=t+m-b-c,f.max=t+m-n-c}}},pa=function(b,c){b=a(b);var e=b.data("layoutRole"),f=b.data("layoutEdge"),g=A[f][e+"Class"],f="-"+f,k=b.hasClass(g+"-closed")?"-closed":"-open",n="-closed"===k?"-open":"-closed",k=g+"-hover "+(g+f+"-hover ")+(g+k+"-hover ")+(g+f+k+"-hover ");c&&
(k+=g+n+"-hover "+(g+f+n+"-hover "));"resizer"==e&&b.hasClass(g+"-sliding")&&(k+=g+"-sliding-hover "+(g+f+"-sliding-hover "));return a.trim(k)},ja=function(b,c){c=a(c||this);b&&"toggler"===c.data("layoutRole")&&b.stopPropagation();c.addClass(pa(c))},oa=function(b,c){b=a(c||this);b.removeClass(pa(b,!0))},L=function(b){b=a(this).data("layoutEdge");var c=B[b];a(document);c.isResizing||B.paneResizing||A.maskPanesEarly&&Sa(b,{resizing:!0})},da=function(b,c){var e=c||this,f=a(e).data("layoutEdge"),g=f+
"ResizerLeave";a(document);M.clear(f+"_openSlider");M.clear(g);c?A.maskPanesEarly&&!B.paneResizing&&db():M.set(g,function(){da(b,e)},200)},V=function(){return B.initialized||B.creatingLayout?!0:ra()},ra=function(b){var c=A;if(!t.is(":visible"))return!b&&C.webkit&&"BODY"===t[0].tagName&&setTimeout(function(){ra(!0)},50),!1;if(!sa("center").length)return T(c.errors.centerPaneMissing);B.creatingLayout=!0;a.extend(N,x(t,c.inset));Za();c.scrollToBookmarkOnLoad&&(b=self.location,b.hash&&b.replace(b.hash));
X.hasParentLayout?c.resizeWithWindow=!1:c.resizeWithWindow&&a(window).bind("resize."+H,va);delete B.creatingLayout;B.initialized=!0;q(X,a.layout.onReady);R("onload_end");return!0},ea=function(b,c){var e=I.call(this,b),f=v[e];if(f){var g=ia[e],k=B[e];b=A[e];var n=A.stateManagement||{};c=c?b.children=c:b.children;if(a.isPlainObject(c))c=[c];else if(!c||!a.isArray(c))return;a.each(c,function(b,c){a.isPlainObject(c)&&(c.containerSelector?f.find(c.containerSelector):g||f).each(function(){var b=a(this),
h=b.data("layout");if(!h){ma({container:b,options:c},k);if(n.includeChildren&&B.stateData[e]){var h=(B.stateData[e].children||{})[c.instanceKey],f=c.stateManagement||(c.stateManagement={autoLoad:!0});!0===f.autoLoad&&h&&(f.autoSave=!1,f.includeChildren=!0,f.autoLoad=a.extend(!0,{},h))}(h=b.layout(c))&&qa(e,h)}})})}},ma=function(a,b){var c=a.container;a=a.options;var e=a.stateManagement,f=a.instanceKey||c.data("layoutInstanceKey");f||(f=(e&&e.cookie?e.cookie.name:"")||a.name);f=f?f.replace(/[^\w-]/gi,
"_").replace(/_{2,}/g,"_"):"layout"+ ++b.childIdx;a.instanceKey=f;c.data("layoutInstanceKey",f);return f},qa=function(b,c){var e=v[b],f=Q[b],g=B[b];a.isPlainObject(f)&&(a.each(f,function(a,b){b.destroyed&&delete f[a]}),a.isEmptyObject(f)&&(f=Q[b]=null));c||f||(c=e.data("layout"));c&&(c.hasParentLayout=!0,e=c.options,ma(c,g),f||(f=Q[b]={}),f[e.instanceKey]=c.container.data("layout"));X[b].children=Q[b];c||ea(b)},va=function(){var a=A,b=Number(a.resizeWithWindowDelay);10>b&&(b=100);M.clear("winResize");
M.set("winResize",function(){M.clear("winResize");M.clear("winResizeRepeater");var b=x(t,a.inset);b.innerWidth===N.innerWidth&&b.innerHeight===N.innerHeight||Xa()},b);M.data.winResizeRepeater||ya()},ya=function(){var a=Number(A.resizeWithWindowMaxDelay);0<a&&M.set("winResizeRepeater",function(){ya();Xa()},a)},aa=function(){R("onunload_start");q(X,a.layout.onUnload);R("onunload_end")},Va=function(c){c=c?c.split(","):w.borderPanes;a.each(c,function(c,h){c=A[h];if(c.enableCursorHotkey||c.customHotkey)return a(document).bind("keydown."+
H,b),!1})},bb=function(){function b(c){var h=A[c],e=A.panes;h.fxSettings||(h.fxSettings={});e.fxSettings||(e.fxSettings={});a.each(["_open","_close","_size"],function(b,f){var g="fxName"+f;b="fxSpeed"+f;f="fxSettings"+f;var l=h[g]=h[g]||e[g]||h.fxName||e.fxName||"none",k=a.effects&&(a.effects[l]||a.effects.effect&&a.effects.effect[l]);"none"!==l&&A.effects[l]&&k||(l=h[g]="none");l=A.effects[l]||{};g=l.all||null;l=l[c]||null;h[b]=h[b]||e[b]||h.fxSpeed||e.fxSpeed||null;h[f]=a.extend(!0,{},g,l,e.fxSettings,
h.fxSettings,e[f],h[f])});delete h.fxName;delete h.fxSpeed;delete h.fxSettings}var e,f,g,p,n,m;c=a.layout.transformData(c,!0);c=a.layout.backwardCompatibility.renameAllOptions(c);if(!a.isEmptyObject(c.panes)){e=a.layout.optionsMap.noDefault;p=0;for(n=e.length;p<n;p++)g=e[p],delete c.panes[g];e=a.layout.optionsMap.layout;p=0;for(n=e.length;p<n;p++)g=e[p],delete c.panes[g]}e=a.layout.optionsMap.layout;var q=a.layout.config.optionRootKeys;for(g in c)p=c[g],0>a.inArray(g,q)&&0>a.inArray(g,e)&&(c.panes[g]||
(c.panes[g]=a.isPlainObject(p)?a.extend(!0,{},p):p),delete c[g]);a.extend(!0,A,c);a.each(w.allPanes,function(k,p){w[p]=a.extend(!0,{},w.panes,w[p]);f=A.panes;m=A[p];if("center"===p)for(e=a.layout.optionsMap.center,k=0,n=e.length;k<n;k++)g=e[k],c.center[g]||!c.panes[g]&&m[g]||(m[g]=f[g]);else m=A[p]=a.extend(!0,{},f,m),b(p),m.resizerClass||(m.resizerClass="ui-layout-resizer"),m.togglerClass||(m.togglerClass="ui-layout-toggler");m.paneClass||(m.paneClass="ui-layout-pane")});p=c.zIndex;q=A.zIndexes;
0<p&&(q.pane_normal=p,q.content_mask=k(p+1,q.content_mask),q.resizer_normal=k(p+2,q.resizer_normal));delete A.panes},sa=function(a){a=A[a].paneSelector;if("#"===a.substr(0,1))return t.find(a).eq(0);var b=t.children(a).eq(0);return b.length?b:t.children("form:first").children(a).eq(0)},Za=function(b){I(b);a.each(w.allPanes,function(a,b){Ja(b,!0)});Qa();a.each(w.borderPanes,function(a,b){v[b]&&B[b].isVisible&&(la(b),ba(b))});Fa("center");a.each(w.allPanes,function(a,b){za(b)})},Ja=function(a,b){if(b||
V()){b=A[a];var c=B[a],f=w[a],g=f.dir,n="center"===a,q={},t=v[a],U,x;t?ib(a,!1,!0,!1):ia[a]=!1;t=v[a]=sa(a);if(t.length){t.data("layoutCSS")||t.data("layoutCSS",G(t,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));X[a]={name:a,pane:v[a],content:ia[a],options:A[a],state:B[a],children:Q[a]};t.data({parentLayout:X,layoutPane:X[a],layoutEdge:a,layoutRole:"pane"}).css(f.cssReq).css("zIndex",A.zIndexes.pane_normal).css(b.applyDemoStyles?f.cssDemo:
{}).addClass(b.paneClass+" "+b.paneClass+"-"+a).bind("mouseenter."+H,ja).bind("mouseleave."+H,oa);f={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",
resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(x in f)t.bind("layoutpane"+x.toLowerCase()+"."+H,X[f[x]||x]);Ea(a,!1);n||(U=c.size=na(a,b.size),x=na(a,b.minSize)||1,n=na(a,b.maxSize)||1E5,0<U&&(U=k(e(U,n),x)),c.autoResize=b.autoResize,c.isClosed=!1,c.isSliding=!1,c.isResizing=!1,c.isHidden=!1,c.pins||(c.pins=[]));c.tagName=t[0].tagName;c.edge=a;c.noRoom=!1;c.isVisible=!0;wa(a);"horz"===g?q.height=F(t,U):"vert"===g&&(q.width=K(t,U));t.css(q);"horz"!=g&&Fa(a,!0);B.initialized&&(Qa(a),Va(a));b.initClosed&&
b.closable&&!b.initHidden?Da(a,!0,!0):b.initHidden||b.initClosed?Y(a):c.noRoom||t.css("display","block");t.css("visibility","visible");b.showOverflowOnHover&&t.hover(m,r);B.initialized&&za(a)}else v[a]=!1}},za=function(a){var b=v[a],c=B[a],e=A[a];b&&(b.data("layout")&&qa(a,b.data("layout")),c.isVisible&&(B.initialized?Xa():Aa(a),e.triggerEventsOnLoad?R("onresize_end",a):Wa(a,!0)),e.initChildren&&e.children&&ea(a))},wa=function(b){b=b?b.split(","):w.borderPanes;a.each(b,function(a,b){a=v[b];var c=
ca[b],h=B[b],e=w[b].side,f={};if(a){switch(b){case "north":f.top=N.inset.top;f.left=N.inset.left;f.right=N.inset.right;break;case "south":f.bottom=N.inset.bottom;f.left=N.inset.left;f.right=N.inset.right;break;case "west":f.left=N.inset.left;break;case "east":f.right=N.inset.right}a.css(f);c&&h.isClosed?c.css(e,N.inset[e]):c&&!h.isHidden&&c.css(e,N.inset[e]+S(b))}})},Qa=function(b){b=b?b.split(","):w.borderPanes;a.each(b,function(b,c){b=v[c];ca[c]=!1;fa[c]=!1;if(b){b=A[c];var h=B[c],e="#"===b.paneSelector.substr(0,
1)?b.paneSelector.substr(1):"",f=b.resizerClass,g=b.togglerClass,k="-"+c,n=X[c],m=n.resizer=ca[c]=a("<div></div>"),n=n.toggler=b.closable?fa[c]=a("<div></div>"):!1;!h.isVisible&&b.slidable&&m.attr("title",b.tips.Slide).css("cursor",b.sliderCursor);m.attr("id",e?e+"-resizer":"").data({parentLayout:X,layoutPane:X[c],layoutEdge:c,layoutRole:"resizer"}).css(w.resizers.cssReq).css("zIndex",A.zIndexes.resizer_normal).css(b.applyDemoStyles?w.resizers.cssDemo:{}).addClass(f+" "+f+k).hover(ja,oa).hover(L,
da).mousedown(a.layout.disableTextSelection).mouseup(a.layout.enableTextSelection).appendTo(t);a.fn.disableSelection&&m.disableSelection();b.resizerDblClickToggle&&m.bind("dblclick."+H,ab);n&&(n.attr("id",e?e+"-toggler":"").data({parentLayout:X,layoutPane:X[c],layoutEdge:c,layoutRole:"toggler"}).css(w.togglers.cssReq).css(b.applyDemoStyles?w.togglers.cssDemo:{}).addClass(g+" "+g+k).hover(ja,oa).bind("mouseenter",L).appendTo(m),b.togglerContent_open&&a("<span>"+b.togglerContent_open+"</span>").data({layoutEdge:c,
layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",c).addClass("content content-open").css("display","none").appendTo(n),b.togglerContent_closed&&a("<span>"+b.togglerContent_closed+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(n),Ba(c));eb(c);h.isVisible?J(c):(ua(c),ha(c,!0))}});Ta()},Ea=function(a,b){if(V()){var c=A[a],e=c.contentSelector,f=X[a],g=v[a],k;e&&(k=f.content=ia[a]=c.findNestedContent?
g.find(e).eq(0):g.children(e).eq(0));k&&k.length?(k.data("layoutRole","content"),k.data("layoutCSS")||k.data("layoutCSS",G(k,"height")),k.css(w.content.cssReq),c.applyDemoStyles&&(k.css(w.content.cssDemo),g.css(w.content.cssDemoPane)),g.css("overflowX").match(/(scroll|auto)/)&&g.css("overflow","hidden"),B[a].content={},!1!==b&&Aa(a)):f.content=ia[a]=!1}},eb=function(b){var c=a.layout.plugins.draggable;b=b?b.split(","):w.borderPanes;a.each(b,function(b,h){var f=A[h];if(!c||!v[h]||!f.resizable)return f.resizable=
!1,!0;var g=B[h],k=A.zIndexes;b=w[h];var n="horz"==b.dir?"top":"left",m=ca[h],q=f.resizerClass,r=0,x,F,C=q+"-drag",D=q+"-"+h+"-drag",G=q+"-dragging",H=q+"-"+h+"-dragging",I=q+"-dragging-limit",K=q+"-"+h+"-dragging-limit",J=!1;g.isClosed||m.attr("title",f.tips.Resize).css("cursor",f.resizerCursor);m.draggable({containment:t[0],axis:"horz"==b.dir?"y":"x",delay:0,distance:1,grid:f.resizingGrid,helper:"clone",opacity:f.resizerDragOpacity,addClasses:!1,zIndex:k.resizer_drag,start:function(a,b){f=A[h];
g=B[h];F=f.livePaneResizing;if(!1===R("ondrag_start",h))return!1;g.isResizing=!0;B.paneResizing=h;M.clear(h+"_closeSlider");la(h);x=g.resizerPosition;r=b.position[n];m.addClass(C+" "+D);J=!1;Sa(h,{resizing:!0})},drag:function(a,b){J||(b.helper.addClass(G+" "+H).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),J=!0,g.isSliding&&v[h].css("zIndex",k.pane_sliding));var c=0;b.position[n]<x.min?(b.position[n]=x.min,c=-1):b.position[n]>x.max&&(b.position[n]=x.max,c=1);c?(b.helper.addClass(I+
" "+K),window.defaultStatus=0<c&&h.match(/(north|west)/)||0>c&&h.match(/(south|east)/)?f.tips.maxSizeWarning:f.tips.minSizeWarning):(b.helper.removeClass(I+" "+K),window.defaultStatus="");F&&Math.abs(b.position[n]-r)>=f.liveResizingTolerance&&(r=b.position[n],e(a,b,h))},stop:function(b,c){a("body").enableSelection();window.defaultStatus="";m.removeClass(C+" "+D);g.isResizing=!1;B.paneResizing=!1;e(b,c,h,!0)}})});var e=function(a,b,c,h){var e=b.position,f=w[c];a=A[c];b=B[c];var g;switch(c){case "north":g=
e.top;break;case "west":g=e.left;break;case "south":g=N.layoutHeight-e.top-a.spacing_open;break;case "east":g=N.layoutWidth-e.left-a.spacing_open}g-=N.inset[f.side];h?(!1!==R("ondrag_end",c)&&Pa(c,g,!1,!0),db(!0),b.isSliding&&Sa(c,{resizing:!0})):Math.abs(g-b.size)<a.liveResizingTolerance||(Pa(c,g,!1,!0),ga.each(Ra))}},Ra=function(){var b=a(this),c=b.data("layoutMask"),c=B[c];"IFRAME"==c.tagName&&c.isVisible&&b.css({top:c.offsetTop,left:c.offsetLeft,width:c.outerWidth,height:c.outerHeight})},Sa=function(b,
c){var e=w[b],f=["center"],g=A.zIndexes,k=a.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:B[b].isSliding},c),n,m;k.resizing&&f.push(b);k.sliding&&f.push(w.oppositeEdge[b]);"horz"===e.dir&&(f.push("west"),f.push("east"));a.each(f,function(a,b){m=B[b];n=A[b];m.isVisible&&(n.maskObjects||!k.objectsOnly&&n.maskContents)&&jb(b).each(function(){Ra.call(this);this.style.zIndex=m.isSliding?g.pane_sliding+1:g.pane_normal+1;this.style.display="block"})})},db=function(b){if(b||!B.paneResizing)ga.hide();
else if(!b&&!a.isEmptyObject(B.panesSliding)){b=ga.length-1;for(var c,e;0<=b;b--)e=ga.eq(b),c=e.data("layoutMask"),A[c].maskObjects||e.hide()}},jb=function(b){for(var c=a([]),e,f=0,g=ga.length;f<g;f++)e=ga.eq(f),e.data("layoutMask")===b&&(c=c.add(e));if(c.length)return c;c=v[b];e=B[b];var f=A[b],g=A.zIndexes,k,n,m,q,r;if(f.maskContents||f.maskObjects){for(r=0;r<(f.maskObjects?2:1);r++)k=f.maskObjects&&0==r,n=document.createElement(k?"iframe":"div"),m=a(n).data("layoutMask",b),n.className="ui-layout-mask ui-layout-mask-"+
b,q=n.style,q.background="#FFF",q.position="absolute",q.display="block",k?(n.src="about:blank",n.frameborder=0,q.border=0,q.opacity=0,q.filter="Alpha(Opacity='0')"):(q.opacity=.001,q.filter="Alpha(Opacity='1')"),"IFRAME"==e.tagName?(q.zIndex=g.pane_normal+1,t.append(n)):(m.addClass("ui-layout-mask-inside-pane"),q.zIndex=f.maskZindex||g.content_mask,q.top=0,q.left=0,q.width="100%",q.height="100%",c.append(n)),ga=ga.add(n);b=ga}else b=a([]);return b},ib=function(b,c,e,f){if(V()){b=I.call(this,b);var g=
v[b],k=ia[b],n=ca[b],m=fa[b];g&&a.isEmptyObject(g.data())&&(g=!1);k&&a.isEmptyObject(k.data())&&(k=!1);n&&a.isEmptyObject(n.data())&&(n=!1);m&&a.isEmptyObject(m.data())&&(m=!1);g&&g.stop(!0,!0);var q=A[b],r=Q[b],t=a.isPlainObject(r)&&!a.isEmptyObject(r);f=void 0!==f?f:q.destroyChildren;t&&f&&(a.each(r,function(a,b){b.destroyed||b.destroy(!0);b.destroyed&&delete r[a]}),a.isEmptyObject(r)&&(r=Q[b]=null,t=!1));g&&c&&!t?g.remove():g&&g[0]&&(c=q.paneClass,f=c+"-"+b,c=[c,c+"-open",c+"-closed",c+"-sliding",
f,f+"-open",f+"-closed",f+"-sliding"],a.merge(c,pa(g,!0)),g.removeClass(c.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+H),t&&k?(k.width(k.width()),a.each(r,function(a,b){b.resizeAll()})):k&&k.css(k.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),g.data("layout")||g.css(g.data("layoutCSS")).removeData("layoutCSS"));m&&m.remove();n&&n.remove();X[b]=v[b]=ia[b]=ca[b]=fa[b]=!1;e||
Xa()}},La=function(a){var b=v[a],c=b[0].style;A[a].useOffscreenClose?(b.data(w.offscreenReset)||b.data(w.offscreenReset,{left:c.left,right:c.right}),b.css(w.offscreenCSS)):b.hide().removeData(w.offscreenReset)},ta=function(a){var b=v[a];a=A[a];var c=w.offscreenCSS,e=b.data(w.offscreenReset),f=b[0].style;b.show().removeData(w.offscreenReset);a.useOffscreenClose&&e&&(f.left==c.left&&(f.left=e.left),f.right==c.right&&(f.right=e.right))},Y=function(a,b){if(V()){a=I.call(this,a);var c=A[a],e=B[a],f=v[a],
g=ca[a];"center"===a||!f||e.isHidden||B.initialized&&!1===R("onhide_start",a)||(e.isSliding=!1,delete B.panesSliding[a],g&&g.hide(),!B.initialized||e.isClosed?(e.isClosed=!0,e.isHidden=!0,e.isVisible=!1,B.initialized||La(a),Fa("horz"===w[a].dir?"":"center"),(B.initialized||c.triggerEventsOnLoad)&&R("onhide_end",a)):(e.isHiding=!0,Da(a,!1,b)))}},Ya=function(a,b,c,e){if(V()){a=I.call(this,a);var f=B[a],g=v[a];"center"!==a&&g&&f.isHidden&&!1!==R("onshow_start",a)&&(f.isShowing=!0,f.isSliding=!1,delete B.panesSliding[a],
!1===b?Da(a,!0):$a(a,!1,c,e))}},ab=function(a,b){if(V()){var c=D(a);a=I.call(this,a);var e=B[a];c&&c.stopImmediatePropagation();e.isHidden?Ya(a):e.isClosed?$a(a,!!b):Da(a)}},Ma=function(a,b){var c=B[a];La(a);c.isClosed=!0;c.isVisible=!1;b&&ua(a)},Da=function(a,b,c,e){function f(){m.isMoving=!1;ha(g,!0);var a=w.oppositeEdge[g];B[a].noRoom&&(la(a),ba(a));e||!B.initialized&&!n.triggerEventsOnLoad||(r||R("onclose_end",g),r&&R("onshow_end",g),x&&R("onhide_end",g))}var g=I.call(this,a);if("center"!==g)if(!B.initialized&&
v[g])Ma(g,!0);else if(V()){var k=v[g],n=A[g],m=B[g],q,r,x;t.queue(function(a){if(!k||!n.closable&&!m.isShowing&&!m.isHiding||!b&&m.isClosed&&!m.isShowing)return a();var e=!m.isShowing&&!1===R("onclose_start",g);r=m.isShowing;x=m.isHiding;delete m.isShowing;delete m.isHiding;if(e)return a();q=!c&&!m.isClosed&&"none"!=n.fxName_close;m.isMoving=!0;m.isClosed=!0;m.isVisible=!1;x?m.isHidden=!0:r&&(m.isHidden=!1);m.isSliding?Z(g,!1):Fa("horz"===w[g].dir?"":"center",!1);ua(g);q?(fb(g,!0),k.hide(n.fxName_close,
n.fxSettings_close,n.fxSpeed_close,function(){fb(g,!1);m.isClosed&&f();a()})):(La(g),f(),a())})}},ua=function(b){if(ca[b]){var c=ca[b],e=fa[b],g=A[b],k=B[b],n=w[b].side,m=g.resizerClass,q=g.togglerClass,r="-"+b;c.css(n,N.inset[n]).removeClass(m+"-open "+m+r+"-open").removeClass(m+"-sliding "+m+r+"-sliding").addClass(m+"-closed "+m+r+"-closed");k.isHidden&&c.hide();g.resizable&&a.layout.plugins.draggable&&c.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title",
"");e&&(e.removeClass(q+"-open "+q+r+"-open").addClass(q+"-closed "+q+r+"-closed").attr("title",g.tips.Open),e.children(".content-open").hide(),e.children(".content-closed").css("display","block"));f(b,!1);B.initialized&&Ta()}},$a=function(a,b,c,e){function g(){q.isMoving=!1;Ia(k);q.isSliding||Fa("vert"==w[k].dir?"center":"",!1);J(k)}if(V()){var k=I.call(this,a),n=v[k],m=A[k],q=B[k],r,x;"center"!==k&&t.queue(function(a){if(!n||!m.resizable&&!m.closable&&!q.isShowing||q.isVisible&&!q.isSliding)return a();
if(q.isHidden&&!q.isShowing)a(),Ya(k,!0);else{q.autoResize&&q.size!=m.size?Oa(k,m.size,!0,!0,!0):la(k,b);var h=R("onopen_start",k);if("abort"===h)return a();"NC"!==h&&la(k,b);if(q.minSize>q.maxSize)return f(k,!1),!e&&m.tips.noRoomToOpen&&alert(m.tips.noRoomToOpen),a();b?Z(k,!0):q.isSliding?Z(k,!1):m.slidable&&ha(k,!1);q.noRoom=!1;ba(k);x=q.isShowing;delete q.isShowing;r=!c&&q.isClosed&&"none"!=m.fxName_open;q.isMoving=!0;q.isVisible=!0;q.isClosed=!1;x&&(q.isHidden=!1);r?(fb(k,!0),n.show(m.fxName_open,
m.fxSettings_open,m.fxSpeed_open,function(){fb(k,!1);q.isVisible&&g();a()})):(ta(k),g(),a())}})}},J=function(b,c){var e=v[b],g=ca[b],k=fa[b],n=A[b],m=B[b],q=w[b].side,r=n.resizerClass,t=n.togglerClass,F="-"+b;g.css(q,N.inset[q]+S(b)).removeClass(r+"-closed "+r+F+"-closed").addClass(r+"-open "+r+F+"-open");m.isSliding?g.addClass(r+"-sliding "+r+F+"-sliding"):g.removeClass(r+"-sliding "+r+F+"-sliding");oa(0,g);n.resizable&&a.layout.plugins.draggable?g.draggable("enable").css("cursor",n.resizerCursor).attr("title",
n.tips.Resize):m.isSliding||g.css("cursor","default");k&&(k.removeClass(t+"-closed "+t+F+"-closed").addClass(t+"-open "+t+F+"-open").attr("title",n.tips.Close),oa(0,k),k.children(".content-closed").hide(),k.children(".content-open").css("display","block"));f(b,!m.isSliding);a.extend(m,x(e));B.initialized&&(Ta(),Aa(b,!0));!c&&(B.initialized||n.triggerEventsOnLoad)&&e.is(":visible")&&(R("onopen_end",b),m.isShowing&&R("onshow_end",b),B.initialized&&R("onresize_end",b))},Ka=function(a){function b(){f.isClosed?
f.isMoving||$a(e,!0):Z(e,!0)}if(V()){var c=D(a),e=I.call(this,a),f=B[e];a=A[e].slideDelay_open;"center"!==e&&(c&&c.stopImmediatePropagation(),f.isClosed&&c&&"mouseenter"===c.type&&0<a?M.set(e+"_openSlider",b,a):b())}},hb=function(b){function c(){g.isClosed?Z(f,!1):g.isMoving||Da(f)}if(V()){var e=D(b),f=I.call(this,b);b=A[f];var g=B[f],n=g.isMoving?1E3:300;"center"===f||g.isClosed||g.isResizing||("click"===b.slideTrigger_close?c():b.preventQuickSlideClose&&g.isMoving||b.preventPrematureSlideClose&&
e&&a.layout.isMouseOverElem(e,v[f])||(e?M.set(f+"_closeSlider",c,k(b.slideDelay_close,n)):c()))}},fb=function(a,b){var c=v[a],e=B[a],f=A[a],g=A.zIndexes;b?(Sa(a,{animation:!0,objectsOnly:!0}),c.css({zIndex:g.pane_animate}),"south"==a?c.css({top:N.inset.top+N.innerHeight-c.outerHeight()}):"east"==a&&c.css({left:N.inset.left+N.innerWidth-c.outerWidth()})):(db(),c.css({zIndex:e.isSliding?g.pane_sliding:g.pane_normal}),"south"==a?c.css({top:"auto"}):"east"!=a||c.css("left").match(/\-99999/)||c.css({left:"auto"}),
C.msie&&f.fxOpacityFix&&"slide"!=f.fxName_open&&c.css("filter")&&1==c.css("opacity")&&c[0].style.removeAttribute("filter"))},ha=function(a,b){var c=A[a];a=ca[a];var e=c.slideTrigger_open.toLowerCase();if(a&&(!b||c.slidable)){e.match(/mouseover/)?e=c.slideTrigger_open="mouseenter":e.match(/(click|dblclick|mouseenter)/)||(e=c.slideTrigger_open="click");if(c.resizerDblClickToggle&&e.match(/click/))a[b?"unbind":"bind"]("dblclick."+H,ab);a[b?"bind":"unbind"](e+"."+H,Ka).css("cursor",b?c.sliderCursor:"default").attr("title",
b?c.tips.Slide:"")}},Z=function(a,b){function c(b){M.clear(a+"_closeSlider");b.stopPropagation()}var e=A[a],f=B[a],g=A.zIndexes,k=e.slideTrigger_close.toLowerCase(),n=b?"bind":"unbind",m=v[a],q=ca[a];M.clear(a+"_closeSlider");b?(f.isSliding=!0,B.panesSliding[a]=!0,ha(a,!1)):(f.isSliding=!1,delete B.panesSliding[a]);m.css("zIndex",b?g.pane_sliding:g.pane_normal);q.css("zIndex",b?g.pane_sliding+2:g.resizer_normal);k.match(/(click|mouseleave)/)||(k=e.slideTrigger_close="mouseleave");q[n](k,hb);"mouseleave"===
k&&(m[n]("mouseleave."+H,hb),q[n]("mouseenter."+H,c),m[n]("mouseenter."+H,c));b?"click"!==k||e.resizable||(q.css("cursor",b?e.sliderCursor:"default"),q.attr("title",b?e.tips.Close:"")):M.clear(a+"_closeSlider")},ba=function(b,c,e,f){c=A[b];var g=B[b],k=w[b],n=v[b],m=ca[b],q="vert"===k.dir,r;if("center"===b||q&&g.noVerticalRoom)(r=0<=g.maxHeight)&&g.noRoom?(ta(b),m&&m.show(),g.isVisible=!0,g.noRoom=!1,q&&(g.noVerticalRoom=!1),Ia(b)):r||g.noRoom||(La(b),m&&m.hide(),g.isVisible=!1,g.noRoom=!0);"center"!==
b&&(g.minSize<=g.maxSize?(g.size>g.maxSize?Oa(b,g.maxSize,e,!0,f):g.size<g.minSize?Oa(b,g.minSize,e,!0,f):m&&g.isVisible&&n.is(":visible")&&(e=g.size+N.inset[k.side],a.layout.cssNum(m,k.side)!=e&&m.css(k.side,e)),g.noRoom&&(g.wasOpen&&c.closable?c.autoReopen?$a(b,!1,!0,!0):g.noRoom=!1:Ya(b,g.wasOpen,!0,!0))):g.noRoom||(g.noRoom=!0,g.wasOpen=!g.isClosed&&!g.isSliding,g.isClosed||(c.closable?Da(b,!0,!0):Y(b,!0))))},Pa=function(a,b,c,e,f){if(V()){a=I.call(this,a);var g=A[a],k=B[a];f=f||g.livePaneResizing&&
!k.isResizing;"center"!==a&&(k.autoResize=!1,Oa(a,b,c,e,f))}},Oa=function(b,c,f,g,n){function m(){for(var b="width"===J?D.outerWidth():D.outerHeight(),b=[{pane:q,count:1,target:c,actual:b,correct:c===b,attempt:c,cssSize:S}],e=b[0],g,h="Inaccurate size after resizing the "+q+"-pane.";!e.correct;){g={pane:q,count:e.count+1,target:c};g.attempt=e.actual>c?k(0,e.attempt-(e.actual-c)):k(0,e.attempt+(c-e.actual));g.cssSize=("horz"==w[q].dir?F:K)(v[q],g.attempt);D.css(J,g.cssSize);g.actual="width"==J?D.outerWidth():
D.outerHeight();g.correct=c===g.actual;1===b.length&&(T(h,!1,!0),T(e,!1,!0));T(g,!1,!0);if(3<b.length)break;b.push(g);e=b[b.length-1]}C.size=c;a.extend(C,x(D));C.isVisible&&D.is(":visible")&&(G&&G.css(H,c+N.inset[H]),Aa(q));!f&&!L&&B.initialized&&C.isVisible&&R("onresize_end",q);f||(C.isSliding||Fa("horz"==w[q].dir?"":"center",L,n),Ta());e=w.oppositeEdge[q];c<Q&&B[e].noRoom&&(la(e),ba(e,!1,f));1<b.length&&T(h+"\nSee the Error Console for details.",!0,!0)}if(V()){var q=I.call(this,b),r=A[q],C=B[q],
D=v[q],G=ca[q],H=w[q].side,J=w[q].sizeType.toLowerCase(),L=C.isResizing&&!r.triggerEventsDuringLiveResize,M=!0!==g&&r.animatePaneSizing,Q,S;"center"!==q&&t.queue(function(b){la(q);Q=C.size;c=na(q,c);c=k(c,na(q,r.minSize));c=e(c,C.maxSize);if(c<C.minSize)b(),ba(q,!1,f);else{if(!n&&c===Q)return b();C.newSize=c;!f&&B.initialized&&C.isVisible&&R("onresize_start",q);S=("horz"==w[q].dir?F:K)(v[q],c);if(M&&D.is(":visible")){var g=a.layout.effects.size[q]||a.layout.effects.size.all,g=r.fxSettings_size.easing||
g.easing,h=A.zIndexes,t={};t[J]=S+"px";C.isMoving=!0;D.css({zIndex:h.pane_animate}).show().animate(t,r.fxSpeed_size,g,function(){D.css({zIndex:C.isSliding?h.pane_sliding:h.pane_normal});C.isMoving=!1;delete C.newSize;m();b()})}else D.css(J,S),delete C.newSize,D.is(":visible")?m():C.size=c,b()}})}},Fa=function(b,c,e){b=(b?b:"east,west,center").split(",");a.each(b,function(b,f){if(v[f]){var g=A[f];b=B[f];var h=v[f],n,m={},q=a.layout.showInvisibly(h),r={top:S("north",!0),bottom:S("south",!0),left:S("west",
!0),right:S("east",!0),width:0,height:0};r.width=N.innerWidth-r.left-r.right;r.height=N.innerHeight-r.bottom-r.top;r.top+=N.inset.top;r.bottom+=N.inset.bottom;r.left+=N.inset.left;r.right+=N.inset.right;a.extend(b,x(h));if("center"===f){if(!e&&b.isVisible&&r.width===b.outerWidth&&r.height===b.outerHeight)return h.css(q),!0;a.extend(b,W(f),{maxWidth:r.width,maxHeight:r.height});m=r;b.newWidth=m.width;b.newHeight=m.height;m.width=K(h,m.width);m.height=F(h,m.height);n=0<=m.width&&0<=m.height;if(!B.initialized&&
g.minWidth>r.width){var g=g.minWidth-b.outerWidth,r=A.east.minSize||0,t=A.west.minSize||0,w=B.east.size,D=B.west.size,G=w,H=D;0<g&&B.east.isVisible&&w>r&&(G=k(w-r,w-g),g-=w-G);0<g&&B.west.isVisible&&D>t&&(H=k(D-t,D-g),g-=D-H);if(0===g){w&&w!=r&&Oa("east",G,!0,!0,e);D&&D!=t&&Oa("west",H,!0,!0,e);Fa("center",c,e);h.css(q);return}}}else{b.isVisible&&!b.noVerticalRoom&&a.extend(b,x(h),W(f));if(!e&&!b.noVerticalRoom&&r.height===b.outerHeight)return h.css(q),!0;m.top=r.top;m.bottom=r.bottom;b.newSize=r.height;
m.height=F(h,r.height);b.maxHeight=m.height;n=0<=b.maxHeight;n||(b.noVerticalRoom=!0)}n?(!c&&B.initialized&&R("onresize_start",f),h.css(m),"center"!==f&&Ta(f),!b.noRoom||b.isClosed||b.isHidden||ba(f),b.isVisible&&(a.extend(b,x(h)),B.initialized&&Aa(f))):!b.noRoom&&b.isVisible&&ba(f);h.css(q);delete b.newSize;delete b.newWidth;delete b.newHeight;if(!b.isVisible)return!0;"center"===f&&(b=C.isIE6||!C.boxModel,v.north&&(b||"IFRAME"==B.north.tagName)&&v.north.css("width",K(v.north,N.innerWidth)),v.south&&
(b||"IFRAME"==B.south.tagName)&&v.south.css("width",K(v.south,N.innerWidth)));!c&&B.initialized&&R("onresize_end",f)}})},Xa=function(b){I(b);if(t.is(":visible"))if(B.initialized){if(!0===b&&a.isPlainObject(A.outset)&&t.css(A.outset),a.extend(N,x(t,A.inset)),N.outerHeight){!0===b&&wa();if(!1===R("onresizeall_start"))return!1;var c,e,f;a.each(["south","north","east","west"],function(a,b){v[b]&&(e=A[b],f=B[b],f.autoResize&&f.size!=e.size?Oa(b,e.size,!0,!0,!0):(la(b),ba(b,!1,!0,!0)))});Fa("",!0,!0);Ta();
a.each(w.allPanes,function(a,b){(c=v[b])&&B[b].isVisible&&R("onresize_end",b)});R("onresizeall_end")}}else ra()},Wa=function(b,c){b=I.call(this,b);A[b].resizeChildren&&(c||qa(b),c=Q[b],a.isPlainObject(c)&&a.each(c,function(a,b){b.destroyed||b.resizeAll()}))},Aa=function(b,c){V()&&(b=(b=I.call(this,b))?b.split(","):w.allPanes,a.each(b,function(a,b){function e(a){return k(n.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function f(){var a=A[b].contentIgnoreSelector,a=g.nextAll().not(".ui-layout-mask").not(a||
":lt(0)"),c=a.filter(":visible"),h=c.filter(":last");m={top:g[0].offsetTop,height:g.outerHeight(),numFooters:a.length,hiddenFooters:a.length-c.length,spaceBelow:0};m.spaceAbove=m.top;m.bottom=m.top+m.height;m.spaceBelow=h.length?h[0].offsetTop+h.outerHeight()-m.bottom+e(h):e(g)}a=v[b];var g=ia[b],h=A[b],n=B[b],m=n.content;if(!a||!g||!a.is(":visible"))return!0;if(!g.length&&(Ea(b,!1),!g))return;if(!1!==R("onsizecontent_start",b)){if(!n.isMoving&&!n.isResizing||h.liveContentResizing||c||void 0==m.top)f(),
0<m.hiddenFooters&&"hidden"===a.css("overflow")&&(a.css("overflow","visible"),f(),a.css("overflow","hidden"));a=n.innerHeight-(m.spaceAbove-n.css.paddingTop)-(m.spaceBelow-n.css.paddingBottom);g.is(":visible")&&m.height==a||(ka(g,a,!0),m.height=a);B.initialized&&R("onsizecontent_end",b)}}))},Ta=function(b){b=(b=I.call(this,b))?b.split(","):w.borderPanes;a.each(b,function(b,c){b=A[c];var e=B[c],f=v[c],h=ca[c],k=fa[c],m;if(f&&h){c=w[c].dir;var q=e.isClosed?"_closed":"_open",r=b["spacing"+q],t=b["togglerAlign"+
q],q=b["togglerLength"+q],x;if(0===r)h.hide();else{e.noRoom||e.isHidden||h.show();"horz"===c?(x=N.innerWidth,e.resizerLength=x,f=a.layout.cssNum(f,"left"),h.css({width:K(h,x),height:F(h,r),left:-9999<f?f:N.inset.left})):(x=f.outerHeight(),e.resizerLength=x,h.css({height:F(h,x),width:K(h,r),top:N.inset.top+S("north",!0)}));oa(b,h);if(k){if(0===q||e.isSliding&&b.hideTogglerOnSlide){k.hide();return}k.show();if(!(0<q)||"100%"===q||q>x)q=x,t=0;else if(n(t))switch(t){case "top":case "left":t=0;break;case "bottom":case "right":t=
x-q;break;default:t=g((x-q)/2)}else f=parseInt(t,10),t=0<=t?f:x-q+f;if("horz"===c){var C=K(k,q);k.css({width:C,height:F(k,r),left:t,top:0});k.children(".content").each(function(){m=a(this);m.css("marginLeft",g((C-m.outerWidth())/2))})}else{var D=F(k,q);k.css({height:D,width:K(k,r),top:t,left:0});k.children(".content").each(function(){m=a(this);m.css("marginTop",g((D-m.outerHeight())/2))})}oa(0,k)}B.initialized||!b.initHidden&&!e.isHidden||(h.hide(),k&&k.hide())}}})},Ba=function(a){if(V()){var b=I.call(this,
a);a=fa[b];var c=A[b];a&&(c.closable=!0,a.bind("click."+H,function(a){a.stopPropagation();ab(b)}).css("visibility","visible").css("cursor","pointer").attr("title",B[b].isClosed?c.tips.Open:c.tips.Close).show())}},f=function(b,c){a.layout.plugins.buttons&&a.each(B[b].pins,function(e,f){a.layout.buttons.setPinState(X,a(f),b,c)})},t=a(this).eq(0);if(!t.length)return T(A.errors.containerMissing);if(t.data("layoutContainer")&&t.data("layout"))return t.data("layout");var v={},ia={},ca={},fa={},ga=a([]),
N=B.container,H=B.id,X={options:A,state:B,container:t,panes:v,contents:ia,resizers:ca,togglers:fa,hide:Y,show:Ya,toggle:ab,open:$a,close:Da,slideOpen:Ka,slideClose:hb,slideToggle:function(a){a=I.call(this,a);ab(a,!0)},setSizeLimits:la,_sizePane:Oa,sizePane:Pa,sizeContent:Aa,swapPanes:function(b,c){function e(b){var c=v[b],f=ia[b];return c?{pane:b,P:c?c[0]:!1,C:f?f[0]:!1,state:a.extend(!0,{},B[b]),options:a.extend(!0,{},A[b])}:!1}function f(b,c){if(b){var e=b.P,g=b.C,h=b.pane,l=w[c],n=a.extend(!0,
{},B[c]),p=A[c],q={resizerCursor:p.resizerCursor};a.each(["fxName","fxSpeed","fxSettings"],function(a,b){q[b+"_open"]=p[b+"_open"];q[b+"_close"]=p[b+"_close"];q[b+"_size"]=p[b+"_size"]});v[c]=a(e).data({layoutPane:X[c],layoutEdge:c}).css(w.hidden).css(l.cssReq);ia[c]=g?a(g):!1;A[c]=a.extend(!0,{},b.options,q);B[c]=a.extend(!0,{},b.state);e.className=e.className.replace(new RegExp(p.paneClass+"-"+h,"g"),p.paneClass+"-"+c);Qa(c);l.dir!=w[h].dir?(e=m[c]||0,la(c),e=k(e,B[c].minSize),Pa(c,e,!0,!0)):ca[c].css(l.side,
N.inset[l.side]+(B[c].isVisible?S(c):0));b.state.isVisible&&!n.isVisible?J(c,!0):(ua(c),ha(c,!0));b=null}}if(V())if(b=I.call(this,b),B[b].edge=c,B[c].edge=b,!1===R("onswap_start",b)||!1===R("onswap_start",c))B[b].edge=b,B[c].edge=c;else{var g=e(b),n=e(c),m={};m[b]=g?g.state.size:0;m[c]=n?n.state.size:0;v[b]=!1;v[c]=!1;B[b]={};B[c]={};fa[b]&&fa[b].remove();fa[c]&&fa[c].remove();ca[b]&&ca[b].remove();ca[c]&&ca[c].remove();ca[b]=ca[c]=fa[b]=fa[c]=!1;f(g,c);f(n,b);g=n=m=null;v[b]&&v[b].css(w.visible);
v[c]&&v[c].css(w.visible);Xa();R("onswap_end",b);R("onswap_end",c)}},showMasks:Sa,hideMasks:db,initContent:Ea,addPane:Ja,removePane:ib,createChildren:ea,refreshChildren:qa,enableClosable:Ba,disableClosable:function(a,b){if(V()){a=I.call(this,a);var c=fa[a];c&&(A[a].closable=!1,B[a].isClosed&&$a(a,!1,!0),c.unbind("."+H).css("visibility",b?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(a){if(V()){a=I.call(this,a);var b=ca[a];b&&b.data("draggable")&&(A[a].slidable=
!0,B[a].isClosed&&ha(a,!0))}},disableSlidable:function(a){if(V()){a=I.call(this,a);var b=ca[a];b&&(A[a].slidable=!1,B[a].isSliding?Da(a,!1,!0):(ha(a,!1),b.css("cursor","default").attr("title",""),oa(null,b[0])))}},enableResizable:function(a){if(V()){a=I.call(this,a);var b=ca[a],c=A[a];b&&b.data("draggable")&&(c.resizable=!0,b.draggable("enable"),B[a].isClosed||b.css("cursor",c.resizerCursor).attr("title",c.tips.Resize))}},disableResizable:function(a){if(V()){a=I.call(this,a);var b=ca[a];b&&b.data("draggable")&&
(A[a].resizable=!1,b.draggable("disable").css("cursor","default").attr("title",""),oa(null,b[0]))}},allowOverflow:m,resetOverflow:r,destroy:function(b,c){a(window).unbind("."+H);a(document).unbind("."+H);"object"===typeof b?I(b):c=b;t.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(A.containerClass).unbind("."+H);ga.remove();a.each(w.allPanes,function(a,b){ib(b,!1,!0,c)});t.data("layoutCSS")&&!t.data("layoutRole")&&t.css(t.data("layoutCSS")).removeData("layoutCSS");"BODY"===
N.tagName&&(t=a("html")).data("layoutCSS")&&t.css(t.data("layoutCSS")).removeData("layoutCSS");q(X,a.layout.onDestroy);aa();for(var e in X)e.match(/^(container|options)$/)||delete X[e];X.destroyed=!0;return X},initPanes:V,resizeAll:Xa,runCallbacks:R,hasParentLayout:!1,children:Q,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===function(){bb();var b=A,c=B;c.creatingLayout=!0;q(X,a.layout.onCreate);if(!1===R("onload_start"))return"cancel";var e=t[0],f=a("html"),g=N.tagName=e.tagName,k=
N.id=e.id,n=N.className=e.className,e=A,m=e.name,r={},v=t.data("parentLayout"),w=t.data("layoutEdge"),F=v&&w,D=a.layout.cssNum,I;N.selector=t.selector.split(".slice")[0];N.ref=(e.name?e.name+" layout / ":"")+g+(k?"#"+k:n?".["+n+"]":"");N.isBody="BODY"===g;F||N.isBody||(g=t.closest("."+a.layout.defaults.panes.paneClass),v=g.data("parentLayout"),w=g.data("layoutEdge"),F=v&&w);t.data({layout:X,layoutContainer:H}).addClass(e.containerClass);g={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};
for(m in g)t.bind("layout"+m.toLowerCase()+"."+H,X[g[m]||m]);F&&(X.hasParentLayout=!0,v.refreshChildren(w,X));t.data("layoutCSS")||(N.isBody?(t.data("layoutCSS",a.extend(G(t,"position,margin,padding,border"),{height:t.css("height"),overflow:t.css("overflow"),overflowX:t.css("overflowX"),overflowY:t.css("overflowY")})),f.data("layoutCSS",a.extend(G(f,"padding"),{height:"auto",overflow:f.css("overflow"),overflowX:f.css("overflowX"),overflowY:f.css("overflowY")}))):t.data("layoutCSS",G(t,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));
try{r={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"};t.css(r);e.inset&&!a.isPlainObject(e.inset)&&(I=parseInt(e.inset,10)||0,e.inset={top:I,bottom:I,left:I,right:I});if(N.isBody)e.outset?a.isPlainObject(e.outset)||(I=parseInt(e.outset,10)||0,e.outset={top:I,bottom:I,left:I,right:I}):e.outset={top:D(f,"paddingTop"),bottom:D(f,"paddingBottom"),left:D(f,"paddingLeft"),right:D(f,"paddingRight")},f.css(r).css({height:"100%",border:"none",padding:0,margin:0}),C.isIE6?(t.css({width:"100%",height:"100%",
border:"none",padding:0,margin:0,position:"relative"}),e.inset||(e.inset=x(t).inset)):(t.css({width:"auto",height:"auto",margin:0,position:"absolute"}),t.css(e.outset)),a.extend(N,x(t,e.inset));else{var K=t.css("position");K&&K.match(/(fixed|absolute|relative)/)||t.css("position","relative");t.is(":visible")&&(a.extend(N,x(t,e.inset)),1>N.innerHeight&&T(e.errors.noContainerHeight.replace(/CONTAINER/,N.ref)))}D(t,"minWidth")&&t.parent().css("overflowX","auto");D(t,"minHeight")&&t.parent().css("overflowY",
"auto")}catch(J){}Va();a(window).bind("unload."+H,aa);q(X,a.layout.onLoad);b.initPanes&&ra();delete c.creatingLayout;return B.initialized}()?null:X}})(jQuery);
(function(a){a.layout&&(a.ui||(a.ui={}),a.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(e){var k=document.cookie,k=k?k.split(";"):[],g,n;for(n=0;g=k[n];n++)if(g=a.trim(g).split("="),g[0]==e)return decodeURIComponent(g[1]);return null},write:function(e,k,g){var n="",q="",c=!1;g=g||{};var b=g.expires||null,m=a.type(b);"date"===m?q=b:"string"===m&&0<b&&(b=parseInt(b,10),m="number");"number"===m&&(q=new Date,0<b?q.setDate(q.getDate()+b):(q.setFullYear(1970),c=!0));q&&(n+=";expires="+
q.toUTCString());g.path&&(n+=";path="+g.path);g.domain&&(n+=";domain="+g.domain);g.secure&&(n+=";secure");document.cookie=e+"="+(c?"":encodeURIComponent(k))+n},clear:function(e){a.ui.cookie.write(e,"",{expires:-1})}},a.cookie||(a.cookie=function(e,k,g){var n=a.ui.cookie;if(null===k)n.clear(e);else{if(void 0===k)return n.read(e);n.write(e,k,g)}}),a.layout.plugins.stateManagement=!0,a.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",
cookie:{name:"",domain:"",path:"",expires:"",secure:!1}},a.layout.optionsMap.layout.push("stateManagement"),a.layout.config.optionRootKeys.push("stateManagement"),a.layout.state={saveCookie:function(e,k,g){var n=e.options,q=n.stateManagement;g=a.extend(!0,{},q.cookie,g||null);e=e.state.stateData=e.readState(k||q.stateKeys);a.ui.cookie.write(g.name||n.name||"Layout",a.layout.state.encodeJSON(e),g);return a.extend(!0,{},e)},deleteCookie:function(e){e=e.options;a.ui.cookie.clear(e.stateManagement.cookie.name||
e.name||"Layout")},readCookie:function(e){e=e.options;return(e=a.ui.cookie.read(e.stateManagement.cookie.name||e.name||"Layout"))?a.layout.state.decodeJSON(e):{}},loadCookie:function(e){var k=a.layout.state.readCookie(e);k&&!a.isEmptyObject(k)&&(e.state.stateData=a.extend(!0,{},k),e.loadState(k));return k},loadState:function(e,k,g){if(a.isPlainObject(k)&&!a.isEmptyObject(k))if(k=e.state.stateData=a.layout.transformData(k),g=a.extend({animateLoad:!1,includeChildren:e.options.stateManagement.includeChildren},
g),e.state.initialized){var n=!g.animateLoad,q,c,b,m;a.each(a.layout.config.borderPanes,function(g,r){w=k[r];a.isPlainObject(w)&&(s=w.size,q=w.initClosed,c=w.initHidden,ar=w.autoResize,b=e.state[r],m=b.isVisible,ar&&(b.autoResize=ar),m||e._sizePane(r,s,!1,!1,!1),!0===c?e.hide(r,n):!0===q?e.close(r,!1,n):!1===q?e.open(r,!1,n):!1===c&&e.show(r,!1,n),m&&e._sizePane(r,s,!1,!1,n))});if(g.includeChildren){var r,C;a.each(e.children,function(b,c){(r=k[b]?k[b].children:0)&&c&&a.each(c,function(a,b){C=r[a];
b&&C&&b.loadState(C)})})}}else{var w=a.extend(!0,{},k);a.each(a.layout.config.allPanes,function(a,b){w[b]&&delete w[b].children});a.extend(!0,e.options,w)}},readState:function(e,k){"string"===a.type(k)&&(k={keys:k});k||(k={});var g=e.options.stateManagement,n=k.includeChildren,n=void 0!==n?n:g.includeChildren;k=k.stateKeys||g.stateKeys;var g={isClosed:"initClosed",isHidden:"initHidden"},q=e.state,c=a.layout.config.allPanes,b={},m,r,C,w,K,F;a.isArray(k)&&(k=k.join(","));k=k.replace(/__/g,".").split(",");
for(var x=0,G=k.length;x<G;x++)m=k[x].split("."),r=m[0],m=m[1],0>a.inArray(r,c)||(C=q[r][m],void 0!=C&&("isClosed"==m&&q[r].isSliding&&(C=!0),(b[r]||(b[r]={}))[g[m]?g[m]:m]=C));n&&a.each(c,function(c,g){K=e.children[g];w=q.stateData[g];a.isPlainObject(K)&&!a.isEmptyObject(K)&&(F=b[g]||(b[g]={}),F.children||(F.children={}),a.each(K,function(b,c){c.state.initialized?F.children[b]=a.layout.state.readState(c):w&&w.children&&w.children[b]&&(F.children[b]=a.extend(!0,{},w.children[b]))}))});return b},encodeJSON:function(e){function k(e){var k=
[],q=0,c,b,m,r=a.isArray(e);for(c in e)b=e[c],m=typeof b,"string"==m?b='"'+b+'"':"object"==m&&(b=parse(b)),k[q++]=(r?"":'"'+c+'":')+b;return(r?"[":"{")+k.join(",")+(r?"]":"}")}return((window.JSON||{}).stringify||k)(e)},decodeJSON:function(e){try{return a.parseJSON?a.parseJSON(e):window.eval("("+e+")")||{}}catch(k){return{}}},_create:function(e){var k=a.layout.state,g=e.options.stateManagement;a.extend(e,{readCookie:function(){return k.readCookie(e)},deleteCookie:function(){k.deleteCookie(e)},saveCookie:function(a,
c){return k.saveCookie(e,a,c)},loadCookie:function(){return k.loadCookie(e)},loadState:function(a,c){k.loadState(e,a,c)},readState:function(a){return k.readState(e,a)},encodeJSON:k.encodeJSON,decodeJSON:k.decodeJSON});e.state.stateData={};if(g.autoLoad)if(a.isPlainObject(g.autoLoad))a.isEmptyObject(g.autoLoad)||e.loadState(g.autoLoad);else if(g.enabled)if(a.isFunction(g.autoLoad)){var n={};try{n=g.autoLoad(e,e.state,e.options,e.options.name||"")}catch(q){}n&&a.isPlainObject(n)&&!a.isEmptyObject(n)&&
e.loadState(n)}else e.loadCookie()},_unload:function(e){var k=e.options.stateManagement;if(k.enabled&&k.autoSave)if(a.isFunction(k.autoSave))try{k.autoSave(e,e.state,e.options,e.options.name||"")}catch(g){}else e.saveCookie()}},a.layout.onCreate.push(a.layout.state._create),a.layout.onUnload.push(a.layout.state._unload))})(jQuery);
(function(a){a.layout&&(a.layout.plugins.buttons=!0,a.layout.defaults.autoBindCustomButtons=!1,a.layout.optionsMap.layout.push("autoBindCustomButtons"),a.layout.buttons={config:{borderPanes:"north,south,west,east"},init:function(e){var k=e.options.name||"",g;a.each("toggle open close pin toggle-slide open-slide".split(" "),function(n,q){a.each(a.layout.buttons.config.borderPanes.split(","),function(c,b){a(".ui-layout-button-"+q+"-"+b).each(function(){g=a(this).data("layoutName")||a(this).attr("layoutName");
void 0!=g&&g!==k||e.bindButton(this,q,b)})})})},get:function(e,k,g,n){k=a(k);e=e.options;k.length&&0<=a.layout.buttons.config.borderPanes.indexOf(g)&&(n=e[g].buttonClass+"-"+n,k.addClass(n+" "+n+"-"+g).data("layoutName",e.name));return k},bind:function(e,k,g,n){var q=a.layout.buttons;switch(g.toLowerCase()){case "toggle":q.addToggle(e,k,n);break;case "open":q.addOpen(e,k,n);break;case "close":q.addClose(e,k,n);break;case "pin":q.addPin(e,k,n);break;case "toggle-slide":q.addToggle(e,k,n,!0);break;
case "open-slide":q.addOpen(e,k,n,!0)}return e},addToggle:function(e,k,g,n){a.layout.buttons.get(e,k,g,"toggle").click(function(a){e.toggle(g,!!n);a.stopPropagation()});return e},addOpen:function(e,k,g,n){a.layout.buttons.get(e,k,g,"open").attr("title",e.options[g].tips.Open).click(function(a){e.open(g,!!n);a.stopPropagation()});return e},addClose:function(e,k,g){a.layout.buttons.get(e,k,g,"close").attr("title",e.options[g].tips.Close).click(function(a){e.close(g);a.stopPropagation()});return e},
addPin:function(e,k,g){var n=a.layout.buttons.get(e,k,g,"pin");if(n.length){var q=e.state[g];n.click(function(c){a.layout.buttons.setPinState(e,a(this),g,q.isSliding||q.isClosed);q.isSliding||q.isClosed?e.open(g):e.close(g);c.stopPropagation()});a.layout.buttons.setPinState(e,n,g,!q.isClosed&&!q.isSliding);q.pins.push(k)}return e},setPinState:function(a,k,g,n){var q=k.attr("pin");if(!q||n!==("down"==q)){q=a.options[g];a=q.tips;var q=q.buttonClass+"-pin",c=q+"-"+g;g=q+"-up "+c+"-up";q=q+"-down "+c+
"-down";k.attr("pin",n?"down":"up").attr("title",n?a.Unpin:a.Pin).removeClass(n?g:q).addClass(n?q:g)}},syncPinBtns:function(e,k,g){a.each(state[k].pins,function(n,q){a.layout.buttons.setPinState(e,a(q),k,g)})},_load:function(e){a.extend(e,{bindButton:function(g,k,q){return a.layout.buttons.bind(e,g,k,q)},addToggleBtn:function(g,k,q){return a.layout.buttons.addToggle(e,g,k,q)},addOpenBtn:function(g,k,q){return a.layout.buttons.addOpen(e,g,k,q)},addCloseBtn:function(g,k){return a.layout.buttons.addClose(e,
g,k)},addPinBtn:function(g,k){return a.layout.buttons.addPin(e,g,k)}});for(var k=0;4>k;k++)e.state[a.layout.buttons.config.borderPanes[k]].pins=[];e.options.autoBindCustomButtons&&a.layout.buttons.init(e)},_unload:function(a){}},a.layout.onLoad.push(a.layout.buttons._load))})(jQuery);
(function(a){a.layout.plugins.browserZoom=!0;a.layout.defaults.browserZoomCheckInterval=1E3;a.layout.optionsMap.layout.push("browserZoomCheckInterval");a.layout.browserZoom={_init:function(e){!1!==a.layout.browserZoom.ratio()&&a.layout.browserZoom._setTimer(e)},_setTimer:function(e){if(!e.destroyed){var k=e.options,g=e.state;setTimeout(function(){if(!e.destroyed&&k.resizeWithWindow){var n=a.layout.browserZoom.ratio();n!==g.browserZoom&&(g.browserZoom=n,e.resizeAll());a.layout.browserZoom._setTimer(e)}},
e.hasParentLayout?5E3:Math.max(k.browserZoomCheckInterval,100))}},ratio:function(){function e(a,b){return(parseInt(a,10)/parseInt(b,10)*100).toFixed()}var k=window,g=screen,n=document,q=n.documentElement||n.body,c=a.layout.browser,b=c.version,m,r,C;return!c.msie||8<b?!1:g.deviceXDPI&&g.systemXDPI?e(g.deviceXDPI,g.systemXDPI):c.webkit&&(m=n.body.getBoundingClientRect)?e(m.left-m.right,n.body.offsetWidth):c.webkit&&(r=k.outerWidth)?e(r,k.innerWidth):(r=g.width)&&(C=q.clientWidth)?e(r,C):!1}};a.layout.onReady.push(a.layout.browserZoom._init)})(jQuery);
(function(a){a.effects&&(a.layout.defaults.panes.useOffscreenClose=!1,a.layout.plugins&&(a.layout.plugins.effects.slideOffscreen=!0),a.layout.effects.slideOffscreen=a.extend(!0,{},a.layout.effects.slide),a.effects.slideOffscreen=function(e){return this.queue(function(){var k=a.effects,g=e.options,n=a(this),q=n.data("layoutEdge"),c=n.data("parentLayout").state,q=c[q].size,b=this.style,m="show"==k.setMode(n,g.mode||"show"),k=g.direction||"left",r="up"==k||"down"==k?"top":"left",C="up"==k||"left"==k,
w=a.layout.config.offscreenCSS||{},K=a.layout.config.offscreenReset,F={};F[r]=(m?C?"+=":"-=":C?"-=":"+=")+q;m?(n.data("offscreenResetTop",{top:b.top,bottom:b.bottom}),C?n.css(r,isNaN(q)?"-"+q:-q):"right"===k?n.css({left:c.container.layoutWidth,right:"auto"}):n.css({top:c.container.layoutHeight,bottom:"auto"}),"top"===r&&n.css(n.data(K)||{})):(n.data("offscreenResetTop",{top:b.top,bottom:b.bottom}),n.data(K,{left:b.left,right:b.right}));n.show().animate(F,{queue:!1,duration:e.duration,easing:g.easing,
complete:function(){n.data("offscreenResetTop")&&n.css(n.data("offscreenResetTop")).removeData("offscreenResetTop");m?n.css(n.data(K)||{}).removeData(K):n.css(w);e.callback&&e.callback.apply(this,arguments);n.dequeue()}})})})})(jQuery);
var manageSplitPanel=function(){return{manageUITreeViewToggle:function(){var a=$("#eastPanelToggle"),e=$(".ui-layout-east"),k=$(".ui-layout-center"),g=$(".ui-layout-resizer"),a=a.is(":checked"),n=parseInt($("#treeViewId").outerWidth()),n=parseInt((n-15)/2),q=parseInt(k.outerWidth()),c=parseInt(e.outerWidth());a&&($("#wrapper").find("#splitContent").length&&$("#wrapper").hasClass("treeview-collapse")?($("#splitContent").addClass("pv-sc-auto-adjust"),k.css({width:q+n+"px",right:c+n+"px"}),e.css({width:c+
n+"px"}),g.css({right:c+n+"px"})):($("#splitContent").removeClass("pv-sc-auto-adjust"),k.css({width:q-n+"px",right:c-n+"px"}),e.css({width:c-n+"px"}),g.css({right:c-n+"px"})))}}}();
$(document).ready(function(){function a(){var a=$(window).height()-(n+q);k.css({height:a+"px"})}function e(){$(".ui-layout-east, .ui-layout-resizer").show();$(".ui-layout-center").addClass("pv-ui-resizable");$(".ui-layout-center, .ui-layout-east").css({"overflow-y":"auto"});$(".ui-layout-center").css({width:"60%"});$(".ui-layout-east").css({width:"40%"});$(".ui-layout-resizer").css({right:"calc(40% - 5px)"})}var k=$("#splitContent"),g=$("#eastPanelToggle"),n=k.offset().top,q=$(".fixed-page-bot").outerHeight();
(function(){0<k.length&&(a(),k.layout({onresize:function(){if(k.hasClass("pv-sc-auto-adjust")){var a=$(".ui-layout-center").width()+175;$(".ui-layout-center").css({width:a+"px"})}g.is(":checked")||($(".ui-layout-center").css({width:"100%"}),$(".ui-layout-east, .ui-layout-resizer").hide())},east__onresize:function(){for(var a=docViewer.attachmentList.length,b=0;b<a;b++)docViewer.attachmentList[b].viewerControl.fitContent(PCCViewer.FitType.FullWidth)},east__size:$(".ui-layout-east").data("size"),resizerDblClickToggle:!1,
slideTrigger_open:"",slideTrigger_close:"",tips:{Slide:""}}),$(".ui-layout-center").css({width:"100%"}),$(".ui-layout-east, .ui-layout-resizer").hide(),$("#viewActionContainer").on("change","#eastPanelToggle",function(){g.prop("checked")?(e(),$(".ui-layout-center").width(),$("#wrapper").hasClass("enlarged")||$(".md-menu").click()):($(".ui-layout-center").removeClass("pv-ui-resizable"),$(".ui-layout-center").css({width:"100%",position:"relative"}),$(".ui-layout-east, .ui-layout-resizer").hide())}),
$(".button-menu-mobile").click(function(){var a=g.prop("checked"),b=$("#wrapper").hasClass("enlarged"),e=$(".ui-layout-center").width();a&&(b?$(".ui-layout-center").css({width:e+137+"px"}):$(".ui-layout-center").css({width:e-137+"px"}))}),function(){$(window).resize(function(){g.prop("checked")&&setTimeout(function(){e()},200)})}());pvi.caseEntry?pvi.caseEntry.toggleAttachmentSection():void 0})()});